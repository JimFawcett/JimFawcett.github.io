<!DOCTYPE html>
<html>
<!--
  StoryTellerRepo.html
-->
<head>
  <title>StoryTellerRepo Repo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/StylesPageFrameDefaults.css" />
  <link rel="stylesheet" href="css/StylesPageFrameStructure.css" />
  <link rel="stylesheet" href="css/StylesPageFrameMenus.css" />
  <link rel="stylesheet" href="css/StylesPageFrameThemeGreen.css" />
  <link rel="stylesheet" href="css/StylesWebComponents.css" />
  <script src="js/ScriptsWebComponents.js"></script>
  <script src="js/ScriptsPageFrameJsRepos.js"></script>
  <script src="js/ScriptsPageFramePagesJsRepos.js"></script>
  <script src="js/ScriptsPageFrameKeyboard.js"></script>
  <style>
    summary {
      padding: 3px 0px 5px 0px;
    }

    .container {
      display: grid;
      grid-template-columns: 0em 0.6fr 1.5fr 0.6fr 1fr 0em;
      // link to pg, descrip, link to repo, status grid-column-gap: 0em;
      padding: 0.0em;
      margin: 0em 0.25em 1em 0.25em;
      border: 1px solid var(--dark);
    }

    .item1 {
      grid-column: 2;
      padding: 0.2em 1em;
      border: 2px solid var(--dark);
    }

    .item2 {
      grid-column: 3;
      padding: 0.2em 1em;
      border: 2px solid var(--dark);
    }

    .item3 {
      grid-column: 4;
      padding: 0.2em 1em;
      border: 2px solid var(--dark);
    }

    .item4 {
      grid-column: 5;
      padding: 0.2em 1em;
      border: 2px solid var(--dark);
    }

    .gray {
      background-color: #ddd;
    }

    .spread {
      margin: 1em;
    }

    .tightSpread {
      margin: 0.5em;
    }
    #github #pagetitle {
      color: var(--light);
      background-color: var(--dark);
    }

    #github #title {
      color: var(--light);
      background-color: var(--dark);
    }

    #github #subtitle {
      color: var(--light);
      background-color: var(--dark);
    }

    #github a.repoLink {
      background-color: var(--dark);
      color: var(--light);
    }
  </style>
</head>
<body id="github" onload="initialize()">

  <a id="Next" href="WebComponentTests.html">N</a>
  <a id="Prev" href="SitePages.html">P</a>

  <page-frame>
    <frame-header>
      <nav id="navbar"></nav>
    </frame-header>
    <main>
      <div id="about" onclick="this.style.display = 'none'">about</div>
      <div id="modified">12/10/2022</div>
      <div id="page">StoryTellerRepo Repo</div>
      <div id="hlp"></div>
      <a id="top"></a>
      <content>
        <header>
          <a class="repoLink" href="https://github.com/JimFawcett/StoryTeller">StoryTeller code</a>
          <hgroup id="pagetitle">
            <h1 id="title">StoryTeller&nbsp;&nbsp;Repository</h1>
            <h3 id="subtitle" class="indent">Manages stories via manual sequencing and page-note queries</h3>
          </hgroup>

          <div style="padding-right:25px; position:absolute; top:2em; right:0em;">
            <details>
              <summary class="darkItem quickStatus" style="border:1px solid var(--light);">Quick Status</summary>
              <status-grid style="padding:5px 10px;" class="lightItem border">
                <status-itemLeft>
                  Code functions correctly
                </status-itemLeft>
                <status-itemRight>
                  - Works correctly for FireFox &amp; Chrome<br />
                  - Styling problems with Safari and Edge<br />
                  - CSS validates as correct using W3C validator
                </status-itemRight>
                <status-itemLeft>
                  Demonstration code
                </status-itemLeft>
                <status-itemRight>
                  yes
                </status-itemRight>
                <status-itemLeft>
                  Documentation
                </status-itemLeft>
                <status-itemRight>
                  yes
                </status-itemRight>
                <status-itemLeft>
                  Test cases
                </status-itemLeft>
                <status-itemRight>
                  no
                </status-itemRight>
                <status-itemLeft>
                  Static library
                </status-itemLeft>
                <status-itemRight>
                  none planned
                </status-itemRight>
                <status-itemLeft>
                  Planned design changes
                </status-itemLeft>
                <status-itemRight>
                  - Attempt to find stylings that work for all<br />
                  &nbsp;&nbsp;browsers<br />
                  - Add Local StoryTeller that uses JavaScript<br />
                  &nbsp;&nbsp;messages
                </status-itemRight>
              </status-grid>
            </details>
          </div>
        </header>

        <div class="right">
          <photosizer-block src="Pictures/StoryTellerPage.JPG" width="300" class="photoSizerBlock" style="margin-top:0;">
            <span style="
        display: inline-block;
        font-weight: bold;
        font-family: 'Comic Sans MS', Tahoma;
        background-color: #ddd;
        width: 100%;
        padding: 5px 0px;
      ">
              Fig 1. StoryTeller UI
            </span>
          </photosizer-block>
        </div>
        <h3 id="concept">1.0 Concept</h3>
        <t-b>
          <!--<div style="width:calc(100vw - 6rem);"><div id="fig1"></div></div>-->
          A story is a linked sequence of resources, mostly HTML pages, all focused on a common theme.
          You will find, in the documentation site, links to a <a href="StoryTeller.html">StoryTeller</a>
          that has, at this time, five stories:<br />
          <ul class="tight pad10">
            <li>Rust Story</li>
            <li>Rust Bite by Byte</li>
            <li>C++ Story</li>
            <li>&#8734; Data Library</li>
            <li>MLiPS</li>
            <li>Site Story</li>
            <li>Test Story</li>
          </ul><br />
          When the StoryTeller is opened, a list of available stories is presented for selection.
          A user may then navigate through the story using links or key presses.
        </t-b>
        <t-b>
          All of the stories listed above don&apos;t need the services of StoryTeller.  They work fine using
          the standard menus with its &quot;Prev&quot; and &quot;Next&quot; links. StoryTeller was designed
          to allow a page to be used in more than one story.  That means there needs to be another way of
          defining the page sequence since a page link is a permanent link to one other page.
        </t-b>
        <t-b>
          That&apos;s what the StoryTOC does, as shown in Figure 2. The design worked well enough, but was
          a bit less ergonomic than navigating the conventional stories. For that reason I don&apos;t plan to
          continue this development.
        </t-b>
        <div class="right clear">
          <photosizer-block src="Pictures/StoryTellerCallGraph.JPG" width="300" class="photoSizerBlock" style="margin-top:0;">
            <span style="
        display: inline-block;
        font-weight: bold;
        font-family: 'Comic Sans MS', Tahoma;
        background-color: #ddd;
        width: 100%;
        padding: 5px 0px;
      ">
              Fig 1. StoryTeller Callgraph
            </span>
          </photosizer-block>
        </div>
        <h3 id="design">2.0 Design<span style="font-size:0.75em;"> - Note: see status below</span></h3>
        <t-b>
          <!--<div style="width:calc(100vw - 6rem);"><div id="fig2"></div></div>-->
          StoryTeller provides an iframe that fills most of the available browser view, and a set of
          navigation buttons that invoke JavaScript functions for navigation and query.
        </t-b>
        <t-b>
          For security reasons, iframes are not allowed to directly interact with host code.  However, the host
          needs to figure out how to link story pages.  The way that is done is:
          <ul>
            <li>
              The StoryTeller host page loads a list of available stories.  When a user clicks on a link to
              one of the stories, a story Table of Contents page is loaded.  As part of the loading, that page
              analyzes its own links and text immediately below a link, and writes that information into localStorage.
            </li>
            <li>
              The StoryTeller host reads localStorage to extract all the story information so it can build
              a timeline - an array of JavaScript objects, each having a url, name, and page-notes.
              <spacer-10></spacer-10>
              It also builds a Table of Contents for the story, as a dropdown list, and provides buttons for
              manually steping through story content.
            </li>
          </ul>
          It took quite a bit of JavaScript and CSS styling, and some fairly intricate event processing
          to get all this to work, but it does!
        </t-b>
        <h3 id="build">3.0 Build</h3>
        <t-b>
          StoryTeller was built with Visual Studio Community Edition - 2019, and tested on Windows 10.
        </t-b>
        <h3 id="status">3.0 Status</h3>
        <t-b>
          The design of StoryTeller is still evolving.  I&apos;ve refactored its JavaScript, and converted from
          localStorage events to iframe onLoad events, but am still using localStorage to hold story information.
          The current version, StoryTeller_LocalStorage,
          uses iframe onLoad event exclusively. This version works well for FireFox and Chrome, when using
          https:// or http:// protocols.
        </t-b>
        <t-b>
          Both Edge and Safari are able to use StoryTeller to step through stories, but both of them have
          CSS placement artifacts that make that a less than perfect experience.  I will be looking at that soon.
          In the meantime you can use either FireFox or Chrome on any of the major platforms.  Using current
          versions, StoryTelling works fine on Windows 10, Ubuntu 18.04, and macOS Mohave.  You can download
          either from their websites (to be sure you get a recent version).  The installers for each platform
          work with no problems.
        </t-b>
        <t-b>
          Running StoryTeller locally from a machine drive uses the file:// protocol.  There are variations
          in how all of these browsers treat localStorage for the file:// protocoal.  Edge, for example,
          doesn&apos;t define local storage for file://.  Neither FireFox nor Chrome will display stories locally
          due to CORS security settings (browsers treat each file as a unique domain).
        </t-b>
        <t-b>
          I&apos;m working on a version, StoryTeller_Messages, that uses JavaScript messages to
          use with the file:// protocol.  That should work for all the major browsers.
          That work has just started, been put on hold for other things,
          but will make an appearance soon.
        </t-b>
        <t-b>
          <h4 id="current">3.1 Current Status of this repository</h4>
          StoryTeller_LocalStorage.html is the current version hosted by this site.  It can
          present any story that has a Story TOC page, as described above.
          Here&apos;s an <a href="CppStoryViewable.html">Example</a>.  Look at the page source to get an idea of
          how things work.
        </t-b>
        <t-b>
          The next update will also provide StoryTeller_Message.html, which should work for the file:// protocol with all
          three browsers.
        </t-b>
        <h4 id="late"><span style="color:red;">3.2 Late Breaking Status Update</span></h4>
        <t-b>
          Several months ago I made a breaking code change and have not fixed that yet. Eventually I will implement the
          StoryTeller_Messages version. While that design is interesting, its implementation has a low priority because of the
          ergonomic issues cited at the end of the Concept section.
        </t-b>
        <div style="height:10em;"></div>
      </content>
      <a id="bottom"></a>
      <page-TOC id="pages" style="display:none;">
      </page-TOC>
      <page-sections id="sections" style="display:none;">
        <sec-elem style="width:0.0em">&nbsp;</sec-elem>
        <menu-elem class="secElem"><a href="#bottom">bottom</a></menu-elem>
        <menu-elem class="secElem"><a href="#late">late</a></menu-elem>
        <menu-elem class="secElem"><a href="#current">current</a></menu-elem>
        <menu-elem class="secElem"><a href="#status">status</a></menu-elem>
        <menu-elem class="secElem"><a href="#build">build</a></menu-elem>
        <menu-elem class="secElem"><a href="#design">design</a></menu-elem>
        <menu-elem class="secElem"><a href="#concept">concept</a></menu-elem>
        <!--<menu-elem class="secElem"><a href="#contains">contains</a></menu-elem>-->
        <menu-elem class="secElem"><a href="#top">top</a></menu-elem>
        <div class='darkItem popupHeader' style="padding:0.25em 2.0em;" onclick="this.parentElement.style.display='none'">Sections</div>
      </page-sections>
    </main>
    <frame-footer>
      <menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem id="nextLink2" onclick="bottomMenu.next()">Next</menu-elem>
      <menu-elem id="prevLink2" onclick="bottomMenu.prev()">Prev</menu-elem>
      <menu-elem id="pgbtn" onclick="bottomMenu.pages()">Pages</menu-elem>
      <menu-elem onclick="bottomMenu.sections()">Sections</menu-elem>
      <menu-elem onclick="bottomMenu.about()">About</menu-elem>
      <menu-elem id="kysbtn" onclick="storyHlpMenu.keys()">Keys</menu-elem>
      <!--<menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.decrZoomScreen()">Zout</menu-elem>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.normZoomScreen()">Zdef</menu-elem>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.incrZoomScreen()">Zin</menu-elem>-->
    </frame-footer>
  </page-frame>
</body>
</html>