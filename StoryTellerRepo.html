<!DOCTYPE html>
<html>
<head>
  <!--
   - StoryTellerRepo.html
   - ver 1.0 - 10 June 2019
   - Jim Fawcett, Emeritus Teaching Professor, Syracuse University
  -->
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <meta name="description" content="Software Projects. Code Samples. Software Links" />
  <meta name="keywords" content="Repository, Design, Code" />
  <meta name="Author" content="Jim Fawcett" />
  <meta name="Author" content="James Fawcett" />
  <title>Story Teller</title>
  <script src="js/ScriptsUtilities.js"></script>
  <script src="js/ScriptsTemplate.js"></script>
  <script src="js/ScriptsKeyboard.js"></script>
  <script src="js/ScriptsMenuJsRepo.js"></script>
  <script src="js/ScriptsSizerComp.js"></script>
  <link rel="stylesheet" href="css/StylesTemplate.css" />
  <link rel="stylesheet" href="css/StylesMenu.css" />
  <link rel="stylesheet" href="css/StylesSizerComp.css" />
  <link rel="stylesheet" href="css/StylesGreenTheme.css" />
  <style>
    summary {
      padding: 3px 0px 5px 0px;
    }
  </style>
</head>
<body id="github" onload="initializeMenu()">

  <navKeys-Container>
    <nav-Key id="sKey" onclick="toggleSwipeEvents()">S</nav-Key>
    <nav-Key id="rKey" onclick="location.reload()">R</nav-Key>
    <nav-Key id="tKey" onclick="scrollPageTop()">T</nav-Key>
    <nav-Key id="bKey" onclick="scrollPageBottom()">B</nav-Key>
    <nav-Key id="hKey" onclick="helpWin()">H</nav-Key>
    <nav-Key id="pKey" onclick="loadPrev()">P</nav-Key>
    <nav-Key id="nKey" onclick="loadNext()">N</nav-Key>
  </navKeys-Container>

  <nav>
    <div id="navbar"></div>
  </nav>
  <a id="Next" href="Tests.html">N</a>
  <a id="Prev" href="SitePages.html">P</a>

  <header>
    <a class="repoLink" href="https://github.com/JimFawcett/StoryTeller">StoryTeller code</a>
    <hgroup id="pagetitle">
      <h1 id="title">StoryTeller&nbsp;&nbsp;Repository</h1>
      <h3 id="subtitle">Manages stories via manual sequencing and page-note queries</h3>
    </hgroup>
  </header>

  <!--<indent-block style="width:70%; display:block;">
    <img class="strip-photo" src="Pictures/TextFinderCodeStrip.JPG" alt="Text Finder Code Strip" width="100%" />
    <div align="center">TextFinder code fragment</div>
  </indent-block>-->

  <hr class="spread" />
  <indent-block>
    <h3>Concept:</h3>
    <indent-block>
      <div id="fig1"></div>
      A story is a linked sequence of resources, mostly HTML pages, all focused on a common theme.
      You will find, in the documentation site, links to a <a href="StoryTeller.html">StoryTeller</a>
      that has, at this time, five stories:
      <ul class="tight pad10">
        <li>C++ Story</li>
        <li>&#8734; Data Library</li>
        <li>MLiPS</li>
        <li>Site Story</li>
        <li>Test Story</li>
      </ul>
      When the StoryTeller is opened, a list of available stories is presented for selection.
      A user may then navigate through the story using links or key presses.
    </indent-block>
    <h3>Design:<span style="font-size:0.75em;"> - Note: see status below</span></h3>
    <indent-block>
      <div id="fig2"></div>
      StoryTeller provides an iframe that fills most of the available browser view, and a set of
      navigation buttons that invoke JavaScript functions for navigation and query.
      <spacer-10></spacer-10>
      For security reasons, iframes are not allowed to directly interact with host code.  However, the host
      needs to figure out how to link story pages.  The way that is done is:
      <ul class="tight pad10">
        <li>
          The StoryTeller host page loads a list of available stories.  When a user clicks on a link to
          one of the stories, a story Table of Contents page is loaded.  As part of the loading, that page
          analyzes its own links and text immediately below a link, and writes that information into localStorage.
        </li>
        <li>
          The StoryTeller host reads localStorage to extract all the story information so it can build
          a timeline - an array of JavaScript objects, each having a url, name, and page-notes.
          <spacer-10></spacer-10>
          It also builds a Table of Contents for the story, as a dropdown list, and provides buttons for
          manually steping through story content.
        </li>
      </ul>
      <spacer-10></spacer-10>
      It took quite a bit of JavaScript and CSS styling, and some fairly intricate event processing
      to get all this to work, but it does!
    </indent-block>
    <h3>Build:</h3>
    <indent-block>
      StoryTeller was built with Visual Studio Community Edition - 2019, and tested on Windows 10.
    </indent-block>
    <h3>Status:</h3>
    <indent-block>
      <h4>Update:</h4>
      The design of StoryTeller is still evolving.  I&apos;ve refactored its JavaScript, and converted from
      localStorage events to iframe onLoad events, but am still using localStorage to hold story information.
      The current version, StoryTeller_LocalStorage,
      uses iframe onLoad event exclusively. This version works well for FireFox and Chrome, when using 
      https:// or http:// protocols.
      <spacer-15></spacer-15>
      Both Edge and Safari are able to use StoryTeller to step through stories, but both of them have
      CSS placement artifacts that make that a less than perfect experience.  I will be looking at that soon.
      In the meantime you can use either FireFox or Chrome on any of the major platforms.  Using current
      versions, StoryTelling works fine on Windows 10, Ubuntu 18.04, and macOS Mohave.  You can download
      either from their websites (to be sure you get a recent version).  The installers for each platform 
      work with no problems.
      <spacer-15></spacer-15>
      Running StoryTeller locally from a machine drive uses the file:// protocol.  There are variations
      in how all of these browsers treat localStorage for the file:// protocoal.  Edge, for example,
      doesn&apos;t define local storage for file://.  For that reason, only FireFox works correctly
      loading files from the local drive.
      <spacer-15></spacer-15>
      I&apos;m working on a version, StoryTeller_Messages, that uses JavaScript messages to
      use with the file:// protocol.  That should work for all the major browsers.
      That work has just started, been put on hold for other things,
      but will make an appearance soon.
    </indent-block>
    <indent-block>
      <h4>Current Status of this repository:</h4>
      StoryTeller_LocalStorage.html is the current version hosted by this site.  It can
      present any story that has a Story TOC page, as described above.
      Here&apos;s an <a href="CppStoryViewable.html">Example</a>.  Look at the page source to get an idea of
      how things work.   You can run it locally with FireFox, but not with Chrome (since I changed the event processing),
      and  not with Edge, which doesn&apos;t provide local storage for the file:// protocol.
      <spacer-15></spacer-15>
      The next update will also provide StoryTeller_Message.html, which should work for the file:// protocol with all
      three browsers.
    </indent-block>
    <spacer-15></spacer-15>
    <!--<img class="strip-photo" src="Pictures/CampusAtNight.jpg" alt="campus at night" />-->
  </indent-block>
  <info-bar></info-bar>
  <script>createSizer("Pictures/StoryTellerPage.JPG", "Fig 1. StoryTeller Interface", 340, "fig1")</script>
  <script>createSizer("Pictures/StoryTellerCallGraph.JPG", "Fig 2. StoryTeller Call Graph", 340, "fig2")</script>
</body>
</html>