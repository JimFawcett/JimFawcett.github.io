<!DOCTYPE html>
<html>
<head>
  <!--
   - CsConcurrentFileAccess.html
   - ver 1.0 - 10 June 2019
   - Jim Fawcett, Emeritus Teaching Professor, Syracuse University
  -->
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <meta name="description" content="Software Projects. Code Samples. Software Links" />
  <meta name="keywords" content="Repository, Design, Code" />
  <meta name="Author" content="Jim Fawcett" />
  <meta name="Author" content="James Fawcett" />
  <title>CsConcurrentFileAccess</title>
  <script src="js/ScriptsUtilities.js"></script>
  <script src="js/ScriptsTemplate.js"></script>
  <script src="js/ScriptsKeyboard.js"></script>
  <script src="js/ScriptsMenuCsRepo.js"></script>
  <link rel="stylesheet" href="css/StylesTemplate.css" />
  <link rel="stylesheet" href="css/StylesMenu.css" />
  <link rel="stylesheet" href="css/StylesDarkRedTheme.css" />
  <style>
    summary {
      padding: 3px 0px 5px 0px;
    }
  </style>
</head>
<body id="github" onload="initializeMenu()">

  <navKeys-Container>
    <nav-Key id="sKey" onclick="toggleSwipeEvents()">S</nav-Key>
    <nav-Key id="rKey" onclick="location.reload()">R</nav-Key>
    <nav-Key id="tKey" onclick="scrollPageTop()">T</nav-Key>
    <nav-Key id="bKey" onclick="scrollPageBottom()">B</nav-Key>
    <nav-Key id="hKey" onclick="helpWin()">H</nav-Key>
    <nav-Key id="pKey" onclick="loadPrev()">P</nav-Key>
    <nav-Key id="nKey" onclick="loadNext()">N</nav-Key>
  </navKeys-Container>

  <nav>
    <div id="navbar"></div>
  </nav>
  <a id="Next" href="CsGraph.html">N</a>
  <a id="Prev" href="CsNavigator.html">P</a>

  <header>
    <a class="repoLink" href="https://github.com/JimFawcett/CsConcurrentFileAccess">CsConcurrentFileAccess code</a>
    <hgroup id="pagetitle">
      <h1 id="title">CsConcurrentFileAccess&nbsp;&nbsp;Repository</h1>
      <h3 id="subtitle">Supports multiple concurrent file readers and writers</h3>
    </hgroup>
  </header>

  <hr class="spread" />
  <indent-block>
    <h3>Concept:</h3>
    <indent-block>
      When a thread has opened a file for reading or writing, the .Net System.IO.File class will throw an exception
      if another file attempts to open for either reading<sup>1</sup> or writing.  This small library
      supports concurrent access by catching thrown exceptions, sleeping for a small interval and 
      retrying the file open operation.  It will do that a finite number of times before declaring
      failure<sup>2</sup>.
    </indent-block>
    <h3>Design:</h3>
    <indent-block>
      The library provides two classes:
      <ul>
        <li>
          FileReader with methods:
          <ul class="tight">
            <li>bool Open(string filename)</li>
            <li>void Close()</li>
            <li>
              int ReadFile(string filename) - uses Open and Close
            </li>
            <li>
              byte[] LastFileRead() - returns all bytes in filename
            </li>
          </ul>
          and properties:
          <ul class="tight">
            <li>
              int NumAttempts - number of attempts to Open
            </li>
            <li>
              int NumFailures - number of failures to Open
            </li>
            <li>
              int SleepMilliSecs - time to wait in milliseconds between attempts to Open
            </li>
          </ul>
        </li>
        <li>
          FileWriter with methods:
          <ul class="tight">
            <li>
              bool Open(string filename)
            </li>
            <li>
              void Close()
            </li>
            <li>
              int CopyFile(string readPath, string writePath)
            </li>
          </ul>
          and properties:
          <ul class="tight">
            <li>
              int NumAttempts - number of attempts to Open
            </li>
            <li>
              int NumFailures - number of failures to Open
            </li>
            <li>
              int SleepMilliSecs - time to wait in milliseconds between attempts to Open
            </li>
          </ul>
        </li>
      </ul>
    </indent-block>
    <h3>Build:</h3>
    <indent-block>
      All code was built with Visual Studio, Community Edition - 2019, and tested on Windows 10.
    </indent-block>
    <hr class="spread" />
    <ol>
      <li>
        The System.IO.File class Open method supports FileShare.Read to allow multiple concurrent
        readers access to a shared file.  That was used in this library to minimize
        exception handling for read operations.
      </li>
      <li>
        At this time, the library does not query the exception to see if continuing is feasible.
        For example, if the error is file access denial, no amount of retrying will succeed. Eventually
        the library will incorporate this query test.
      </li>
    </ol>
  </indent-block>
  <spacer-25></spacer-25>
  <!--<img class="strip-photo" src="Pictures/CampusAtNight.jpg" alt="campus at night" />-->

  <info-bar></info-bar>
</body>
</html>