<!DOCTYPE html>
<html>
<!--
  DeployBites_Git.html
-->
<head>
  <title>Deployment Git</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/StylesPageFrameDefaults.css" />
  <link rel="stylesheet" href="css/StylesPageFrameStructure.css" />
  <link rel="stylesheet" href="css/StylesPageFrameMenus.css" />
  <link rel="stylesheet" href="css/StylesPageFrameThemeDefault.css" />
  <link rel="stylesheet" href="css/StylesWebComponents.css" />
  <script src="js/ScriptsWebComponents.js"></script>
  <script src="js/ScriptsPageFrame.js"></script>
  <script src="js/ScriptsPageFramePagesDeployTrack.js"></script>
  <script src="js/ScriptsPageFrameKeyboard.js"></script>
  <style>
    #github table {
      width: 90%;
      border: 1px solid black;
    }

      #github table tr {
        border: 1px solid var(--dark);
      }

        #github table tr th {
          color: var(--dark);
          background-color: var(--menu);
        }

        #github table tr td {
          color: var(--dark);
          background-color: var(--light);
        }

      #github table a:link {
        color: var(--dark);
        background-color: transparent;
      }

      #github table a:visited {
        color: var(--dark);
        background-color: transparent;
      }

      #github table a:hover {
        color: var(--dark);
        background-color: transparent;
      }

      #github table a:active {
        color: var(--dark);
        background-color: transparent;
      }
  </style>
</head>
<body id="github" onload="initialize()">

  <a id="Next" href="DeployBites_Git.html">Next</a>
  <a id="Prev" href="../../indexDeployment.html">Prev</a>

  <page-frame>
    <frame-header>
      <nav id="navbar"></nav>
    </frame-header>
    <main>
      <div id="about">about</div>
      <div id="modified">11/07/2022</div>
      <div id="page">Deploy Git</div>
      <div id="hlp"></div>
      <a id="top"></a>
      <content>
        <header id="pagetitle">
          <a class="repoLink undef" href="Javascript:;">DeployBites Repository</a>
          <h1>DeployBite - Git</h1>
          <h3 id="subtitle" class="indent">init, status, add, commit, push, ...</h3>
        </header>
        <h3 id="prologue">1.0 Prologue</h3>
        <div class="indents">
          <t-b>
            Deployment is a process consisting of steps necessary to create, change, and push contents, e.g.,
            code, text, images, and data,
            to a platform that provides access for a set of users. The process is almost always accompanied
            by tools that support those steps.
          </t-b>
          <h3 id="git">2.0 Git Code Management</h3>
          <t-b>
            This page focuses on the code management tool git.  Git is a part of many widely used deployment
            processes. Git supports both local control and distributed code management.
          </t-b>
          <div style="width:calc(100vw - 6rem);">
            <div class="right" style="margin-top:0em;">
              <photosizer-block src="pictures/git_graph2.png" width="250" class="photoSizerBlock">
                <span style="
                display: inline-block;
                font-weight: bold;
                font-family: 'Comic Sans MS', Tahoma;
                background-color: #ddd;
                width: 100%;
                padding: 5px 0px;
              ">
                  Figure 1. Git Commit History
                </span>
              </photosizer-block>
            </div>
          </div>
          <t-b>
            It consists of a local repository of code and hooks to push and pull code from remote
            repositories. Git manages one or more branches consisting of code snapshot commits with a &quot;Head&quot;
            pointer to the latest commit on the current branch.
          </t-b>
          <t-b>
            <div style="border:2px solid maroon; padding:0.25em 1em; max-width:40em;">
              Note to self:
              <ul class="tight">
                <li>
                  delete top level .git.<br />git init both demo1 and demo1<br />redo demo images
                </li>
                <li>
                  setup DeployBites repository
                </li>
                <li>
                  fix Tracks link to this page
                </li>
              </ul>
            </div>
          </t-b>
          <t-b>
            Figure 1. shows a git commit history. It resulted from actions shown in the annotated dropdown, below:
            <details>
              <summary class="darkItem">
                Annotated Creation of git History
              </summary>
              <hr />
              <ol>
                <li>
                  A Rust project directory tree was created with cargo and initialized with &quot;git init&quot;.
                  The git status command shows the state of this git repository.
                  <div>
                    <div class="lefts" style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F1.png" width="450" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 2. Rust Project & Git Init
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  Figure 3 shows the current state of git&apos;s working tree. The git root, <c-s>GitDemoRust</c-s>
                  contains a hidden directory <c-s>.git</c-s> that contains all of the repository&apos;s private
                  working folders and files.
                  <div>
                    <div class="lefts" style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F2.png" width="350" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 3. git Repository Tree
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  The files in demo1 were staged for commit with the command &quot;git add -A&quot;, and commited with
                  the command &quot;git commit -m&lt;commit #1&gt;&quot;. That results in commit #1 on the default
                  &quot;main&quot; branch.
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F3.png" width="650" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 4. First Commit
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  The results of this first commit are shown by a git log command and cargo run.
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F4.png" width="300" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 5. git Log and Rust run
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  Next, we edit main.rs to display a new message and commit.
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F5.png" width="450" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 6. Edit main.rs and commit
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  The git repository keeps more details about the commit, as shown in Figure 7.
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F6.png" width="450" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 7. Commit Message Details
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  Factored out display function and committed:
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F7.png" width="450" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 8. Commit #3 - refactored
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  Created branch test.
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F8.png" width="450" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 9. Created Branch test
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                  Switch to branch test with &quot;git checkout test&quot;.
                </li>
                <li>
                  On branch test, factored out display_header, and committed.
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F9.png" width="450" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 10. Commit #4 on branch test
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  On branch test, added global &quot;const BRANCH&quot; for display, and committed.
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F10.png" width="450" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 11. Commit #5 on branch test
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                </li>
                <li>
                  Switched to branch main with &quot;git checkout main&quot; and made small text modification.
                  <div>
                    <div style="margin-top:0em;">
                      <photosizer-block src="pictures/GitDemo1_F11.png" width="450" class="photoSizerBlock">
                        <span style="
                        display: inline-block;
                        font-weight: bold;
                        font-family: 'Comic Sans MS', Tahoma;
                        background-color: #ddd;
                        width: 100%;
                        padding: 5px 0px;
                      ">
                          Figure 12. Commit #6 on branch main
                        </span>
                      </photosizer-block>
                    </div>
                  </div>
                  <t-b>
                    The &quot;git reset --soft &lt;commit id&gt;&quot; command, abreviated in the middle of
                    Figure 12., was used to remove two commits that didn&apos;t do exactly what was needed for
                    this demo.  The &quot;--soft&quot; option keeps the files, but unstages them.
                  </t-b>
                  <t-b>
                    A &quot;--hard&quot; option would have permanently deleted all changes after the reset commit.
                  </t-b>
                </li>
              </ol>
              <hr />
            </details>
          </t-b>
          <t-b>
            Git is associated with a directory tree that contains all the files from the Head commit. If any
            of those are changed, they are visible to git, but need to be staged with an add command and commited to
            update git&apos;s repository.
          </t-b>
          <t-b>
            Users can add branches and start committing to the new branch without affecting the main branch&apos;s
            code. When switching branches, git replaces code from the source branch with code from the target
            branch. That is a repeatable process.
          </t-b>
          <t-b>
            <div style="padding:0.25em 2em;">
              It is important to commit any changes before adding or merging branches. Merges can fail and can be
              successfully reverted only if everything was committed before the merge attempt.
            </div>
          </t-b>
          <t-b>
            Users can change the Head pointer to another branch with &quot;git checkout &lt;branch&gt; or move 
            backward in the commit history with the command &quot;git reset [--soft | --hard] &lt;commit id&gt;&quot;.
            That movement will cause the code within the git
            directory tree to change to match that of the commit referenced by Head. 
          </t-b>
          <t-b>
            The --soft option makes code 
            from the source commit untracked while removing all commits after the target commit. So, a subsequent
            add command and commit will create a commit with the same contents as the original source without the
            removed commits.
            The --hard option permanently deletes all code modified or created after the reset target. 
          </t-b>
          <t-b>
            There is an example of a &quot;git reset --soft 179cef6&quot; in Figure 12. within the dropdown above.
          </t-b>
          <h3 id="commands">3.0 Selected git Commands</h3>
          <t-b>
            <table style="table-layout:fixed;width:55em;">
              <tr>
                <th style="width:20em;">Command</th><th>Description</th>
              </tr>
              <tr>
                <td>
                  <details>
                    <summary class="darkItem">git init</summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F1.png" width="600" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>
                  Create a git repository rooted at the current directory. The repositor&apos;s contents
                  are stored in a hidden <c-s>.git</c-s> folder. A .gitigore file defines file types that
                  should not be tracked, using a pattern for each one on a single line.
                </td>
              </tr>
              <tr>
                <td>
                  <details>
                    <summary class="darkItem">git status</summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F2.png" width="550" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>displays any files or folders that have been created, modified, or deleted</td>
              </tr>
              <tr>
                <td>
                  <details>
                    <summary class="darkItem">git add -A</summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F3.png" width="750" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>stages all changes for commit</td>
              </tr>
              <tr>
                <td style="white-space:nowrap;">
                  <details>
                    <summary class="darkItem">git commit -m&quot;message&quot;</summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F4.png" width="450" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>
                  Captures a snapshot of all the current files in the working directory tree.
                </td>
              </tr>
              <tr>
                <td>
                  <details>
                    <summary class="darkItem">git branch &lt;name&gt;</summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F5.png" width="300" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>
                  Creates a branch site at the commit pointed to by Head.
                </td>
              </tr>
              <tr>
                <td style="white-space:nowrap;">
                  <details>
                    <summary class="darkItem">git checkout branchname</summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F6.png" width="300" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>
                  Switches to the named branch, changing all code in the working tree to match the
                  latest commit on that branch.  This process is reversible. Before checkout commit
                  to a clean working tree.
                </td>
              </tr>
              <tr>
                <td style="white-space:nowrap;">
                  <details>
                    <summary class="darkItem">git log [--graph | --oneline]</summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F7.png" width="500" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>
                  Display all commits.  The option --oneline provides a compact display with less
                  information.  Option --graph shows a compressed graph with separate branches.
                </td>
              </tr>
              <tr>
                <td>
                  <details>
                    <summary class="darkItem">git reflog</summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F8.png" width="600" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>
                  Display commits, checkouts, resets, ...
                </td>
              </tr>
              <tr>
                <td style="white-space:nowrap;">git reset [--soft | --hard] &lt;commit id&gt;</td>
                <td>
                  Moves Head backward in history to the named commit. That changes code in the directory
                  tree to that of the named commit. The --soft option makes the original Head code
                  unstaged, so that can be added and committed.  The result is removing the intervening
                  commits. The --hard option permanently deletes all additions, modifications, and
                  deletions after the target commit.
                </td>
              </tr>
              <tr>
                <td style="white-space:nowrap;">
                  <details>
                    <summary class="darkItem" style="white-space:nowrap;">
                      git diff &lt;src branch&gt; &lt;tgt branch&gt;
                    </summary>
                    <div>
                      <div style="margin-top:0em;">
                        <photosizer-block src="pictures/GitDemo2_F10.png" width="700" class="photoSizerBlock">
                        </photosizer-block>
                      </div>
                    </div>
                  </details>
                </td>
                <td>
                  Displays differences between code in those branches. Use this to set code for
                  successful merges.
                </td>
              </tr>
              <tr>
                <td style="white-space:nowrap;">git merge &lt;src branch&gt; &lt;tgt branch&gt;</td>
                <td>
                  Attempts to merge code from the two branches.  This may fail.  If you have committed
                  both branches to a clean state, then the command &quot;git reset --merge&quot; will
                  return to the pre-merge state.
                </td>
              </tr>
            </table>
          </t-b>
          <div style="height:3em;"></div>
        </div>
      </content>
      <a id="bottom"></a>
      <page-TOC id="pages" style="display:none;">
      </page-TOC>
      <page-sections id="sections" style="display:none;">
        <sec-elem style="width:0.0em">&nbsp;</sec-elem>
        <menu-elem class="secElem"><a href="#bottom">bottom</a></menu-elem>
        <menu-elem class="secElem"><a href="#epilogue">epilogue</a></menu-elem>
        <menu-elem class="secElem"><a href="#impl">impl</a></menu-elem>
        <menu-elem class="secElem"><a href="#spec">spec</a></menu-elem>
        <menu-elem class="secElem"><a href="#arch">arch</a></menu-elem>
        <menu-elem class="secElem"><a href="#concept">concept</a></menu-elem>
        <menu-elem class="secElem"><a href="#prologue">prologue</a></menu-elem>
        <menu-elem class="secElem"><a href="#top">top</a></menu-elem>
      </page-sections>
    </main>
    <frame-footer>
      <menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem id="nextLink2" onclick="bottomMenu.next()">Next</menu-elem>
      <menu-elem id="prevLink2" onclick="bottomMenu.prev()">Prev</menu-elem>
      <menu-elem id="pgbtn" onclick="bottomMenu.pages()">Pages</menu-elem>
      <menu-elem onclick="bottomMenu.sections()">Sections</menu-elem>
      <menu-elem onclick="bottomMenu.about()">About</menu-elem>
      <menu-elem id="kysbtn" onclick="storyHlpMenu.keys()">Keys</menu-elem>
      <!--<menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.decrZoomScreen()">Zout</menu-elem>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.normZoomScreen()">Zdef</menu-elem>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.incrZoomScreen()">Zin</menu-elem>-->
    </frame-footer>
  </page-frame>
</body>
</html>