<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta name="keywords" content="Rust, Introduction" />
    <meta name="Author" content="Jim Fawcett" />
    <meta name="Author" content="James Fawcett" />
    <title>RustBites Traits</title>
    <link rel="stylesheet" href="css/BiteStyles.css" />
    <script src="js/BiteScripts.js"></script>
    <style>
      /* li { font-size:1em; } */
      #github table, tr, th, td { border:1px solid darkred; border-collapse: collapse;}
    </style>
  </head>
  <body id="github" onload="initBites()">
    <div class="top-banner">
      <span id="hctr">Consuming Rust Bite by Byte</span>
      <span class="top-center">Traits</span>
      <a class="top-right" href="../../RustBiteByByte.html">RustBiteByByte.html</a>
    </div>
  </div>
  <toc-b id="toc">
    <div style="display:flex; flex-direction:row">
      <a href="Javascript:;" onclick="storyMenu.chaps()" style="color:#fefefa;">Bites</a>&nbsp;
      <a href="Javascript:;" onclick="storyMenu.sects()" style="color:#fefefa;">Sects</a>&nbsp;
      <a href="../../RustBiteByByte.html" style="color:#fefefa;">Repo</a>&nbsp;
      <a href="Javascript:;" onclick="storyMenu.toggleTOC()" style="color:#fefefa;">Esc</a>&nbsp;
      <a href="Javascript:;" onclick="storyMenu.closeTOC()" style="color:#fefefa;">Close</a>&nbsp;
    </div>
    <!-- <up-b id="chaps" onmouseout="storyMenu.chaps()"> -->
      <up-b id="chaps">
        <a href="RustBites_Facts.html">Facts</a><br />
        <a href="RustBites_Intro.html">Introduction</a><br />
        <a href="RustBites_UDB.html">UndefBehavior</a><br />
        <a href="RustBites_Data.html">Data</a><br />
        <a href="RustBites_DataStr.html">DataStructs</a><br />
        <a href="RustBites_SmrtPtrs.html">SmartPtrs</a><br />
        <a href="RustBites_LifeCycle.html">LifeCycle</a><br />
        <a href="RustBites_Ownrs.html">Ownership</a><br />
        <a href="RustBites_Traits.html">Generics&Traits</a><br />
        <a href="RustBites_Functs.html">Functions</a><br />
        <a href="RustBites_Structs.html">Structs</a><br />
        <a href="RustBites_LifeTime.html">LifeTime</a><br />
        <a href="RustBites_Abstract.html">Abstractions</a><br />
        <a href="RustBites_ErrHnd.html">ErrHandling</a><br />
        <a href="RustBites_Collects.html">Collections</a><br />
        <a href="RustBites_Iterator.html">Iterators</a><br />
        <a href="RustBites_Threads.html">Threads</a><br />
        <a href="RustBites_Synchron.html">Synchronize</a><br />
        <a href="RustBites_Channels.html">Channels</a><br />
        <a href="RustBites_AsyncAwt.html">AsyncAwait</a><br />
        <a href="RustBites_Macros.html">Macros</a><br />
        <!-- <a href="RustBites_Generics.html">Generics</a><br /> -->
        <!-- <a href="RustBites_Intmut.html">InterMutat</a><br /> -->
        <a href="Javascript.;#"></a><br />
      </up-b>
        <rt-b id="sects">
      <a href="#top">Top</a>, <a href="#prologue">Prologue</a>, <a href="#starting">Starting</a>, 
      <a href="#contents">Contents</a>, <a href="#refs">References</a>
    </rt-b>
  </toc-b>
  <div id="hlp" style="display:none;">
    <table>
      <tr>
        <td style="padding-right:5px;">Esc</td>
        <td>toggle menus</td>
      </tr>
      <tr>
        <td>C</td>
        <td>close menus</td>
      </tr>
      <tr>
        <td>R</td><td>Refresh</td>
      </tr>
      <tr>
        <td>T</td><td>scroll to top</td>
      </tr>
      <tr>
        <td>B</td><td>scroll to bottom</td>
      </tr>
      <tr>
        <td>H</td><td>Help</td>
      </tr>
    </table>
    </div>
    <bb-55>
      <h1>Rust Bite - Generics and Traits</h1>
      <hr />
      <t-b>
        Generics are abstract types used in functions and structs as placeholders for concrete
        types that will be supplied by an application.  This allows the functions and structs to 
        be used with many different concrete types, without writing a definition for each type. 
      </t-b>
      <t-b>
        Essentially, a generic function is a code generator for concrete functions and a
        generic struct is a code generator too, for a constrained set of concrete types.
        Constraints are supplied with traits.  In the illustration below, the Debug trait is 
        used to limit concrete tyypes to those that can be formatted with the display specifier, 
        &quot;<c-s>{:?}</c-s>&quot;.
      </t-b>
      <t-b>
        <defn-outerBlock>
          <defn-block>
            <defn-head>Generic Function and Struct</defn-head>
            <defn-code>
/////////////////////////////////////////////////////
// generics_and_traits::main.rs - funct & struct   //
/////////////////////////////////////////////////////

use std::any::type_name;
use std::fmt::*;

/*-----------------------------------------
  Generic function gt
  - underscore in name, _t, indicates it 
    will not be used in the function
  - the :Debug, below, is a trait constraint
    required by gf
  - if not satisfied, compilation fails
*/
fn gf&lt;T: Debug&gt;(_t:T) {
    let tn = type_name::&lt;T&gt;();
    print!("\n  t is type {:?}", tn);
}
/*-----------------------------------------
  Generic struct
  - #[derive(Debug)] requests compiler to
    implement the Debug trait for Point
*/
#[derive(Debug)]
struct Point&lt;T&gt; { x:T, y:T, z:T, }

            </defn-code>
          </defn-block>
          <defn-block>
            <defn-head>Using Code:</defn-head>
            <defn-code>
/*-----------------------------------------
  First demnstration of generics and traits
*/
fn main() {

    gf(3.14159);
    let pt = Point { x:0, y:1, z:2 };
    gf(pt);

    println!("\n\n  That's all Folks!\n\n");
}
            </defn-code>
            <defn-head class="defnBorderTop">Output:</defn-head>
            <defn-code>
cargo run -q

t is type "f64"
t is type "generics_and_traits::Point&lt;i32&gt;"

That's all Folks!
            </defn-code>
          </defn-block>
        </defn-outerBlock>
      </t-b>
      <t-b>
        <ol class="tight">
          <li>
            <h2>Traits:</h2>
            <t-b>
              A trait specifies one or more method or associated function signatures that a type with that trait is obligated 
              to implement. Marker traits, like copy, are an exception, declaring no 
              signature.  But they affect code generated by the compiler.

              <div class="indent pad10">
                <defn-outerBlock>
                  <defn-block>
                    <defn-head>Trait Expression</defn-head>
                    <defn-code>
pub trait Clone {
  fn clone(&self) -> Self;
  fn clone_from(&mut self, source: &Self) { ... }
}
                    </defn-code>
                    <defn-body>
                      <a href="https://doc.rust-lang.org/std/clone/trait.Clone.html">std::clone::Clone</a> 
                      from Rust crone crate documentation.
                          </defn-body>
                  </defn-block>
                  <defn-block style="max-width: 40%;">
                    <defn-head>Comments</defn-head>
                    <defn-body style="font-size:0.8em;">
                      <ol class="tight">
                        <li>
                          Traits may define methods they declare, but usually don&apos;t.
                        </li>
                        <li>
                          The &self argument is used for any method bound to a struct.
                        </li>
                        <li>
                          The return type Self requires the clone method to return an instance
                          of the type, e.g., struct.
                        </li>
                      </ol>
                    </defn-body>
                  </defn-block>
                  </defn-outerBlock>
              </div>
            </t-b>
            <t-b>
              Traits are used to constrain generic parameter types and to support 
              dynamic dispatching in polymorphic designs.  We will defer discussions of
              dynamic dispatch to the <a href="RustBites_Abstract.html">Abstraction</a> Bite.
            </t-b>
            <t-b>
              <table>
                <tr>
                  <th class="darkItem">Trait</th>
                  <th class="darkItem">
                    Description&nbsp;&nbsp;&nbsp;&nbsp;
                    <a class="darkItem" style="border:none; font-size:0.8em; vertical-align: baseline; font-weight: 200;"
                      href="https://stevedonovan.github.io/rustifications/2018/09/08/common-rust-traits.html">
                      The Common Rust Traits - Steve Donovan
                    </a>
                  </th>
                </tr>
                <tr>
                  <td class="lightItem">Copy</td>
                  <td class="lightItem">
                    Copy is a marker trait, so it has no methods for application code to call.
                    It&apos;s used by compiler to decide how to handle bindings and assignments.
                    If the data is Copy its value is copied from source to destination.
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">Clone</td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">Debug</td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    Display
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    Default
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    ToString
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    From and Into
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    FromStr
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    AsRef
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    Deref
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    Borrow
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    Read and Write
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
                <tr>
                  <td class="lightItem">
                    Iterator&nbsp;and&nbsp;IntoIterator
                  </td>
                  <td class="lightItem">
                    
                  </td>
                </tr>
              </table>
            </t-b>
            <t-b>
              <a href="https://stevedonovan.github.io/rustifications/2018/09/08/common-rust-traits.html">The Common Rust Traits</a>
            </t-b>
          </li>
        </ol>
      </t-b>


      <a href="https://joshleeb.com/blog/rust-traits-trait-objects/">trait objects</a>
    </bb-55>
  </body>
</html>
