<!DOCTYPE html>
<html>
<!-- 
  Js_Data.html
  
  JavaScript Data Types are:
    String, Number, Bigint, Boolean, Object,
    Undefined, Null, Symbol

  JavaScript is dynamically typed, e.g.,
  Variables do not have fixed types, they take the types 
  of their referends.  
-->
<head>
  <script>
    function print(s) {
      document.write(s);
    }
    function println(s) {
      document.write(s + "<br />");
    }
    function isSameObject(t1, n1, t2, n2) {
//      if (t1 == t2) {
      if (Object.is(t1, t2)) {
        println(n1 + " is same object as " + n2);
      }
      else {
        println(n1 + " is not same object as " + n2);
      }
    }
    function showValue(t, name) {
      println(name + ", " + t);
    }
    function showType(t, name) {
      println(name + " - type: " + typeof t + ", value: " + t);
    }
    function showOp(op) {
      println("  ---  " + op + "  ---");
    }
    function showLabel(l) {
      println("---------------");
      println(l);
      println("---------------");
    }
    function showNote(n) {
      print("==> ");
      println("Note: " + n);
    }
    function makeObject(name, id) { 
      let obj = new Object;
      obj.name = name;
      obj.id = id;
      //obj.show = function () {
      //  println("{ " + name + ", " + id + " }");
      //}
      return obj;
    }
    function shallowCopy(obj) {
      return Object.assign({}, obj);
    }
    function cloneObject(obj) {
      let os = JSON.stringify(obj);
      let cl = JSON.parse(os);
      return cl;
    }
    function showObject(obj, name) {
      println(name + " { " + obj.name + ", " + obj.id + " }");
    }
    function data() {
      document.getElementById("data").innerHTML = "<h2>Hello Javascript Data</h2>";
      showLabel("Demos of Scalar types");
      showOp("let t1 = 42");
      let t1 = 42;
      showValue(t1, "t1");
      showType(t1, "t1");
      showOp("let t2 = t1");
      let t2 = t1;
      showValue(t2, "t2");
      isSameObject(t2, "t2", t1, "t1");
      showOp("t2 = 84");
      t2 = 84;
      showValue(t1, "t1");
      showValue(t2, "t2");
      isSameObject(t2, "t2", t1, "t1");
      showNote("copy value on assignment");
      println("");
      showLabel("Object Demos")
      showOp("let o1 = makeObject('o1', 1)");
      let o1 = makeObject('o1', 1);
      showType(o1, "o1");
      showObject(o1, "o1");
      showOp("let o2 = o1");
      let o2 = o1;
      showObject(o2, "o2");
      isSameObject(o2, "o2", o1, "o1");
      showOp("o2.name = o2");
      o2.name = "o2";
      showOp("o2.id = 2");
      o2.id = 2;
      showObject(o2, "o2");
      isSameObject(o2, "o2", o1, "o1");
      showObject(o1, "o1");
      showObject(o2, "o2");
      showNote("src obj changed: copy reference on assignment");
      showOp("let o3 = cloneObject(o2)");
      let o3 = cloneObject(o2);
      isSameObject(o3, "o3", o2, "o2");
      showObject(o2, "o2");
      showObject(o3, "o3");
      showOp("let o3.id = 42");
      o3.id = 42;
      showObject(o2, "o2");
      showObject(o3, "o3");
      showNote("Cloned objects are independent");
      println("");
      showOp("let s1 = String('a string')");
      let s1 = String('a string');
      showType(s1, "s1");
      showOp("let s2 = s1");
      let s2 = s1;
      isSameObject(s2, "s2", s1, "s1");
      showOp("s2 += ' and more'");
      s2 += " and more";
      showValue(s1, "s1");
      showValue(s2, "s2");
      isSameObject(s2, "s2", s1, "s1");
    }
  </script>
  <style>
    body {
      font-family:Tahoma, sans-serif;
      padding:2em;
    } 
  </style>
</head>
<body>
  <div id="data"></div>
  <script>
    data();
  </script>
</body>
</html>
