<!DOCTYPE html>
<html>
<!--
  Bits_GenericPython.html
-->
<head>
  <title>Bits_Generic Python</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/StylesPhoto.css" />
  <link rel="stylesheet" href="css/StylesSizerComp.css" />
  <!-- PageFrame infrastructure -->
  <link rel="stylesheet" href="css/StylesPageFrameDefaults.css" />
  <link rel="stylesheet" href="css/StylesPageFrameStructure.css" />
  <link rel="stylesheet" href="css/StylesPageFrameMenus.css" />
  <link rel="stylesheet" href="css/StylesPageFrameThemePython.css" />
  <link rel="stylesheet" href="css/StylesWebComponents.css" />
  <script src="js/ScriptsWebComponents.js"></script>
  <script src="js/ScriptsPageFrame.js"></script>
  <script src="js/ScriptsPageFramePagesBits.js"></script>
  <script src="js/ScriptsPageFrameKeyboard.js"></script>
  <link rel="stylesheet" href="css/Styles_BitsContent.css" />
  <script src="js/Scripts_BitsContent.js"></script>
  <link rel="stylesheet" href="css/StylesSplitterBar.css" />
  <script src="js/ScriptsSplitterBar.js"></script>
  <link rel="stylesheet" href="css/prism.css" />
  <script src="js/prism.js"></script>
  <style>
    #github .note {
      border: 1px solid var(--dark);
      padding: 0.75em 1.5em;
      margin-top: 1.25em;
      margin-bottom: 1.25em;
      background-color: var(--light);
      color: var(--dark);
      max-width: 50em;
    }

    #github h2 {
      margin-top: 0.75em;
    }

    #github #pagetitle {
      border: 2px double var(--dark);
    }

    #github form {
      border: none;
      padding: 0.5em 1em;
    }

      #github form span {
        padding: 0em 0.5em;
      }

    #github code-container {
      display: flex;
      position: relative;
      width: calc(100%);
      flex-direction: row;
      justify-content: space-between;
      /*border-top: 1px solid var(--dark);*/
    }

    #github code-banner {
      display: block;
      border: 2px solid var(--dark);
      border-top: none;
      border-bottom: none;
      padding: 0.25em 1em;
      font-family: 'Comic Sans MS', Tahoma;
      width: calc(100% + 0.5em);
      background-color: var(--atten);
    }

    #github code-display {
      display: block;
      border: 2px solid var(--dark);
      white-space: pre;
      padding: 0.75em 1em;
      font-family: Consolas, monospace;
      font-size: 0.9em;
      width: calc(50% - 0.5em);
      overflow-x: auto;
      /*height:20em;*/
    }

    #github label {
      margin-right: 1em;
    }

    #github fieldset {
      border: none;
    }

    #github #exeRight, #exeLeft {
      padding: 0.05em 0.5em;
      font-family: 'Comic Sans MS', Tahoma;
    }

    #github #hideLeft, #hideRight {
      padding: 0.05em 0.5em;
      font-family: 'Comic Sans MS', Tahoma;
    }

    #github .hide {
      display: none;
    }

    body {
      position: relative;
    }

    #github table.showcode {
      table-layout: fixed;
      width: calc(100% + 4em);
      margin-left: -2em;
    }

    #github th.leftblock {
      border: 2px solid var(--dark);
      /*border: 1px solid red;*/
      background-color: var(--menu);
      width: calc(50% - 0.5em);
      overflow-x: auto;
    }

    #github th.rightblock {
      border: 2px solid var(--dark);
      background-color: var(--menu);
      width: calc(50% - 0.5em);
      overflow-x: auto;
    }

    #github th.centerblock {
      border: none;
      padding: 0em;
      width: 1em;
    }

    #github td.leftblock {
      border: 2px solid var(--dark);
      width: calc(50% - 0.5em);
      overflow-x: auto;
      background-color: #222233;
      color: #ffffbb;
    }

      #github td.leftblock summary {
        border: 1px solid #ffffbb;
      }

    #github td.rightblock {
      border: 2px solid var(--dark);
      width: calc(50% - 0.5em) !important;
      overflow-x: auto;
      background-color: #222233;
      color: #ffffbb;
    }

      #github td.rightblock summary {
        border: 1px solid #ffffbb;
      }

    #github td.centerblock {
      border: none;
      padding: 0em;
    }

    #github pre {
      overflow-x: auto !important;
    }

    #github #left1 {
      /*height:45em;*/
      max-height: calc(100vh - 10em);
      overflow-y: auto;
    }

    #github #right1 {
      max-height: calc(100vh - 10em);
      overflow-y: auto;
    }

    #github #left2 {
      /*height:45em;*/
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }

    #github #right2 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }

    #github #left3 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }

    #github #right3 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }

    #github .mover {
      width: 2em;
      padding: 0.05em;
      position: relative;
      right: -1.5em;
      top: 0.6em;
    }

    #github #ruler {
      width: calc(50% - 1.5em);
      height: 0.001em;
      margin: -0.45em 0em;
    }

    #github .btns {
      width: 3em;
      border: none;
    }

    #github .codeSnap {
      font-family: Consolas, Courier New, Courier, monospace, sans-serif;
      font-size: small;
      font-weight: bold;
      background-color: #eee;
      padding: 10px;
    }

    #github .remotebutton {
      padding: 0.25em 0.5em;
    }

    #github .rightPanelLinks {
      position: fixed;
      right: 0.0em;
      top: 15em;
      z-index: 100;
      background: var(--light);
      padding: 0.75em 0.25em;
      border: 1px solid var(--dark);
    }

    #github div.rightPanelLinks a {
      display: block;
      height: 1.5em;
      padding: 0em 0.25em;
    }

    #github hr.spread {
      margin: 0.75em 0em;
    }
  </style>
  <script>
    function setScroll() {
        let main = document.querySelector("#main");
        const scrollPosition = main.scrollTop;
        localStorage.setItem('scrollPositionHelloRust', scrollPosition);
        let body = document.getElementById("github");
        let style = window.getComputedStyle(body, null).getPropertyValue('line-height');
        let fontsize = parseFloat(style);
        let scroller = document.getElementById("scrollY")
        scroller.innerHTML = Math.trunc(scrollPosition / fontsize);
    }
    function gotoLastScroll() {
        let main = document.querySelector("#main");
        const scrollPosition = localStorage.getItem('scrollPositionHelloRust');
        if (scrollPosition) {
            main.scrollTo(0, scrollPosition);
        }
        main.addEventListener('scroll', setScroll);
    }
    function load() {
        //initialize();
        gotoLastScroll();
    }
  </script>

  <script>
    function remote() {
        window.open('https://godbolt.org/z/Ms7enbqKb', '_blank');
    }
  </script>
</head>
<body id="github" onload="load()">

  <a id="Next" href="Bits_IterPython.html">Next</a>
  <a id="Prev" href="Bits_ObjectsPython.html">Prev</a>

  <page-frame>
    <!-- <frame-header>
      <nav id="navbar"></nav>
    </frame-header> -->
    <main id="main">
      <div id="about">about</div>
      <div id="page">Bits: Generic Python</div>
      <div id="modified">07/25/2024</div>
      <div id="hlp"></div>
      <a id="top"></a>
      <content>
        <div id="scrollY"
             style="position:fixed; bottom:0.50em; right:1.50em; width:max-content; height:1.5em;
           text-align:right; padding:0.15em 0.5em; border:1px solid red;">
          0
        </div>
        <header>
          <a target="_blank" class="repoLink" href="https://github.com/JimFawcett/Bits">Bits Repo Code</a>
          <a target="_blank" class="repoLink" href="../../BitsRepo.html" style="margin-right:7.5em;">Bits Repo Docs</a>
          <hgroup id="pagetitle">
            <h1 id="title">Bits: Python Generics</h1>
            <h3 id="subtitle" class="indent">
              Python does not support generics, it does support type hints that are checked with mypy.py
            </h3>
          </hgroup>
        </header>
        <!-- <t-b style="border:2px solid red; padding:0.5em 1.5em;">
    This page is a prototype used to decide which language features to emphasize. It will
    be replaced with a final version soon.
  </t-b> -->
        <t-b id="synopsis" style="border:1px solid maroon; padding:0.25em 1em 0.5em 1em;">
          <h4 style="margin:0em 0em 0.25em 0em;">Synopsis:</h4>
          This page demonstrates uses of Python Generic type syntax using typing import.
          The purpose is to quickly acquire some familiarity with syntax and behavior of generic typing.
          <hr class="spread" />
          <ul>
            <li>
              Python defines a typing module providing support for type hints.
            </li>
            <li>
              The translator ignores typing. You need to use a static analysis tool like mypy.py
              to detect type errors.
            </li>
          </ul>
          <div style="height:0.5em;"></div>
        </t-b>
        <details id="notes">
          <summary class="darkItem">Demo Notes&nbsp;&nbsp;</summary>
          <t-b><hr /></t-b>
          <t-b>
            All of the languages covered in this demonstration support generics with the exception
            of JavaScript.
          </t-b>
          <t-b>
            Three of the languages: C++, Rust, and C# provide generics.  Python provides a typing module
            that provides type hints, checked with a static analysis tool.
          </t-b>
          <t-b>
            Each generic function or class
            is a pattern for defining functions and classes of a specific type.  Thus a generic class is a
            pattern for making patterns.
          </t-b>
          <t-b>
            Python and JavaScript, are dynamically typed and already support defining
            functions and classes for multiple types, e.g., no need for generics.
          </t-b>
          <t-b>
            This demonstration illustrates use of generic functions and classes, which for C++, Rust, and C#,
            are processed by the compiler.
          </t-b>
          <t-b><hr /></t-b>
        </details>
        <t-b>
          The examples below show how to use library and user defined types with emphasis on
          illustrating syntax and basic operations.
        </t-b>
        <h3 id="generics">1.0 Python Generics and Abstract Base Classes</h3>
        <t-b>
          Python provides type hints to decorate definitions of functions and classes.
          <div class="inset">
            <c-s>
              from typing import TypeVar, Generic<br />
              T = TypeVar('T')<br />
              <br />
              def function(arg: T) -&gt; T:<br />
              &nbsp;&nbsp;&nbsp;&nbsp;return arg
            </c-s>
          </div>
          Type hints
          are ignored by the Python translator, but a seperate tool, mypy.py, can be used to
          perform static type checks when hints are used.
          <div class="inset">
            <c-s>
              &gt; python3 -m pip install mypy<br />
              &gt; mypy program.py
            </c-s>
          </div>
        </t-b>
        <t-b>
          Python classes may also be decorated with type hints:
          <div class="inset">
            <c-s>
              from typing import TypeVar, Generic<br />
              T = TypeVar(&apos;T&apos;, bound=int | float)<br />
              <br />
              class Hello(Generic[T]):<br />
              &nbsp;&nbsp;&nbsp;&nbsp;# code to define class operations
            </c-s>
          </div>
          Not only can type hints be statically checked with mypy.py, they also provide maintainers
          clear messages about intended uses of the annotated code.
        </t-b>
        <t-b>
          Python does not support interfaces, but it does provide standard Abstract Base Classes (ABC).
          <div class="inset">
            <c-s>from collections.abc import Iterable, Sequence</c-s>
            <table>
              <tr>
                <td>Container</td>
                <td>
                  Generic base for containers that supports the <c-s>in</c-s> operator to test for membership.
                  Container is a base for Iterable, Sequence, and Mapping.
                </td>
              </tr>
              <tr>
                <td>Iterable</td>
                <td>
                  Base for objects that support iteration, e.g., provide <c-s>__iter()__</c-s> method which
                  returns an iterator. The iterator must support the <c-s>__next()__</c-s> method.
                </td>
              </tr>
              <tr>
                <td>Sequence</td>
                <td>Objects that support indexing and slicing</td>
              </tr>
              <tr>
                <td>Mapping</td>
                <td>Base for dictionaries that supports key-based lookup and iteration.</td>
              </tr>
            </table>
          </div>
          Code authors can also define their own
          <a target="_blank" href="https://docs.python.org/3/library/abc.html">abstract base classes</a>.
        </t-b>
        <div style="height:0.05em;"></div>
        <h3 id="source">2.0 Source Code</h3>
        <t-b>
          Examples below show how to use library and user defined types with emphasis on
          illustrating syntax and basic operations.
        </t-b>
        <t-b>
          These demonstrations of Python code with generic type hints are partitioned into modules
          Py_Generic.py, AnalysisGen.py, PointsGen.py.
          Discussion of each of these will be
          presented in separate sections of the page, below, accessed from links in the left panel.
        </t-b>
        <t-b>
          This provides demonstrations for:
          <ul class="tight">
            <li>standard Python library collections</li>
            <li>user defined types <c-s>Hello[T]</c-s> and <c-s>Points[T]</c-s></li>
            <li>generic functions</li>
          </ul>
          using one demonstration function for each of these, invoked in <c-s>execute()</c-s>
          function at the end of the program.
        </t-b>
        <h3 id="stdgen">2.1 Demonstrate Standard Library Generics</h3>
        <t-b>
          Here you will see demonstrations of <c-s>List</c-s>,
          <c-s>tuple</c-s>, and <c-s>dict</c-s>
          standard library collections.
          This is the first code in which you see Python type hints. These are ignored by the
          Python translator but enable static type checking with the tool mypy.py.
        </t-b>
        <t-b style="padding:0.25em 0.5em; border:2px solid var(--dark)">
          Alter splitter-bar panel widths by dragging splitter bar or clicking in either panel
          to expand that panel&apos;s width. Default widths are set by setting width style on
          left panel.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="stdgen-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('stdgen-first')">
                <pre style="width:200em;"><code class="language-cpp">#-- demonstrate std collection types with generic hints

def demo_std_generics():
  Anal.showNote(&quot;  demo std generics&quot;)
  print()

  Anal.showOp(&quot;list[int]&quot;)
  l1: list[int] = [1, 2, 3, 2, 1]
  print(type(l1))
  print(l1)
  print()

  Anal.showOp(&quot;list[str]&quot;)
  l2: list[str] = [&quot;you&quot;, &quot;me&quot;, &quot;them&quot;, &quot;us&quot;]
  print(type(l2))
  print(l2)
  print()

  Anal.showOp(&quot;tuple(int, float, str)&quot;)
  t: tuple[int, float, str] = (42, -0.5, &quot;forty two&quot;)
  print(type(t))
  print(t)
  print()

  Anal.showOp(&quot;dict[str, int]&quot;)
  d: dict[str, int] = {
      &quot;zero&quot;:0, &quot;one&quot;:1, &quot;two&quot;:2, &quot;three&quot;:3
  }
  print(type(d))
  print(d)
  print()
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="stdgen-seperator"></splitter-bar>
            <second-item id="stdgen-second" style="width:40em;">
              <div class="codewrap" onclick="obubbleup('stdgen-first')">
                <pre style="width:200em;"><code class="language-shell">
                  
--------------------------------------------------
  demo std generics
--------------------------------------------------

--- list[int] ---
&lt;class 'list'&gt;
[1, 2, 3, 2, 1]


--- list[str] ---
&lt;class 'list'&gt;
['you', 'me', 'them', 'us']




--- tuple(int, float, str) ---
&lt;class 'tuple'&gt;
(42, -0.5, 'forty two')



--- dict[str, int] ---
&lt;class 'dict'&gt;
{'zero': 0, 'one': 1, 'two': 2, 'three': 3}

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:1em;"></div>
        <h3 id="hello">2.2 Hello</h3>
        <t-b>
          <c-s>Hello[t]</c-s> is a simple Python class designed to illustrate type hinting,
          default function argument values, and properties.
        </t-b>
        <h3 id="hellodef">2.2.1 Hello Definition</h3>
        <t-b>
          Things to note:
          <ul style="tight">
            <li>
              Python translator does not support generics.
              It doesn&apos;t need them because all varables are dynamically typed, e.g.,
              assume the type of the data they hold.
            </li>
            <li>
              So you can pass any type as an argument
              of a given function. That will fail at runtime if an expression using the argument
              cannot be evaluated.
            </li>
            <li>
              It ignores type hints, but those can be used by tool mypy.py to perform static
              type analyses.
            </li>
            <li>
              Python supports default argument values, as shown below.
            </li>
            <li>
              The language provides properties that encapsulate class data while supporting
              public member syntax.
            </li>
            <li>
              Python does not provide access controls.  Data is private, by convention, if its name
              begins with an underscore character, e.g.,
              <div class="inset">
                <c-s>_myprivatedata = 1.5;</c-s>
              </div>
              Otherwise
              it is assumed to be public. This convention is tranparent to the Python translator.
              It won&apos;t emit a warning or error if code changes <c-s>_myprivatedata</c-s>.
            </li>
          </ul>
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="hellodef-first" style="width:60%;">
              <div class="codewrap" onclick="cbubbleup('hellodef-first')">
                <pre style="width:200em;"><code class="language-python">#-- user defined Hello type --#

from typing import TypeVar, Generic
T = TypeVar('T', bound=int | float)

class Hello(Generic[T]):

  # supports constructor notation
  def __init__(self, t: T = 0) -&gt; None:
      self._datum:T = t

  # property supports public member syntax while
  # keeping _datum encapsulated, e.g., not in
  # public interface

  @property
  def value(self):
     return self._datum

  @value.setter
  def value(self, t:T):
      self._datum = t

  @value.getter
  def value(self):
      return self._datum

  # show named value of Point[T] instance.
  # Uses default value for left.

  def show(self, name, left = 0) :
      print(AnalysisGen.indent(left), sep='', end='')
      print(name, &quot;: &quot;, &quot;Hello { &quot;, self._datum, &quot; }&quot;, sep='')
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="hellodef-seperator"></splitter-bar>
            <second-item id="hellodef-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('hellodef-first')">
              <div class="textwrap noflow" style="font-size:1.0em;">
                <h3><c-s>Hello[T]:</c-s></h3>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> Type Hints
                <div style="height:2em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> "generic" class using type hint
                <div style="height:4em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> "private" <c-s>_datum</c-s>
                <div style="height:7em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> property definition
                <t-b class="indents">
                </t-b>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:0.75em;"></div>
        <h3 id="hellodem">2.2.2 Hello Demonstration</h3>
        <t-b>
          <c-s>Hello[T]</c-s> is a simple type, just meant to illustrate how user types are defined.
          It isn&apos;t likely to be useful for other applications.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="hellodemo-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('hellodemo-first')">
                <pre style="width:200em;"><code class="language-cpp">#-- demonstrate user-defined generic types --#

def demo_user_defined_generics():
  Anal.showNote(&quot;  demo user-defined generics&quot;)
  print()

  Anal.showOp(&quot;Hello(42)&quot;)
  h1: Hello[int] = Hello(42)
  print(&quot; &quot;, type(h1))
  h1.show(&quot;h1&quot;, 2)
  print()

  Anal.showOp(&quot;Hello() uses default argument&quot;)
  h2: Hello[float] = Hello()
  h2.show(&quot;h2&quot;, 2)
  print()
  Anal.showOp(&quot;h2.value = 3.1415927&quot;)
  h2.value = 3.1415927
  h2.show(&quot;h2&quot;, 2)
  print()

  /* points code elided */

}
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="hellodemo-seperator"></splitter-bar>
            <second-item id="hellodemo-second" style="width:40em;">
              <div class="codewrap" onclick="obubbleup('hellodemo-first')">
                <pre style="width:200em;"><code class="language-shell">
                  
--------------------------------------------------
  demo user-defined generics
--------------------------------------------------

--- Hello(42) ---
  &lt;class '__main__.Hello'&gt;
  h1: Hello { 42 }



--- Hello() uses default argument ---
  h2: Hello { 0 }


--- h2.value = 3.1415927 ---
  h2: Hello { 3.1415927 }

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:1em;"></div>
        <h3 id="point">2.3 Point Class</h3>
        <t-b>
          The <c-s>Point[T]</c-s> class represents points with spatial coordinates and a time that
          represents when something was at that position.
          Collections of points might represent the trajectory of an aircraft or the state of some
          evolving chemical process.
        </t-b>
        <h3 id="pointdef">2.3.1 Point Definition</h3>
        <t-b>
          <c-s>Point[T]</c-s> defines a point in space-time with N spatial coordinates. N is defined
          by an integer passed to its constructor:
          <div class="inset" style="background-color:var(--light);">
            <c-s>p : Point[float] = Point[float](3)</c-s>
          </div>
          The time coordinate is set to system time when p is constructed. That value is accessed from
          its dt property:
          <div class="inset" style="background-color:var(--light);">
            <c-s>timeStr : string = p.dt</c-s>
          </div>
          The time can be updated to match current system time with:
          <div class="inset" style="background-color:var(--light);">
            <c-s>p.now()</c-s>
          </div>
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="pointdef-first" style="width:60%;">
              <div class="codewrap" onclick="cbubbleup('pointdef-first')">
                <pre style="width:200em;"><code class="language-python">#----------------------------------------------------------
#   Py_Generic::PointsGen.py
#   Point[T]
#     Point in N dimensional hyperspace with type T
#     coordinates.
#----------------------------------------------------------

import datetime
import time
import AnalysisGen
from typing import TypeVar, Generic

# Generic point class with N coordinates
#   Python doesn't need generics to support types
#   defined at translation time, but they were
#   introduced to enable translation time type
#   error detection.

T = TypeVar('T', bound=int | float)

class Point(Generic[T]):

    # supports constructor notation
    def __init__(self, n: int) -&gt; None:         # p = Point&lt;double&gt;(8)
        self.coors:list[T] = []
        for i in range(n):
            self.coors.append(0)
        self._dt: datetime = datetime.datetime.now()

    def append(self, t: T):
        self.coors.append(t)

    def len(self) -&gt; int:
        return len(self.coors)

    def __len__(self) -&gt; int:                   # len(p)
        return len(self.coors)

    def __getitem__(self, key: int) -&gt; T:       # value = p[1]
        return self.coors[key]

    def __setitem__(self, key: int, val: T):    # p[1] = value
        self.coors[key] = val

    @property
    def dt(self):
        return self._dt

    @dt.getter
    def dt(self):
        return self._dt

    def now(self):
        _dt = datetime.datetime.now()

    # show named value of Point[T] instance
    def show(self, name, left = 2, width = 7) :
        print(AnalysisGen.indent(left), name, ' ', sep='')
        print(AnalysisGen.indent(left), &quot;{&quot;, sep='')
        print(AnalysisGen.fold(self.coors, left+3, width), sep='')
        print(AnalysisGen.indent(left + 2), self.dt)
        print(AnalysisGen.indent(left), &quot;}&quot;, sep = '')
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="pointdef-seperator"></splitter-bar>
            <second-item id="pointdef-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('pointdef-first')">
              <div class="textwrap noflow" style="font-size:1.0em;">
                <h3><c-s>Point[T]:</c-s></h3>
                Point with n spatial dimensions and<br />datetime point
                <div style="height:5em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> imports
                <div style="height:15em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> class definition
                <div style="height:3em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> constructor
                <div style="height:19em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> indexers
                <div style="height:6em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> time property
                <div style="height:15em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> display method
                <t-b class="indents">
                </t-b>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:0.75em;"></div>
        <h3 id="pointdemo">2.3.2 Point Demonstration</h3>
        <t-b>

        </t-b>
        <t-b>
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="pointdemo-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('pointdemo-first')">
                <pre style="width:200em;"><code class="language-cpp">#-- demonstrate user-defined generic types --#

def demo_user_defined_generics():
  Anal.showNote(&quot;  demo user-defined generics&quot;)
  print()

  /* Hello code elided */

  Anal.showOp(&quot;p1 = Points.Point[float](5)&quot;)
  p1: Points.Point = Points.Point[float](5)
  p1[1] = 1.5
  p1[3] = -2.0
  index = p1.len() - 1
  p1[index] = 42
  print(&quot; &quot;, type(p1))
  p1.show(&quot;p1&quot;, 2)
  print()
}
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="pointdemo-seperator"></splitter-bar>
            <second-item id="pointdemo-second" style="width:40em;">
              <div class="codewrap" onclick="obubbleup('pointdemo-first')">
                <pre style="width:200em;"><code class="language-shell">
                  
--------------------------------------------------
  demo user-defined generics
--------------------------------------------------



--- p1 = Points.Point[float](5) ---
  &lt;class 'PointsGen.Point'&gt;
  p1
  {
     0, 1.5, 0, -2.0, 42
     2024-07-24 21:46:01.293971
  }

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:1em;"></div>
        <h3 id="genfuncs">2.4 Generic Functions</h3>
        <t-b>
          You have already seen definitions of generic methods for the <c-s>Hello[T]</c-s> and <c-s>Point[T]</c-s>
          classes. This section illustrates how type hints are used for free standing functions.
        </t-b>
        <h3 id="genfuncsdef">2.4.1 Generic Function Definitions</h3>
        <t-b>
          Here, we look at five generic functions that have been used in most of the demonstrations, above:
          <div class="inset">
            <c-s>
              showType(t:T, nm:str, indnt = 2, suffix = "")<br />
              fold(enum: Sequence, left:int, width:int) -&gt; str<br />
              showTypeEnum(enum: Sequence, nm: str, left=2, width=7, suffix="")<br />
              showTypeShowable(t:T, nm: str, suffix="")<br />
              showIdent(t:T, name:str, suffix="")
            </c-s>
          </div>
          and four non-generic functions, which use type hints:
          <div class="inset">
            <c-s>
              indent(n:int) -&gt; str<br />
              showNote(text:str, suffix="", n:int=50)<br />
              showOp(text: str)
            </c-s>
          </div>
        </t-b>
        <t-b>
          One notable omission in this section: there is no discussion of Python lambdas:
          <div class="inset">
            <c-s>
              lambda a, b, c, ... : single expression
            </c-s>
          </div>
          The single expression limitation makes Python lambdas significantly less useful than lambdas
          in other languages like C++, Rust, and C#,
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="genfuncsdef-first" style="width:60%;">
              <div class="codewrap" onclick="cbubbleup('genfuncsdef-first')">
                <pre style="width:200em;"><code class="language-python">#----------------------------------------------------------
#   Py_Generic::AnalysisGen.py
#   - Collection of display and analysis functions
#----------------------------------------------------------

import sys
import collections
from collections.abc import Sequence
from typing import TypeVar

T = TypeVar('T')
# Coll = Union[Iterable, Sized] = 'Coll'

# Python requires definition before use ordering
#  - no link phase to find definitions
import copy
nl = &quot;&#92;n&quot;

# show name, type, value, and size of a Python instance
def showType(t:T, nm:str, indnt:int = 2, suffix:str = &quot;&quot;) :
    print(indent(indnt), nm, ' ', type(t), &quot; dynamic&quot;, sep=&quot;&quot;)
    print(indent(indnt), &quot;value: &quot;, t, ', size: ', sys.getsizeof(t), suffix, sep=&quot;&quot;)

# generate indent string with n spaces
def indent(n:int):
    tmpStr = &quot;&quot;
    for i in range(n):
        tmpStr += ' '
    return tmpStr

# fold indexable into rows of width elements indented by
# left spaces
def fold(enum: Sequence, left:int, width:int) -&gt; str:
    tmpStr = indent(left)
    for i in range(len(enum)):
        tmpStr += str(enum[i]) + &quot;, &quot;
        if(((i + 1) % width) == 0 and i != 0):
            tmpStr += &quot;&#92;n&quot; + indent(left)
    rIndex = tmpStr.rindex(',')
    tmpStr = tmpStr[:rIndex]
    return tmpStr

# show name, type, value, and size of a Python instance
def showTypeEnum(enum:Sequence, nm:str, left:int = 2, width:int = 7, suffix:str = &quot;&quot;) :
    # topStr = indent(left) + nm + type(enum) + &quot;dynamic&quot;
    print(indent(left),nm, ' ', type(enum), ' ', &quot;dynamic&quot;, sep='')
    print(indent(left), &quot;{&quot;, sep='')
    print(fold(enum, left+2, width))
    print(indent(left), &quot;}&quot;, sep = '')
    print(indent(left), &quot;size: &quot;, sys.getsizeof(enum), suffix, sep='')

# same as showType except uses class method to show value
def showTypeShowable(t:T, nm:str, suffix:str = &quot;&quot;):
    print(type(t), &quot;dynamic&quot;)
    t.show(nm)

# show Python id, unique for each instance
def showIdent(t:T, name:str, suffix:str = &quot;&quot;) :
    print(name, '&quot;{}&quot;'.format(t), id(t), suffix)

# show emphasized note
def showNote(text:str, suffix:str = &quot;&quot;, n: int = 50) :
    tmpStr = &quot;&quot;
    for i in range(n):
      tmpStr += '-'
    print(tmpStr)
    print(text)
    print(tmpStr, suffix)

# show delineated string to announce a program operation
def showOp(text:str):
    print(&quot;--- {} ---&quot;.format(text))
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="genfuncsdef-seperator"></splitter-bar>
            <second-item id="genfuncsdef-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('genfuncsdef-first')">
              <div class="textwrap noflow">
                <h3>Generic Functions:</h3>
                <div style="height:5em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> imports
                <div style="height:18em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> showType
                <t-b style="margin-top:0.0em;">
                  displays the call name, <c-s>nm</c-s>, Python&apos;s inferred type<br />
                  and the value of the generic parameter t and its<br />
                  size in a formatted block.
                </t-b>
                <div style="height:2em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> indent
                <t-b style="margin-top:0.0em;">
                  A helper function for the fold function, which<br />
                  returns a string with n spaces, used for format-<br />
                  ting output.
                </t-b>
                <div style="height:6em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> fold
                <t-b style="margin-top:0.0em;">
                  A helper function which folds an enumerable<br />
                  sequence of values into rows
                </t-b>
                <div style="height:11em;"></div>
                <span style="font-size:1.5em; font-weight:bold;">&lArr;</span> showTypeEnum
                <t-b style="margin-top:0.0em;">
                  Similar to showType functionality except that<br />
                  its argument is an enumberable sequence instead<br />
                  of a scalar. Values are displayed in rows.
                </t-b>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <div style="height:0.75em;"></div>
        <h3 id="genfuncsdemo">2.4.2 Generic Function Demonstration</h3>
        <t-b>
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="genfuncsdemo-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('genfuncsdemo-first')">
                <pre style="width:200em;"><code class="language-python">
def demo_generic_functions():

  Anal.showNote(&quot;  demo generic functions&quot;, &quot;&#92;n&quot;)

  Anal.showOp(&quot;Anal.showType(list[int], name)&quot;)
  l1:list[int] = [1, 2, 3, 2, 1, 0, -1, -2, -1, 0]
  Anal.showType(l1, &quot;l1&quot;)
  print()

  Anal.showOp(&quot;showTypeEnum(list[int], name)&quot;)
  Anal.showTypeEnum(l1, &quot;l1&quot;, left = 2, width = 7, suffix = &quot;&quot;)
  print()
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="genfuncsdemo-seperator"></splitter-bar>
            <second-item id="genfuncsdemo-second" style="width:40em;">
              <div class="codewrap" onclick="obubbleup('genfuncsdemo-first')">
                <pre style="width:200em;"><code class="language-shell">
--------------------------------------------------
  demo generic functions
--------------------------------------------------

--- Anal.showType(list[int], name) ---
  l1 &lt;class 'list'&gt; dynamic
  value: [1, 2, 3, 2, 1, 0, -1, -2, -1, 0], size: 136


--- showTypeEnum(list[int], name) ---
  l1 &lt;class 'list'&gt; dynamic
  {
    1, 2, 3, 2, 1, 0, -1,
    -2, -1, 0
  }
  size: 136

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        
        <div style="height:0.75em;"></div>
        <h3 id="mypy">2.4.3 Static Analysis</h3>
        <t-b>
          In the block below find the output of checking the AnalysisGen.py module with mypy.
          It found 1 error in the <c-s>showTypeShowable(t:T, name:str, suffix:str="")</c-s>
          function.
        </t-b>
        <t-b>
          That&apos;s because the function body evaluates the expression <c-s>t.show(nm)</c-s>.
          But the generic type T is not bound to supply the <c-s>show</c-s> method.
        </t-b>
        <div style="width:max-content; padding:0.25em 0.25em; border:2px solid var(--dark);">
          <pre style="width:max-content; margin:0em;"><code class="language-shell">C:\github\JimFawcett\Bits\Python\Py_Generic
> mypy AnalysisGen.py 
AnalysisGen.py:55: error: "T" has no attribute "show"  [attr-defined]  
Found 1 error in 1 file (checked 1 source file)
C:\github\JimFawcett\Bits\Python\Py_Generic
</code></pre>
        </div>
        <t-b>
          To fix that error we would need to define an Abstract Base Class <c-s>Showable</c-s> that declares a
          <c-s>show(nm:str)</c-s> method and replace <c-s>T</c-s> with <c-s>Showable</c-s>. 
            That is left as a non-trivial
            <a target="_blank" href="https://docs.python.org/3/library/abc.html">exercise</a>
            for the reader.
        </t-b>


        <div style="height:1em;"></div>
        <h3 id="structure">2.5 Program Structure</h3>
        <t-b>
          Illustrates program structure and control flow by eliding all of the demonstration
          code details.
        </t-b>
        <div class="blockSingle" style="padding:0em;">
          <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote1()" />
          <splitter-container id="container">
            <first-item id="structure-first" style="width:52%;">
              <div class="codewrap" onclick="cbubbleup('structure-first')">
                <pre style="width:200em;"><code class="language-python">#----------------------------------------------------------
# Py_Generic.py
#
# Python type hints and generics
#   - Demonstrates generic and type hint syntax
#   - Shows how to build user-defined generic type
#   - Type hints are ignored by the Python interpreter
#   - To check for type errors use tool mypy, e.g.:
#
#         mypy Py_Generic.py --check-untyped-defs
#
#     mypy requires installation using pip
#----------------------------------------------------------
# Python std types
#  list, tuple, range, dict, set,
import copy
import AnalysisGen
import PointsGen

# short-hand identifiers
Anal = AnalysisGen
Points = PointsGen

#-- demonstrate std collection types with generic hints

def demo_std_generics():
  # code elided, shown above

#-- user defined Hello type --#

from typing import TypeVar, Generic
T = TypeVar('T', bound=int | float)

class Hello(Generic[T]):
  # code elided, shown above

#-- demonstrate user-defined generic types --#

def demo_user_defined_generics():
  # code elided, shown above

def demo_generic_functions():
  # code elided, shown above

#-- demonstration starts here --#

def execute() :
    Anal.showNote(&quot;  Demonstrate Python Generics&quot;)

    Anal.showNote(
        &quot;  Python introduced generics and type hints&#92;n&quot;&#92;
        &quot;  to check for type errors using mypy, a static&#92;n&quot;&#92;
        &quot;  type checking tool.&quot;
    )
    print()

    demo_std_generics()
    demo_user_defined_generics()
    demo_generic_functions()

    print(&quot;&#92;nThat's all folks!&#92;n&quot;)

execute()
</code></pre>
              </div>
            </first-item>
            <splitter-bar id="structure-seperator"></splitter-bar>
            <second-item id="structure-second" style="width:40em; background-color:var(--light);" onclick="obubbleup('structure-first')">
              <div class="codewrap" onclick="obubbleup('structure-first')">
                <pre style="width:200em;"><code class="language-shell">C:&#92;github&#92;JimFawcett&#92;Bits&#92;Python&#92;Py_Generic
&gt; python Py_Generic.py
--------------------------------------------------
  Demonstrate Python Generics
--------------------------------------------------
--------------------------------------------------
  Python introduced generics and type hints
  to check for type errors using mypy, a static
  type checking tool.
--------------------------------------------------

--------------------------------------------------
  demo std generics
--------------------------------------------------

--- list[int] ---
&lt;class 'list'&gt;
[1, 2, 3, 2, 1]

--- list[str] ---
&lt;class 'list'&gt;
['you', 'me', 'them', 'us']

--- tuple(int, float, str) ---
&lt;class 'tuple'&gt;
(42, -0.5, 'forty two')

--- dict[str, int] ---
&lt;class 'dict'&gt;
{'zero': 0, 'one': 1, 'two': 2, 'three': 3}

--------------------------------------------------
  demo user-defined generics
--------------------------------------------------

--- Hello(42) ---
  &lt;class '__main__.Hello'&gt;
  h1: Hello { 42 }

--- Hello() uses default argument ---
  h2: Hello { 0 }

--- h2.value = 3.1415927 ---
  h2: Hello { 3.1415927 }

--- p1 = Points.Point[float](5) ---
  &lt;class 'PointsGen.Point'&gt;
  p1
  {
     0, 1.5, 0, -2.0, 42
  }

--------------------------------------------------
  demo generic functions
--------------------------------------------------

--- Anal.showType(list[int], name) ---
  l1 &lt;class 'list'&gt; dynamic
  value: [1, 2, 3, 2, 1, 0, -1, -2, -1, 0], size: 136

--- showTypeEnum(list[int], name) ---
  l1 &lt;class 'list'&gt; dynamic
  {
    1, 2, 3, 2, 1, 0, -1,
    -2, -1, 0
  }
  size: 136


That's all folks!

C:&#92;github&#92;JimFawcett&#92;Bits&#92;Python&#92;Py_Generic

</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>


        <h3 id="build">3.0 Build</h3>
        <div style="width:max-content; padding:0.25em 0.25em; border:2px solid var(--dark);">
          <pre style="width:max-content; margin:0em;"><code class="language-shell">C:&#92;github&#92;JimFawcett&#92;Bits&#92;Python&#92;Py_Generic  
&gt; python Py_Generic.py
</code></pre>
        </div>

        <h3 id="ide">4.0 VS Code View</h3>
        <t-b>
          The code for this demo is available in
          <a target="_blank" href="https://github.com/JimFawcett/Bits">github.com/JimFawcett/Bits</a>. If you click on
          the Code dropdown you can clone the repository of all code for these demos to your local drive.
          Then, it is easy to bring up any example, in any of the languages, in VS Code.
        </t-b>
        <t-b>
          Here, we do that for Python\Python_Objects.
        </t-b>
        <photosizer-block src="pictures/Python_Generic_Debugging.JPG" width="800" class="photoSizerBlock left"
                          style="overflow-x:auto;">
          <span style="font-family:'Comic Sans MS';">Figure 1. VS Code IDE - Python Generics</span>
        </photosizer-block>
        <!--<photosizer-block src="pictures/LaunchJSON_Cpp_Objects.JPG" width="800" class="photoSizerBlock left"
    style="overflow-x:auto;"
  >
    <span style="font-family:'Comic Sans MS';">Figure 2. Launch.JSON</span>
  </photosizer-block>-->

        <div style="height:0.75em;" class="clear"></div>
        <h3 id="refs">5.0 References</h3>
        <table class="indent">
          <tr>
            <th class="darkItem">Reference</th>
            <th class="darkItem">Description</th>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://towardsdatascience.com/how-to-make-python-statically-typed-the-essential-guide-e087cf4fa400">Python Type Hints</a>
            </td>
            <td>
              Syntax for type hinting - requires static analysis tool mypy.py to catch type errors.
            </td>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://docs.python.org/3/library/abc.html">Python Abstract Base Classes</a>
            </td>
            <td>
              Specification for building Python&apos;s equivalent of Interfaces
            </td>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://www.w3schools.com/python/">Python Tutorial - w3schools</a>
            </td>
            <td>
              Interactive examples
            </td>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://docs.python.org/3/reference/index.html">Python Reference - docs.python.org</a>
            </td>
            <td>
              Semi-formal syntax reference
            </td>
          </tr>
        </table>
        <div style="height:10em;"></div>
      </content>
      <a id="bottom"></a>
      <page-TOC id="pages" style="display:none;">
      </page-TOC>
      <page-sections id="sections" style="display:none;">
        <menu-elem style="width:0.0em">&nbsp;</menu-elem>
        <menu-elem class="secElem"><a href="#bottom">bottom</a></menu-elem>
        <menu-elem class="secElem"><a href="#refs">refs</a></menu-elem>
        <menu-elem class="secElem"><a href="#ide">VS Code</a></menu-elem>
        <menu-elem class="secElem"><a href="#build">bld</a></menu-elem>
        <menu-elem class="secElem"><a href="#out">out</a></menu-elem>
        <menu-elem class="secElem"><a href="#analysis">anal</a></menu-elem>
        <menu-elem class="secElem"><a href="#points">pts</a></menu-elem>
        <menu-elem class="secElem"><a href="#source">src</a></menu-elem>
        <menu-elem class="secElem"><a href="#code">codeSnaps</a></menu-elem>
        <menu-elem class="secElem"><a href="#top">top</a></menu-elem>
      </page-sections>
    </main>
    <!-- <frame-footer>
      <menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem id="nextLink2" onclick="bottomMenu.next()">Next</menu-elem>
      <menu-elem id="prevLink2" onclick="bottomMenu.prev()">Prev</menu-elem>
      <menu-elem id="pgbtn" onclick="bottomMenu.pages()">Pages</menu-elem>
      <menu-elem onclick="bottomMenu.sections()">Sections</menu-elem>
      <menu-elem onclick="bottomMenu.about()">About</menu-elem>
      <menu-elem id="kysbtn" onclick="storyHlpMenu.keys()">Keys</menu-elem>
      <menu-elem style="margin-right:5em">
        <span id="loc" style="display:inline-block; font-weight:normal"></span>
      </menu-elem>
    </frame-footer> -->
  </page-frame>
  <script>
    let loc = document.getElementById("loc");
    let fn = window.location.href.split(/\/|\\/).pop();
    loc.innerHTML = fn;
  </script>
  <script>
    getScroll();
  </script>
  <script>
    onLoadSplitter("stdgen");
    onLoadSplitter("hellodef");
    onLoadSplitter("hellodemo");
    onLoadSplitter("pointdef");
    onLoadSplitter("pointdemo");
    onLoadSplitter("genfuncsdef");
    onLoadSplitter("genfuncsdemo");
    onLoadSplitter("structure");
  </script>
</body>
</html>