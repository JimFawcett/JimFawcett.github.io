<!DOCTYPE html>
<html>
<head>
  <title>Custom Code Element with Prism.js Styles</title>
  <link rel="stylesheet" href="css/prism.css" />
  <script src="js/prism.js"></script>
  <style>
    code-example {
      border: 2px solid green;
    }
  </style>
</head>
<body>
  <h2>Code Example</h2>
  <template id="cdex">
    <!--<style>
      @import "css/prism.css";
      /*@import "js/prism.js";*/
    </style>-->
    <!--<link rel="stylesheet" href="css/prism.css" />
    <script src="js/prism.js"></script>-->
    <style>
/*      :host {
        border:2px solid red;
      }*/
    </style>
    <div class="container">
      <pre><code class="language-rust"><slot></slot></code></pre>
    </div>
  </template>
  <script>
/*const Prism = require("./js/prism");*/

/* END EXTERNAL SOURCE */
/* BEGIN EXTERNAL SOURCE */

    const doc = document.currentScript.ownerDocument;
    const templ = doc.querySelector('#cdex');
    class CodeExample extends HTMLElement {
      constructor() {
        super();
      }
      connectedCallback() {
        alert('callback');
        //tmpl = document.getElementById('cdex');
        //let clon = tmpl.content.cloneNode(true);
        //this.appendChild(clon);
        //this.render();
        const root = this.attachShadow({ mode: 'open' });
        const temp = document.importNode(templ.content, true);
        root.appendChild(temp);
        //Prism.highlightAllUnder(this.shadowRoot);
        //document.appendChild(document.importNode(temp.content, true));
      }
    }
    //Prism.highlightAllUnder(this.shadowRoot);
    customElements.define('code-example', CodeExample);
  </script>

  <code-example>let i = 42i32;
let f = 3.1415f64;</code-example>
</body>
</html>
