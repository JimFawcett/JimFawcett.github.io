<!DOCTYPE html>
<html>
<!--
  Bits_ObjectsCSharp.html
-->
<head>
  <title>C# Objects</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/StylesPhoto.css" />
  <link rel="stylesheet" href="css/StylesSizerComp.css" />
  <!-- PageFrame infrastructure -->
  <link rel="stylesheet" href="css/StylesPageFrameDefaults.css" />
  <link rel="stylesheet" href="css/StylesPageFrameStructure.css" />
  <link rel="stylesheet" href="css/StylesPageFrameMenus.css" />
  <link rel="stylesheet" href="css/StylesPageFrameThemeCSharp.css" />
  <link rel="stylesheet" href="css/StylesWebComponents.css" />
  <script src="js/ScriptsWebComponents.js"></script>
  <script src="js/ScriptsPageFrame.js"></script>
  <script src="js/ScriptsPageFramePagesBitsCSharp.js"></script>
  <script src="js/ScriptsPageFrameKeyboard.js"></script>
  <!--<script src="js/ScriptsPageFrameNewRadioButtons.js"></script>-->
  <style>
    #github .note {
      border: 1px solid var(--dark);
      padding: 0.75em 1.5em;
      margin-top: 1.25em;
      margin-bottom: 1.25em;
      background-color: var(--light);
      color: var(--dark);
      max-width: 50em;
    }

    #github h2 {
      margin-top: 0.75em;
    }

    #github #pagetitle {
      border: 2px double var(--dark);
    }

    #github .hide {
      display: none;
    }

    body {
      position: relative;
    }

    #github .codeSnap {
      font-family: Consolas, Courier New, Courier, monospace, sans-serif;
      font-size: small;
      font-weight: bold;
      background-color: #eee;
      padding: 10px;
    }

    #github .remotebutton {
      padding: 0.25em 0.5em;
    }

    #github .rightPanelLinks {
      position: fixed;
      right: 0.0em;
      top: 15em;
      z-index: 100;
      background: var(--light);
      padding: 0.75em 0.25em;
      border: 1px solid var(--dark);
    }

    #github div.rightPanelLinks a {
      display: block;
      height: 1.5em;
      padding: 0em 0.25em;
    }

    #github hr.spread {
      margin: 0.75em 0em;
    }

    body {
      overflow-y: auto;
    }

    #github pre {
      min-width: 20em;
      max-width: 60em;
      user-select: all;
    }

    #github {
      user-select: none;
    }

    .focus {
      padding: 0.5em 1.0em 0.5em 0.5em;
      /*border:1px solid red;*/
    }

    *.focus ul {
      padding-top: -0.5em;
      /*background-color:green;*/
    }

    .cat {
      text-align: left;
      background-color: var(--menu);
    }

    #github pre {
      overflow-x: auto !important;
    }

    .block {
      border: 1px solid var(--dark);
      overflow: hidden;
      clear: both;
      max-width: 50em;
      margin-right: 0.75em;
    }

    .codewrap {
      float: left;
      padding-left: 0.5em;
      padding-right: 0.75em;
    }

    .textwrap {
      padding: 0.0em 0.75em 0.5em 0.5em;
      padding-left: 0.5em;
      padding-right: 0.75em;
    }

    table {
      margin-right: 0.75em;
    }
  </style>
  <script>
    function setScroll() {
      let main = document.querySelector("#main");
      const scrollPosition = main.scrollTop;
      localStorage.setItem('scrollPositionHelloRust', scrollPosition);
      let scroller = document.getElementById("scrollY")
      scroller.innerHTML = Math.trunc(scrollPosition);
    }
    function gotoLastScroll() {
      let main = document.querySelector("#main");
      const scrollPosition = localStorage.getItem('scrollPositionHelloRust');
      if (scrollPosition) {
        main.scrollTo(0, scrollPosition);
      }
      main.addEventListener('scroll', setScroll);
    }
    function load() {
      //initialize();
      gotoLastScroll();
    }
  </script>

  <script>
    function remote() {
      window.open('https://godbolt.org/z/KsWeWecvj', '_blank');
    }
  </script>
</head>
<body id="github" onload="load()">

  <a id="Next" href="Bits_GenericCSharp.html">Next</a>
  <a id="Prev" href="Bits_DataCSharp.html">Prev</a>

  <page-frame>
    <!-- <frame-header>
      <nav id="navbar"></nav>
    </frame-header> -->
    <main id="main">
      <div id="about">about</div>
      <div id="page">Bits Objects C#</div>
      <div id="modified">11/02/2023</div>
      <div id="hlp"></div>
      <a id="top"></a>
      <content>
        <div class="rightPanelLinks">
          <a target="_parent" href="Bits_ObjectsCpp.html">C++</a>
          <a target="_parent" href="Bits_ObjectsRust.html">Rust</a>
          <a target="_parent" class="darkItem" href="Bits_ObjectsCSharp.html">C#</a>
          <a target="_parent" href="Bits_ObjectsPython.html">Python</a>
          <a target="_parent" href="Bits_ObjectsJs.html">JvScrpt</a>
        </div>
        <div id="scrollY"
             style="position:fixed; bottom:0.50em; right:1.50em; width:max-content; height:1.5em;
           text-align:right; padding:0.15em 0.5em; border:1px solid red;">
          0
        </div>
        <header>
          <a target="_blank" class="repoLink" href="https://github.com/JimFawcett/Bits">Bits Repo Code</a>
          <a target="_blank" class="repoLink" href="../../BitsRepo.html" style="margin-right:7.5em;">Bits Repo Docs</a>
          <hgroup id="pagetitle">
            <h1 id="title">Bits: C# Objects</h1>
            <h3 id="subtitle" class="indent">
              classes and objects for C# on Windows, macOS, and Linux
            </h3>
          </hgroup>
        </header>
        <t-b style="border:2px solid red; padding:0.5em 1.5em;">
          This page is a prototype used to decide which language features to emphasize. It will
          be replaced with a final version soon.
        </t-b>
        <t-b id="syn" style="border:1px solid maroon; padding:0.25em 1em 0.5em 1em;">
          <h4 style="margin:0em 0em 0.25em 0em;">Synopsis:</h4>
          This page demonstrates uses of C# User-Defined types and their objects.
          The purpose is to quickly acquire some familiarity with user-defined types
          and their implementations.
          <hr class="spread" />
          <ul>
            <li>
              C# defines a few special class methods: parameterized constructors, and other operators for
              indexing and comparison etc.
            </li>
            <li>
              The compiler does not generate any of these special methods.
            </li>
            <li>
              Also, this is the first set of examples to partition code into several files.
              That supports readability, may improve translation times, and makes maintenance
              significantly easier.
            </li>
          </ul>
          <div style="height:0.5em;"></div>
        </t-b>
        <div style="height:0.75em;"></div>
        <details id="aggrtypes">
          <summary class="darkItem">C# Aggregate Type Structure&nbsp;&nbsp;</summary>
          <div style="padding:0em 1em 1em 1em; width:max-content; border:1px solid var(--dark);">
            <t-b>
              Aggregates are types whose instances hold instances of, or handles to, other types, i.e., an array can hold
              instances of an arbitrary type. Structs and classes can hold named instances or handles to arbitrary other types.
            </t-b>
            <t-b>
              There are three ways that happens:
              <ul>
                <li>
                  <strong>Inheritance</strong>
                  <t-b>
                    A C# class can inherit implementation of one base class. The memory footprint of the base class
                    is held entirely within the memory footprint of the derived class.
                  </t-b>
                </li>
                <li>
                  <h5>Composition</h5>
                  <t-b>
                    When an instance of a C# type holds a value type, the memory footprint of the value type
                    lies entirely within the memory footprint of its parent instance.  We say the parent
                    composes its value type element.
                  </t-b>
                </li>
                <li>
                  <h5>Aggregation</h5>
                  <t-b>
                    When an instance of a C# type holds a handle to a reference type, the parent&apos;s memory
                    footprint holds only the handle, not the entire child instance.  We say the parent
                    aggregates the type referenced by the handle.
                  </t-b>
                </li>
              </ul>
              This layout affects how copy operations work:
              <ul>
                <li>
                  Copies of value types like structs, and tuples
                  create a copy of the source instance at the destination&apos;s memory location.
                  That results in two unique instances, the source and the destination.
                </li>
                <li>
                  Copies of handles to reference types like arrays, class instances, and objects copy only the handles.
                  That results in two handles referring to the same instance stored in the managed heap.
                </li>
              </ul>
            </t-b>
          </div>
        </details>
        <details id="notes">
          <summary class="darkItem">Demo Notes&nbsp;&nbsp;</summary>
          <t-b><hr /></t-b>
          <t-b>
            All of the languages covered in this demonstration support classes.  Each class provides
            a pattern for laying out a memory footprint and defines how data within are accessed.
          </t-b>
          <t-b>
            Three of the languages: C++, Rust, and C# provide generics.  Each generic function or class
            is a pattern for defining functions and classes of a specific type.  Thus a generic is a
            pattern for making patterns.
          </t-b>
          <t-b>
            The other two, Python and JavaScript, are dynamically typed and already support defining
            functions and classes for multiple types, e.g., no need for generics.
          </t-b>
          <t-b>
            This demonstration illustrates use of classes and objects, which for C++, Rust, and C#,
            are defined in a stackframe or in the heap or both. <strongs>All</strongs> data for Python and JavaScript are
            stored in managed heaps.
          </t-b>
          <t-b><hr /></t-b>
        </details>
        <t-b>
          The examples below show how to use library and user defined types with emphasis on
          illustrating syntax and basic operations.
        </t-b>
        <div style="height:0.25em;"></div>
        <div style="height:0.25em;"></div>
        <h3 id="code">1.0 CodeSnaps</h3>
        <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote()" />
        <div style="display:flex; flex-direction:column;">
          <h4 id="source">Source Code - Program.cs</h4>
          <pre class="codeSnap">
/*-------------------------------------------------------------------
  Cs_Objects::Program.cs
  - Demonstrates creation and assignment of objects as well as a few
    peeks at other operations on objects.
*/
using System;
using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;
using System.Linq;                  // IEnumerable&lt;T&gt;.ToArray
using System.Text;                  // StringBuilder
using Points;                       // defined in Points.cs
using Analysis;                     // defined in Analysis.cs

/*
  Static Data Types:
    value types =&gt; assignment copies value
    --------------------------------------
      sbyte, byte, short, int, long, ushort, uint, ulong
      float, double
      decimal, char, bool
      struct
    Reference types =&gt; assignment copies reference
    ----------------------------------------------
      object, string, array, class
    ----------------------------------------------
      strings are immutable, so any change requires copy on write.
      That simulates value behavior.
*/
namespace CSharpObjects
{
  /*
    Demonstration composite value type.
    - St is a value type because it is implemented with
      a struct and all its data members are value types.
  */
  public struct St {
    public St(int ai, double bi, char ci) {
      a=ai; b=bi; c=ci;
    }
    public void Show(string name) {
      Console.WriteLine(
        &quot;  {0} {{ a:{1}, b:{2}, c:{3} }}&quot;, name, a, b, c
      );
    }
    /*
     These data members are public instead of public properties.
     - we don't need that ceremony because St is simply a data
       aggregator. It doesn't have any significant behavior.
    */
    public int a;
    public double b;
    public char c;
  }

  /*-- Object demonstration begins here --*/
  class Program
  {
    const string nl = &quot;&#92;n&quot;;
    static void Main(string[] args)
    {
      Display.ShowLabel(&quot; Demonstrate C# objects&quot;);

      Display.ShowNote(
        &quot;Examples of creation and display of Primitive Types&quot;
      );
      short s = 123;
      Display.ShowTypeScalar(s, &quot;s&quot;, nl);
      long l = 12345;
      Display.ShowTypeScalar(l, &quot;l&quot;, nl);
      float f = 3.1415927f;
      Display.ShowTypeScalar(f, &quot;f&quot;, nl);
      double d = 3.1415927;
      Display.ShowTypeScalar(d, &quot;d&quot;, nl);
      int[] arr = new int[]{ 4, 3, 2, 1, 0, -1};
      Display.ShowTypeScalar(arr, &quot;arr&quot;);
      Display.ShowIntArray(arr, nl);

      Display.ShowNote(
        &quot;Examples of creation and display of Library Types&#92;n&quot; +
        &quot;- size is the size of reference, not instance&quot;
      );
      string aString = &quot;a string&quot;;  // hides construction
      Display.ShowTypeScalar(aString, &quot;aString&quot;, nl);

      string another = new string(&quot;another string&quot;);
      Display.ShowTypeScalar(another, &quot;another&quot;, nl);

      List&lt;double&gt; aList =
        new List&lt;double&gt;{ 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0 };

      Display.ShowTypeScalar(aList, &quot;aList&quot;);
      Display.ShowDoubleList(aList, nl);
      // Display.ShowTypeEnum(aList, &quot;aList&quot;, 5, nl);

      var d1 = new Dictionary&lt;int, string&gt;
      {
        { 0, &quot;zero&quot;}, {1, &quot;one&quot;}, {2, &quot;two&quot;}
      };
      Display.ShowTypeScalar(d1, &quot;d1&quot;);
      Display.ShowDictionary(d1, nl);
      // Display.ShowTypeEnum(d1, &quot;d1&quot;, 5, nl);

      Display.ShowNote(
        &quot;Examples of user-defined type:&#92;n&quot; +
        &quot;- Point4D, a point with x,y,z,t coordinates&quot;
      );
      Point4D p1 = new Point4D();
      p1.x = 3;
      p1.y = -42;
      p1.z = 1;
      p1.Show(&quot;p1&quot;);
      Display.ShowOp(&quot;ShowTypeShowable(p1, &#92;&quot;p1&#92;&quot;)&quot;);
      Display.ShowTypeShowable(p1, &quot;p1&quot;);

      Display.ShowLabel(
        &quot;Differences between value and reference types&quot;
      );
      Display.ShowNote(
        &quot;Assignment of reference types assigns their references,&#92;n&quot; +
        &quot;creating two references to the same instance in managed&#92;n&quot; +
        &quot;heap, so variables are coupled through single instance.&quot;
      );

      Display.ShowOp(&quot;Point4D val1 = new Point4D(), then initialize&quot;, &quot;&#92;n&quot;);
      Point4D val1 = new Point4D();
      val1.x = 1;
      val1.y = 2;
      val1.z = 3;
      Display.ShowLabeledObject(val1, &quot;val1&quot;);

      Display.ShowOp(&quot;Point4D val2 = val1&quot;);
      Point4D val2 = val1;
      Display.ShowLabeledObject(val2, &quot;val2&quot;);
      Display.IsSameObj(val2, &quot;val2&quot;, val1, &quot;val1&quot;);

      Display.println();
      Display.ShowOp(&quot;val2.z = 42;&quot;);
      Display.println();
      val2.z = 42;
      Display.IsSameObj(val2, &quot;val2&quot;, val1, &quot;val1&quot;);
      Display.ShowLabeledObject(val2, &quot;val2&quot;);
      Display.ShowLabeledObject(val1, &quot;val1&quot;);
      Display.ShowNote(
        &quot;Note! Source of assignment, val1, changed when val2 changed.&#92;n&quot; +
        &quot;Point4D is ref type, so assignment just assigns references.&quot;
      );
      Display.println();

      Display.ShowNote(
        &quot;Value types can be independently assigned and copied.&quot;
      );
      Console.WriteLine();

      Display.ShowOp(&quot;var s1 = new St(1, -0.5, 'z');&quot;);
      var s1 = new St(1, -0.5, 'z');

      Display.ShowOp(&quot;var s2 = s1&quot;);
      var s2 = s1;
      Display.IsSameObj(s2, &quot;s2&quot;, s1, &quot;s1&quot;);
      s2.Show(&quot;s2&quot;);
      s1.Show(&quot;s1&quot;);

      Display.ShowOp(&quot;s2.c = 'q'&quot;);
      s2.c = 'q';
      s2.Show(&quot;s2&quot;);
      s1.Show(&quot;s1&quot;);
      Display.ShowNote(
        &quot;Change in destination, s2, did not alter source, s1.&#92;n&quot; +
        &quot;Assignment of value types creates independent objects.&quot;
      );

      Display.ShowLabel(
        &quot;Instances of string are reference types, but simulate&#92;n&quot; +
        &quot;some value behaviors.  String objects are immutable.&#92;n&quot; +
        &quot;To modify an instance, a new string is created with&#92;n&quot; +
        &quot;copies of the source string characters inclucing any&#92;n&quot; +
        &quot;modifications.&quot;
      );
      var str1 = &quot;An immutable string&quot;;
      var str2 = str1;  // copy handle not instance
      Display.IsSameObj(str2, &quot;str2&quot;, str1, &quot;str1&quot;);
      Display.DisplayLabeledObject&lt;string&gt;(str1, &quot;str1&quot;);
      Display.DisplayLabeledObject(str2, &quot;str2&quot;);

      str2 = str2.Remove(0,3);
      Display.IsSameObj(str2, &quot;str2&quot;, str1, &quot;str1&quot;);
      Display.DisplayLabeledObject(str1, &quot;str1&quot;);
      Display.DisplayLabeledObject(str2, &quot;str2&quot;);
      Display.ShowNote(
        &quot;There is no way for change in str2 to affect str1.&quot;
      );

      Console.WriteLine(&quot;&#92;nThat's all Folks!&#92;n&quot;);
    }
  }
}

          </pre>
          <h4 id="points">Source Code - PointsObjects.cs</h4>
          <pre class="codeSnap">
/*-------------------------------------------------------------------
  PointsObjects.cs
  - provides definitions for user-defined class Point4D
*/

using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;
using Analysis;

namespace Points {
  /*-----------------------------------------------------------------------
    Point4D is a basic point class with three integer coordinates and one
    time coordinate.
    - It is a reference type because it's instances are created
      from a class
    - That affects the way assignments work - see demo near the
      end of main.
  */
  public class Point4D : Analysis.IShow  // reference type with value type members
  {
    public Point4D() {
      /*
        doesn't need to do anything because its properties have
        default values
      */
    }
    public double x { get; set; } = 0.0;
    public double y { get; set; } = 0.0;
    public double z { get; set; } = 0.0;
    public DateTime dt { get; set; } = DateTime.Now;
    public int Length { get; } = 4;
    public int Width { get; set; } = 3;
    public int Left { get; set; } = 2;
    public int Indent { get; set; } = 2;
    /* translates IShow::show to needs of class */
    public void Show(string name) {
      PrintSelf(name);
    }
    /* Display Point4D structure and state */
    public void PrintSelf(string name) {
      string ofstr = Display.Spaces(Left);
      string instr = Display.Spaces(Indent);

      Console.WriteLine(&quot;{0}{1} {{&quot;, ofstr, name);
      Console.WriteLine(
        &quot;{5}x:{1}, y:{2}, z:{3},&#92;n{5}{4}&quot;, name, x, y, z, dt, ofstr + instr
      );
      Console.WriteLine(&quot;{0}}}&#92;n&quot;, ofstr);
    }
  }
}          </pre>
          <h3 id="pass">2.0 Pass-by-value and Pass-by-reference</h3>
          <t-b>

          </t-b>
          <div class="block">
            <div class="codewrap">
              <pre>
<code class="language-cpp">  /*--- copy value type ---*/
</code>
            </pre>
            </div>
            <div class="textwrap">
              <t-b>
                text here
              </t-b>
            </div>
          </div>
          <details>
            <summary class="darkItem">Output</summary>
            <div class="block">
              <div class="codewrap">
                <pre>
                <code class="language-csharp">

                </code>
              </pre>
              </div>
            </div>
          </details>
          <h4 id="funcs">Source Code - AnalysisObjects.cs</h4>
          <pre class="codeSnap">
/*-------------------------------------------------------------------
  AnalysisObjects.cs
  - provides several type analysis and display methods in the
    class Display
*/

using System.Reflection;
using System.Reflection.Emit;
using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;
using System.Linq;                  // IEnumerable&lt;T&gt;.ToArray
using System.Text;

/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    cut here

    The functions below are used for analysis and display. They
    have varying complexities. It is not essential to understand
    them in order to follow the demonstrations in this demo.
    We will look at them in some detail in Bits_Generic and
    Bits_Iter.
*/
namespace Analysis {
  /*----------------------------------------------------------------------
      IShow allows analysis functions to operate on instances of any class
      that implements it. See ShowTypeShowable&lt;T&gt;(T t, ...), below.
  */
  public interface IShow {
    void Show(string name);   // show instance state as rows of elements
    int Length { get; }       // total number of elements
    int Width { get; set; }   // number of elements per row
    int Left { get; set; }    // offset from terminal Left
    int Indent {get; set; }   // element indent
  }

  public class Display {
    /*-------------------------------------------------
      Show static type with some formatting adjustments
      and name at callsite.
    */
    public static String Spaces(int i) {
      return new String(' ', i);
    }
    public static void ShowType&lt;T&gt;(T t, string nm) {
      Type tt = t!.GetType();
      string tnm = tt.Name;
      if(tt.IsGenericType) {
        if(tnm.Length &gt; 1) {
          tnm = tnm.Remove(tnm.Length - 2) + &quot;&lt;T&gt;&quot;;
        }
      }
      Console.Write(&quot;{0}: {1}, &quot;, nm, tnm);
      int size = GetManagedSize(tt);
      Console.Write(&quot;size: {0}, &quot;, size);
      if (tt.IsValueType) {
        Console.WriteLine(&quot;value type&quot;);
      }
      else {
        Console.WriteLine(&quot;reference type&quot;);
      }
    }
    /*-------------------------------------------------
    Display information about the type of any scalar type.
    - scalar types are those with a single value like:
      int, double, string, ...
    - This function directly uses only simple reflection
    */
    public static void ShowTypeScalar&lt;T&gt;(
      T t, string nm, string suffix = &quot;&quot;
    )
    {
      ShowType(t, nm);
      Console.WriteLine(&quot;value: &#92;&quot;{0}&#92;&quot;{1}&quot;, t, suffix);
    }
    /*-------------------------------------------------
    Show type information for any type that implements
    the IShow interface
    */
    public static void ShowTypeShowable&lt;T&gt;(
      T t, string nm, string suffix=&quot;&quot;
    )
    where T:IShow
    {
      ShowType(t, nm);
      Console.WriteLine(&quot;value:&quot;);
      t.Show(nm);     // guaranteed by IShow implementation
      Console.Write(suffix);
    }
    /*-------------------------------------------------
      In Cs_Generic we will show how to implement a
      show function for the enumerable types below.
    */
    public static void ShowIntArray(int[] arr, string suffix=&quot;&quot;)
    {
      Console.Write(&quot;[ {0}&quot;, arr[0]);
      for (int i = 1; i &lt; arr.Length; i++)
      {
        Console.Write(&quot;, &quot; + arr[i] + &quot; &quot;);
      }
      Console.Write(&quot;]&#92;n&quot; + suffix);
    }
    public static void ShowDoubleList(List&lt;double&gt; list, string suffix=&quot;&quot;)
    {
      Console.Write(&quot;[ {0}&quot;, list[0]);
      for (int i = 1; i &lt; list.Count; i++)
      {
        Console.Write(&quot;, &quot; + list[i] + &quot; &quot;);
      }
      Console.Write(&quot;]&#92;n&quot; + suffix);
    }
    public static void ShowDictionary(
      Dictionary&lt;int, string&gt; dict, string suffix=&quot;&quot;
    )
    {
      Dictionary&lt;int, string&gt;.KeyCollection keyColl = dict.Keys;
      Console.Write(&quot;[ &quot;);
      foreach(KeyValuePair&lt;int, string&gt; entry in dict)
      {
        Console.Write(&quot;{{{0},{1}}} &quot;, entry.Key, entry.Value);
      }
      Console.Write(&quot;]&#92;n&quot; + suffix);
    }
    /*-------------------------------------------------
      Provides name of caller, nm, as label for IShow() information.
      - works for all Showable instances
    */
    public static void ShowLabeledObject&lt;T&gt;(
      T t, string nm
    ) where T:IShow {
      t.Show(nm);
    }
    /*-------------------------------------------------
      Provides name of caller, nm, as label for value.
      - works for all T with ToString.
    */
    public static void DisplayLabeledObject&lt;T&gt;(T t, string nm) {
      Console.WriteLine(&quot;{0}: {1}&quot;, nm, t!.ToString());
    }
    /*-------------------------------------------------
      do t1 and t2 share the same address?
    */
    public static void IsSameObj&lt;T&gt;(
      T t1, String n1, T t2, String n2, string suffix = &quot;&quot;
    ) {
      if(ReferenceEquals(t1, t2)) {
        Console.WriteLine(
        &quot;{0} is same object as {1}{2}&quot;, n1, n2, suffix
        );
      }
      else {
          Console.WriteLine(
          &quot;{0} is not same object as {1}{2}&quot;, n1, n2, suffix);
      }
    }
    /*-------------------------------------------------
      Beware, two distinct objects may have same hashcode.
      - Not used in this demo for that reason.
    */
    public static void showIdent&lt;T&gt;(
      T t, String n, string suffix = &quot;&quot;
    ) {
      int id = t!.GetHashCode();
      Console.WriteLine(&quot;{0}, {1}{2}&quot;, n, id, suffix);
    }
    /*-------------------------------------------------
      Display function call or operation to help turn
      output data into information
    */
    public static void ShowOp(string op, string suffix = &quot;&quot;) {
      Console.WriteLine(&quot;--- {0} ---{1}&quot;, op, suffix);
    }
    public static void print(String s = &quot;&quot;) {
      Console.Write(s);
    }
    public static void println(String s = &quot;&quot;) {
      Console.WriteLine(s);
    }
    /*-------------------------------------------------
      Emphasize text with borders
    */
    public static void ShowNote(string s, string suffix = &quot;&quot;) {
      Console.WriteLine(
        &quot;--------------------------------------------------&quot;
      );
      Console.WriteLine(&quot;{0}&quot;, s);
      Console.WriteLine(
        &quot;--------------------------------------------------{0}&quot;,
        suffix
      );
    }
    /*-------------------------------------------------
      Surround note with empty lines
    */
    public static void ShowLabel(string s) {
      Console.WriteLine();
      ShowNote(s);
      Console.WriteLine();
    }
    /*
      Show fields and methods for either reference or value types
      using reflection
    */
    // https://stackoverflow.com/questions/7613782/iterating-through-struct-members
    public static void iterate&lt;T&gt;(T t) /*where T:new()*/ {
      Console.WriteLine(&quot;fields:&quot;);
      foreach(
        var field in typeof(T).GetFields(
        BindingFlags.Instance |
        BindingFlags.NonPublic |
        BindingFlags.Public
      )
      ) {
        Console.WriteLine(
          &quot;  {0} = {1}&quot;, field.Name, field.GetValue(t)
        );
      }
      Console.WriteLine(&quot;methods:&quot;);
      foreach(
        var method in typeof(T).GetMethods(
          BindingFlags.Instance | BindingFlags.Public
        )
      ) {
        Console.WriteLine(
          &quot;  {0}&quot;, method.Name
        );
      }
    }
    /*----------------------------------------------------------------
      Utils uses advanced relection
      - GetMangedSize(Type type) is function that returns the size of
      value types and handles, used to help discover how things work.
      It is placed here because it uses advanced techniques that
      will eventually be covered elsewhere in this site.  Knowing
      how it works is not essential for the things we are examining
      in this demo.
    */
    // https://stackoverflow.com/questions/8173239/c-getting-size-of-a-value-type-variable-at-runtime/8173293#8173293
    public static int GetManagedSize(Type type)
    {
      // all this just to invoke one opcode with no arguments!
      var method = new DynamicMethod(
        &quot;GetManagedSizeImpl&quot;, typeof(uint), new Type[0],
        typeof(TypeExtensions), false
      );

      ILGenerator gen = method.GetILGenerator();
      gen.Emit(OpCodes.Sizeof, type);
      gen.Emit(OpCodes.Ret);

      var func = (Func&lt;uint&gt;)method.CreateDelegate(typeof(Func&lt;uint&gt;));
      return checked((int)func());
    }
  }
}
          </pre>
          <h4 id="out">Output</h4>
          <pre class="codeSnap">
C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Objects
&gt; dotnet run

--------------------------------------------------
 Demonstrate C# objects
--------------------------------------------------

--------------------------------------------------
Examples of creation and display of Primitive Types
--------------------------------------------------
s: Int16, size: 2, value type
value: &quot;123&quot;

l: Int64, size: 8, value type
value: &quot;12345&quot;

f: Single, size: 4, value type
value: &quot;3.1415927&quot;

d: Double, size: 8, value type
value: &quot;3.1415927&quot;

arr: Int32[], size: 8, reference type
value: &quot;System.Int32[]&quot;
[ 4, 3 , 2 , 1 , 0 , -1 ]

--------------------------------------------------
Examples of creation and display of Library Types
- size is the size of reference, not instance
--------------------------------------------------
aString: String, size: 8, reference type
value: &quot;a string&quot;

another: String, size: 8, reference type
value: &quot;another string&quot;

aList: List&lt;T&gt;, size: 8, reference type
value: &quot;System.Collections.Generic.List`1[System.Double]&quot;
[ 1, 1.5 , 2 , 2.5 , 3 , 3.5 , 4 ]

d1: Dictionary&lt;T&gt;, size: 8, reference type
value: &quot;System.Collections.Generic.Dictionary`2[System.Int32,System.String]&quot;
[ {0,zero} {1,one} {2,two} ]

--------------------------------------------------
Examples of user-defined type:
- Point4D, a point with x,y,z,t coordinates
--------------------------------------------------
  p1 {
    x:3, y:-42, z:1,
    5/29/2023 7:49:53 PM
  }

--- ShowTypeShowable(p1, &quot;p1&quot;) ---
p1: Point4D, size: 8, reference type
value:
  p1 {
    x:3, y:-42, z:1,
    5/29/2023 7:49:53 PM
  }


--------------------------------------------------
Differences between value and reference types
--------------------------------------------------

--------------------------------------------------
Assignment of reference types assigns their references,
creating two references to the same instance in managed
heap, so variables are coupled through single instance.
--------------------------------------------------
--- Point4D val1 = new Point4D(), then initialize ---

  val1 {
    x:1, y:2, z:3,
    5/29/2023 7:49:53 PM
  }

--- Point4D val2 = val1 ---
  val2 {
    x:1, y:2, z:3,
    5/29/2023 7:49:53 PM
  }

val2 is same object as val1

--- val2.z = 42; ---

val2 is same object as val1
  val2 {
    x:1, y:2, z:42,
    5/29/2023 7:49:53 PM
  }

  val1 {
    x:1, y:2, z:42,
    5/29/2023 7:49:53 PM
  }

--------------------------------------------------
Note! Source of assignment, val1, changed when val2 changed.
Point4D is ref type, so assignment just assigns references.
--------------------------------------------------

--------------------------------------------------
Value types can be independently assigned and copied.
--------------------------------------------------

--- var s1 = new St(1, -0.5, 'z'); ---
--- var s2 = s1 ---
s2 is not same object as s1
  s2 { a:1, b:-0.5, c:z }
  s1 { a:1, b:-0.5, c:z }
--- s2.c = 'q' ---
  s2 { a:1, b:-0.5, c:q }
  s1 { a:1, b:-0.5, c:z }
--------------------------------------------------
Change in destination, s2, did not alter source, s1.
Assignment of value types creates independent objects.
--------------------------------------------------

--------------------------------------------------
Instances of string are reference types, but simulate
some value behaviors.  String objects are immutable.
To modify an instance, a new string is created with
copies of the source string characters inclucing any
modifications.
--------------------------------------------------

str2 is same object as str1
str1: An immutable string
str2: An immutable string
str2 is not same object as str1
str1: An immutable string
str2: immutable string
--------------------------------------------------
There is no way for change in str2 to affect str1.
--------------------------------------------------

That's all Folks!

C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Objects
&gt;&gt;
          </pre>
          <h4 id="build">Build</h4>
          <pre class="codeSnap">
C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Objects
&gt; dotnet build
MSBuild version 17.4.1+fedecea9d for .NET
  Determining projects to restore...
  All projects are up-to-date for restore.
  Cs_Objects -&gt; C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Ob
  jects&#92;bin&#92;Debug&#92;net7.0&#92;Cs_Objects.dll

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:00.92
C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Objects
&gt;
          </pre>
        </div>
        <h3 id="ide">2.0 VS Code View</h3>
        <t-b>
          The code for this demo is available in
          <a target="_blank" href="https://github.com/JimFawcett/Bits">github.com/JimFawcett/Bits</a>. If you click on
          the Code dropdown you can clone the repository of all code for these demos to your local drive.
          Then, it is easy to bring up any example, in any of the languages, in VS Code.
        </t-b>
        <t-b>
          Here, we do that for CSharp\CSharp_Objects.
        </t-b>
        <photosizer-block src="pictures/VS_Code_CSharp_Objects.JPG" width="800" class="photoSizerBlock left"
                          style="overflow-x:auto;">
          <span style="font-family:'Comic Sans MS';">Figure 1. VS Code IDE - C# Objects</span>
        </photosizer-block>
        <photosizer-block src="pictures/LaunchJSON_CSharp_Objects.JPG" width="800" class="photoSizerBlock left"
                          style="overflow-x:auto;">
          <span style="font-family:'Comic Sans MS';">Figure 2. C# Launch.JSON</span>
        </photosizer-block>
        <photosizer-block src="pictures/VS_Code_Debugging_CSharp_Objects.JPG" width="800" class="photoSizerBlock left"
                          style="overflow-x:auto;">
          <span style="font-family:'Comic Sans MS';">Figure 3. Debugging C# Objects</span>
        </photosizer-block>
        <!--<photosizer-block src="pictures/VS_Code_Cpp_Plugins.jpg" width="700" class="photoSizerBlock left">
    <span style="font-family:'Comic Sans MS';">Figure 3. C++ Plugins</span>
  </photosizer-block>-->

        <div style="height:0.75em;" class="clear"></div>
        <h3 id="refs">3.0 References</h3>
        <table class="indent">
          <tr>
            <th class="darkItem">Reference</th>
            <th class="darkItem">Description</th>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://www.w3schools.com/cs/index.php">C# Tutorial - w3schools</a>
            </td>
            <td>
              Interactive examples
            </td>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/">C# Reference - Microsoft</a>
            </td>
            <td>
              Relatively complete informal language reference
            </td>
          </tr>
        </table>
        <div style="height:10em;"></div>
      </content>
      <a id="bottom"></a>
      <page-TOC id="pages" style="display:none;">
      </page-TOC>
      <!-- <page-sections id="sections" style="display:flex;">
        <menu-elem style="width:0.0em">&nbsp;</menu-elem>
        <menu-elem class="secElem"><a href="#bottom">bottom</a></menu-elem>
        <menu-elem class="secElem"><a href="#refs">refs</a></menu-elem>
        <menu-elem class="secElem"><a href="#ide">VS Code</a></menu-elem>
        <menu-elem class="secElem"><a href="#build">bld</a></menu-elem>
        <menu-elem class="secElem"><a href="#out">out</a></menu-elem>
        <menu-elem class="secElem"><a href="#analysis">anal</a></menu-elem>
        <menu-elem class="secElem"><a href="#points">pts</a></menu-elem>
        <menu-elem class="secElem"><a href="#source">src</a></menu-elem>
        <menu-elem class="secElem"><a href="#code">codeSnaps</a></menu-elem>
        <menu-elem class="secElem"><a href="#top">top</a></menu-elem>
      </page-sections> -->
    </main>
    <!-- <frame-footer>
      <menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem id="nextLink2" onclick="bottomMenu.next()">Next</menu-elem>
      <menu-elem id="prevLink2" onclick="bottomMenu.prev()">Prev</menu-elem>
      <menu-elem id="pgbtn" onclick="bottomMenu.pages()">Pages</menu-elem>
      <menu-elem onclick="bottomMenu.sections()">Sections</menu-elem>
      <menu-elem onclick="bottomMenu.about()">About</menu-elem>
      <menu-elem id="kysbtn" onclick="storyHlpMenu.keys()">Keys</menu-elem>
      <menu-elem style="margin-right:5em">
        <span id="loc" style="display:inline-block; font-weight:normal"></span>
      </menu-elem>
    </frame-footer> -->
  </page-frame>
  <!-- <script>
    let loc = document.getElementById("loc");
    let fn = window.location.href.split(/\/|\\/).pop();
    loc.innerHTML = fn;
  </script>
  <script>
    getScroll();
  </script> -->
</body>
</html>