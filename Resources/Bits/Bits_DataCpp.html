<!DOCTYPE html>
<html>
<!--
  Bits_DataCpp.html
-->
<head>
  <title>Bits_Data C++</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/StylesPhoto.css" />
  <link rel="stylesheet" href="css/StylesSizerComp.css" />
  <!-- PageFrame infrastructure -->
  <link rel="stylesheet" href="css/StylesPageFrameDefaults.css" />
  <link rel="stylesheet" href="css/StylesPageFrameStructure.css" />
  <link rel="stylesheet" href="css/StylesPageFrameMenus.css" />
  <link rel="stylesheet" href="css/StylesPageFrameThemeDefault.css" />
  <link rel="stylesheet" href="css/StylesWebComponents.css" />
  <script src="js/ScriptsWebComponents.js"></script>
  <script src="js/ScriptsPageFrame.js"></script>
  <script src="js/ScriptsPageFramePagesBits.js"></script>
  <script src="js/ScriptsPageFrameKeyboard.js"></script>
  <!--<script src="js/ScriptsPageFrameNewRadioButtons.js"></script>-->
  <style>
    #github .note {
      border: 1px solid var(--dark);
      padding:0.75em 1.5em;
      margin-top:1.25em;
      margin-bottom:1.25em;
      background-color: var(--light);
      color: var(--dark);
      max-width:50em;
    }
    #github h2 {
      margin-top: 0.75em;
    }
    #github #pagetitle {
      border:2px double var(--dark);
    }
    #github form {
      border:none;
      padding:0.5em 1em;
    }
    #github form span {
      padding:0em 0.5em;
    }
    #github code-container {
      display: flex;
      position:relative;
      width:calc(100%);
      flex-direction: row;
      justify-content: space-between;
      /*border-top: 1px solid var(--dark);*/
    }
    #github code-banner {
      display: block;
      border: 2px solid var(--dark);
      border-top:none;
      border-bottom:none;
      padding: 0.25em 1em;
      font-family: 'Comic Sans MS', Tahoma;
      width: calc(100% + 0.5em);
      background-color: var(--atten);
    }
    #github code-display {
      display: block;
      border: 2px solid var(--dark);
      white-space: pre;
      padding: 0.75em 1em;
      font-family: Consolas, monospace;
      font-size:0.9em;
      width: calc(50% - 0.5em);
      overflow-x: auto;
      /*height:20em;*/
    }
    #github label {
      margin-right:1em;
    }
    #github fieldset {
      border:none;
    }
    #github #exeRight, #exeLeft {
      padding: 0.05em 0.5em;
      font-family: 'Comic Sans MS', Tahoma;
    }
    #github #hideLeft, #hideRight {
      padding: 0.05em 0.5em;
      font-family: 'Comic Sans MS', Tahoma;
    }
    #github .hide {
      display:none;
    }
    body {
      position:relative;
    }
    #github table.showcode {
      table-layout:fixed;
      width:calc(100% + 4em);
      margin-left:-2em;
    }
    #github th.leftblock {
      border: 2px solid var(--dark);
      /*border: 1px solid red;*/
      background-color: var(--menu);
      width: calc(50% - 0.5em);
      overflow-x: auto;
    }

    #github th.rightblock {
      border: 2px solid var(--dark);
      background-color: var(--menu);
      width: calc(50% - 0.5em);
      overflow-x: auto;
    }

    #github th.centerblock {
      border: none;
      padding: 0em;
      width:1em;
    }
    #github td.leftblock {
      border: 2px solid var(--dark);
      width: calc(50% - 0.5em);
      overflow-x: auto;
      background-color: #222233;
      color: #ffffbb;
    }

    #github td.leftblock summary {
      border:1px solid #ffffbb;
    }

    #github td.rightblock {
      border: 2px solid var(--dark);
      width: calc(50% - 0.5em) !important;
      overflow-x: auto;
      background-color: #222233;
      color: #ffffbb;
    }

    #github td.rightblock summary {
      border: 1px solid #ffffbb;
    }

    #github td.centerblock {
      border: none;
      padding: 0em;
    }
    #github pre {
      overflow-x: auto !important;
    }
    #github #left1 {
      /*height:45em;*/
      max-height: calc(100vh - 10em);
      overflow-y: auto;
    }

    #github #right1 {
      max-height: calc(100vh - 10em);
      overflow-y: auto;
    }
    #github #left2 {
      /*height:45em;*/
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }

    #github #right2 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }
    #github #left3 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }

    #github #right3 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }
    #github .mover {
      width:2em;
      padding: 0.05em;
      position:relative;
      right:-1.5em;
      top:0.6em;
    }
    #github #ruler {

      width:calc(50% - 1.5em);
      height:0.001em;
      margin:-0.45em 0em;
    }
    #github .btns {
      width:3em;
      border:none;
    }
    #github .codeSnap {
      font-family: Consolas, Courier New, Courier, monospace, sans-serif;
      font-size: small;
      font-weight: bold;
      background-color: #eee;
      padding: 10px;
    }
    #github .remotebutton {
      padding:0.25em 0.5em;
    }
    #github .rightPanelLinks {
      position: fixed;
      right: 0.0em;
      top: 15em;
      z-index: 100;
      background: var(--light);
      padding: 0.75em 0.25em;
      border: 1px solid var(--dark);
    }

    #github div.rightPanelLinks a {
      display: block;
      height: 1.5em;
      padding: 0em 0.25em;
    }
    #github hr.spread {
      margin: 0.75em 0em;
    }
    body {
      overflow-y:auto;
    }
  </style>
  <script>
    function saveScroll() {
      let main = document.querySelector("main");
      localStorage.setItem("DataCpp", main.scrollTop);
    //  let debug = scrollTop;
    //  console.log(debug);
    }
    function getScroll() {
      let scroll = localStorage.getItem("DataCpp");
      if (scroll) {
        scrollTop = parseInt(scroll, 10);
        let main = document.querySelector("main");
        main.scrollTop = scrollTop;
      //  let debug = scrollTop;
      //  console.log(debug);
      }
    }
  </script>

  <script>
    function remote() {
      window.open('https://godbolt.org/z/1cG1cTxd3', '_blank');
    }
  </script>
</head>
<body id="github" onload="initialize()" onbeforeunload="saveScroll()">

  <a id="Next" href="Bits_ObjectsCpp.html">Next</a>
  <a id="Prev" href="Bits_HelloCpp.html">Prev</a>

  <page-frame>
    <frame-header>
      <nav id="navbar"></nav>
    </frame-header>
    <main>
      <div id="about">about</div>
      <div id="page">Bits Data C++</div>
      <div id="modified">04/24/2023</div>
      <div id="hlp"></div>
      <a id="top"></a>
      <content id="content">
        <div class="rightPanelLinks">
          <a class="darkItem" href="Bits_DataCpp.html">C++</a>
          <a href="Bits_DataRust.html">Rust</a>
          <a href="Bits_DataCSharp.html">C#</a>
          <a href="Bits_DataPython.html">Python</a>
          <a href="Bits_DataJs.html">JvScrpt</a>
        </div>
        <header>
          <a target="_blank" class="repoLink" href="https://github.com/JimFawcett/Bits">Bits Repo Code</a>
          <a target="_blank" class="repoLink" href="../../BitsRepo.html" style="margin-right:7.5em;">Bits Repo Docs</a>
          <hgroup id="pagetitle">
            <h1 id="title">Bits_Data C++</h1>
            <h3 id="subtitle" class="indent">
              code, output, and build for C++ on Windows, macOS, and Linux
            </h3>
          </hgroup>
        </header>
        <t-b>
          These pages support comparison of fragments of code in several different
          languages, much as you might compare a sentence of English with one in Spanish to help you learn
          Spanish.
          </t-b>
          <t-b style="border:1px solid maroon; padding:0.25em 1em 0.5em 1em;">
            <h4 style="margin:0em 0em 0.25em 0em;">Synopsis:</h4>
            This page demonstrates simple uses of the most important C++ types.
            The purpose is to quickly acquire some familiarity with types and their uses.
            <hr class="spread" />
            <ul>
              <li>
                Primitive types and aggregates of primitive types are copyable.  Assignment and
                pass-by-value copies the source&apos;s value to the destination.
              </li>
              <li>
                For user-defined types 
                C++ provides special class methods - constructors, operators, and destructors.
                When properly implemented they provide instance syntax that mimics that of primitives.
              </li>
              <li>
                C++ supports move operations with move constructor and move assignment operator. 
                temporaries are moved when assigned or passed-by-value to the destination
                using the resources of the move source.  This is a transfer of ownership and
                makes the source invalid. Attempting to use a &quot;moved&quot; variable is,
                unfortunately, not a compile error.
              </li>
              <li>
                C++ supports making fixed references to either primitive or user-defined types. These may
                refer to instances in stack memory or in the native heap.
              </li>
              <li>
                C++ pointers and references are un-constrained and a frequent source of memory management
                errors.
              </li>
              <li>
                Here we begin to see significant differences between the languages, especially
                when comparing statically typed languages like C++, Rust, and C#, with dynamically typed
                languages like Python and JavaScript.
              </li>
            </ul>
            We will see how the C++ special methods are implemented in the next example.
            <div style="height:0.25em;"></div>
          </t-b>
        <!--<details>
          <summary class="darkItem">Demo Notes&nbsp;&nbsp;</summary>
          <t-b><hr /></t-b>
          <t-b>
            All of the languages covered in this demonstration support classes.  Each class provides
            a pattern for laying out a memory footprint and defines how data within are accessed.
          </t-b>
          <t-b>
            Three of the languages: C++, Rust, and C# provide generics.  Each generic function or class
            is a pattern for defining functions and classes of a specific type.  Thus a generic is a
            pattern for making patterns.
          </t-b>
          <t-b>
            The other two, Python and JavaScript, are dynamically typed and already support defining
            functions and classes for multiple types, e.g., no need for generics.
          </t-b>
          <t-b>
            This demonstration illustrates use of classes and objects, which for C++, Rust, and C#,
            are defined in a stackframe or in the heap or both. <strongs>All</strongs> data for Python and JavaScript are
            stored in managed heaps.
          </t-b>
          <t-b><hr /></t-b>
        </details>
        <t-b>
          The examples below show how to use library and user defined types with emphasis on
          illustrating syntax and basic operations.
        </t-b>-->
        <div style="height:0.25em;"></div>
        <h3 id="code">1.0 CodeSnaps</h3>
        <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote()" />
        <div style="display:flex; flex-direction:column;">
          <h4 id="source">Source Code</h4>
          <pre class="codeSnap">
/*---------------------------------------------------------
  Bits::Cpp::src::Cpp_Data.cpp
  - Display creation and simple use of basic types
*/
#include &lt;iostream&gt;  // std::cout
#include &lt;typeinfo&gt;  // typeid
#include &lt;memory&gt;    // std::unique_ptr
#include &lt;utility&gt;   // move()

/*
  Static Data Types:
    byte, bool, int, char, char16_t, char32_t, wchar_t
    float, double
    array, pointer, reference
    struct, class, enum class
  Qualifiers:
    short, long, const, unsigned

  Library Types:
    std::string, std::vector&lt;T&gt;, std::unordered_map&lt;K,V&gt;,
    std::unique_ptr&lt;T&gt;, std::shared_ptr&lt;T&gt;,
    and many more

  Operations:
    Primitive types can all be copied.
    Most library and user-defined types can be copied, moved,
    and deleted by providing member constructors and destructor.
    Often compiler generated functions work well, but for
    classes with pointer members developers must provide them.

  Processing:
    All types are static, operations run as native code, and no garbage
    collection is needed. Resources are returned at end of declr scope.
*/
/* C++ requires declaration before use */
template&lt;typename T&gt;
void showType(T t, const std::string &nm);
void showOp(const std::string& text);
void showLabel(const std::string& text, size_t n = 50);
void print(const std::string& txt = &quot;&quot;);
void println(const std::string& txt = &quot;&quot;);

void nl();

int main() {
    showLabel(&quot; Demonstrate C++ types&quot;);
    nl();

    /*-- values live in stack frame --*/
    showOp(&quot;initialize from literals&quot;);
    int t1 = int{3};
    showType(t1, &quot;t1&quot;);
    long long int t1a = 3;
    showType(t1a, &quot;t1a&quot;);

    println(&quot;-- copy construct --&quot;);
    auto t1b = t1a;
    showType(t1b, &quot;t1b&quot;);
    // double t1 = 3.1415927; // not allowed to redefine type of t1

    /*-- values live in heap when using new --*/
    println(&quot;-- store in heap --&quot;);
    double* t2 = new double{3.14159};
    showType(t2, &quot;t2&quot;);
    showType(*t2, &quot;*t2&quot;);
    delete(t2);  // see unique_ptr, below

    /*-- control block lives in stack, char data live in heap --*/
    println(&quot;-- string: control block in stack, data in heap --&quot;);
    auto t3 = std::string(&quot;Hello Data&quot;);  // move ctor - rhs is temp
    showType(t3, &quot;t3&quot;);
    println(&quot;-- C++ reference --&quot;);
    auto& t4 = t3;      // create reference, no copy or move
    showType(t4, &quot;t4&quot;);

    /*-- unique_ptr may not be copied but move allowed --*/
    println(&quot;-- unique_ptr owns data --&quot;);
    auto t5 = std::unique_ptr&lt;int&gt;(new int{-3});
    showType(std::move(t5), &quot;t5&quot;);  // unique_ptr can't be copied so move
    t5 = std::unique_ptr&lt;int&gt;(new int{-3});
    showType(*t5, &quot;*t5&quot;); // contents can be copied
    nl();

    showOp(&quot;t5 deleted when unique_ptr leaves scope&quot;);

    println(&quot;&#92;n  That's all Folks!&#92;n&#92;n&quot;);
}
/*---------------------------------------------------------
  Truncates input string to n chars. Beware: side-effects.
  - used in showType which may generate long type names.
*/
std::string truncate(const std::string& str, size_t n = 40) {
  std::string tmp = str;
  if(tmp.size() &lt; n) {
    return tmp;
  }
  tmp.resize(n);
  tmp += &quot;...&quot;;
  return tmp;
}
/*---------------------------------------------------------
  Show call name, static type, value, and size
*/
template&lt;typename T&gt;
void showType(T t, const std::string &nm) {
  std::cout &lt;&lt; &quot;&#92;n  &quot; &lt;&lt; nm;                // show name at call site
  std::cout &lt;&lt; &quot;: type: &quot; &lt;&lt; truncate(typeid(t).name());  // show type
  std::cout &lt;&lt; &quot;&#92;n  value: &quot; &lt;&lt; t;          // show value
  std::cout &lt;&lt; &quot;,  size:  &quot; &lt;&lt; sizeof(t);   // show size on stack
  std::cout &lt;&lt; &quot;&#92;n&quot;;
}
/*---------------------------------------------------------
  Show operation text surrounded by &quot;---&quot; strings
*/
void showOp(const std::string& text) {
  std::cout &lt;&lt; &quot;  --- &quot; &lt;&lt; text &lt;&lt; &quot; ---&quot; &lt;&lt; std::endl;
}
/*---------------------------------------------------------
  Show text surrounded by long lines of '-' characters
*/
void showLabel(const std::string& text, size_t n) {
  auto line = std::string(n, '-');
  std::cout &lt;&lt; line &lt;&lt; std::endl;
  std::cout &lt;&lt; &quot;  &quot; &lt;&lt; text &lt;&lt; std::endl;
  std::cout &lt;&lt; line &lt;&lt; std::endl;
}
void print(const std::string& txt) {
  std::cout &lt;&lt; &quot;&#92;n  &quot; &lt;&lt; txt;
}
void println(const std::string& txt) {
  std::cout &lt;&lt; &quot;&#92;n  &quot; &lt;&lt; txt &lt;&lt; &quot;&#92;n&quot;;
}
void nl() {
  std::cout &lt;&lt; std::endl;
}
          </pre>
          <h4 id="out">Output</h4>
          <pre class="codeSnap">
C:&#92;github&#92;JimFawcett&#92;Bits&#92;Cpp&#92;Cpp_Data&#92;build
&gt; ./Debug/Cpp_Data
--------------------------------------------------
   Demonstrate C++ types
--------------------------------------------------

  --- initialize from literals ---

  t1: type: int
  value: 3,  size:  4

  t1a: type: __int64
  value: 3,  size:  8

  -- copy construct --

  t1b: type: __int64
  value: 3,  size:  8

  -- store in heap --

  t2: type: double * __ptr64
  value: 00000172B9F4EE40,  size:  8

  *t2: type: double
  value: 3.14159,  size:  8

  -- string: control block in stack, data in heap --

  t3: type: class std::basic_string&lt;char,struct std:...
  value: Hello Data,  size:  40

  -- C++ reference --

  t4: type: class std::basic_string&lt;char,struct std:...
  value: Hello Data,  size:  40

  -- unique_ptr owns data --

  t5: type: class std::unique_ptr&lt;int,struct std::de...
  value: 00000172B9F46040,  size:  8

  *t5: type: int
  value: -3,  size:  4

  --- t5 deleted when unique_ptr leaves scope ---


  That's all Folks!


C:&#92;github&#92;JimFawcett&#92;Bits&#92;Cpp&#92;Cpp_Data&#92;build
&gt;
          </pre>
          <h4 id="build">Build</h4>
          <pre class="codeSnap">
C:&#92;github&#92;JimFawcett&#92;Bits&#92;Cpp&#92;Cpp_Data&#92;build
&gt; cmake --build .
MSBuild version 17.4.1+9a89d02ff for .NET Framework
  Cpp_Data.vcxproj -&gt; C:&#92;github&#92;JimFawcett&#92;Bits&#92;Cpp&#92;Cpp_D
  ata&#92;build&#92;Debug&#92;Cpp_Data.exe
C:&#92;github&#92;JimFawcett&#92;Bits&#92;Cpp&#92;Cpp_Data&#92;build
&gt;
          </pre>

        <h3 id="ide">2.0 VS Code View</h3>
        <t-b>
          The code for this demo is available in 
          <a target="_blank" href="https://github.com/JimFawcett/Bits">github.com/JimFawcett/Bits</a>. If you click on
          the Code dropdown you can clone the repository of all code for these demos to your local drive.
          Then, it is easy to bring up any example, in any of the languages, in VS Code.
        </t-b>
        <t-b>
          Here, we do that for Cpp\Cpp_Data.
        </t-b>
        <photosizer-block src="pictures/VS_Code_Cpp_Data.JPG" width="800" class="photoSizerBlock left"
          style="overflow-x:auto;"
        >
          <span style="font-family:'Comic Sans MS';">Figure 1. VS Code IDE</span>
        </photosizer-block>
        <photosizer-block src="pictures/LaunchJSON_Cpp_Data.JPG" width="700" class="photoSizerBlock left"
          style="overflow-x:auto;"
        >
          <span style="font-family:'Comic Sans MS';">Figure 2. Launch.JSON</span>
        </photosizer-block>
        <!--<photosizer-block src="pictures/VS_Code_Cpp_Plugins.jpg" width="700" class="photoSizerBlock left">
          <span style="font-family:'Comic Sans MS';">Figure 3. C++ Plugins</span>
        </photosizer-block>-->

        <div style="height:0.75em;" class="clear"></div>
        <h3 id="refs">3.0 References</h3>
        <table class="indent">
          <tr>
            <th class="darkItem">Reference</th><th class="darkItem">Description</th>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="../../CppStoryRepo.html">C++ Story</a>
            </td>
            <td>
              E-book with thirteen chapters covering most of intermediate C++
            </td>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="../CppBites/CppBites_Intro.html">C++ Bites</a>
            </td>
            <td>
              Relatively short feature discussions
            </td>
          </tr>
        </table>
        <div style="height:10em;"></div>
      </content>
      <a id="bottom"></a>
      <page-TOC id="pages" style="display:none;">
      </page-TOC>
      <page-sections id="sections" style="display:flex;">
        <menu-elem style="width:0.0em">&nbsp;</menu-elem>
        <menu-elem class="secElem"><a href="#bottom">bottom</a></menu-elem>
        <menu-elem class="secElem"><a href="#refs">refs</a></menu-elem>
        <menu-elem class="secElem"><a href="#ide">VS Code</a></menu-elem>
        <menu-elem class="secElem"><a href="#build">bld</a></menu-elem>
        <menu-elem class="secElem"><a href="#out">out</a></menu-elem>
        <menu-elem class="secElem"><a href="#source">src</a></menu-elem>
        <menu-elem class="secElem"><a href="#code">codeSnaps</a></menu-elem>
        <menu-elem class="secElem"><a href="#top">top</a></menu-elem>
      </page-sections>
    </main>
    <frame-footer>
      <menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem id="nextLink2" onclick="bottomMenu.next()">Next</menu-elem>
      <menu-elem id="prevLink2" onclick="bottomMenu.prev()">Prev</menu-elem>
      <menu-elem id="pgbtn" onclick="bottomMenu.pages()">Pages</menu-elem>
      <menu-elem onclick="bottomMenu.sections()">Sections</menu-elem>
      <menu-elem onclick="bottomMenu.about()">About</menu-elem>
      <menu-elem id="kysbtn" onclick="storyHlpMenu.keys()">Keys</menu-elem>
      <!--<menu-item style="width:1.0em;">&nbsp;</menu-item>-->
    </frame-footer>
  </page-frame>
  <script>
    //localStorage.clear();
    getScroll();
  </script>
</body>
</html>