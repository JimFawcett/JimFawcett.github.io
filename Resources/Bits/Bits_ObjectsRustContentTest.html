<!DOCTYPE html>
<html>
<!--
  Bits_ObjectsRust.html
-->
<head>
  <title>Rust Objects</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/StylesPhoto.css" />
  <link rel="stylesheet" href="css/StylesSizerComp.css" />
  <!-- PageFrame infrastructure -->
  <link rel="stylesheet" href="css/StylesPageFrameDefaults.css" />
  <link rel="stylesheet" href="css/StylesPageFrameStructure.css" />
  <link rel="stylesheet" href="css/StylesPageFrameMenus.css" />
  <link rel="stylesheet" href="css/StylesPageFrameThemeRust.css" />
  <link rel="stylesheet" href="css/StylesWebComponents.css" />
  <link rel="stylesheet" href="css/StylesSplitterBar.css" />
  <script src="js/ScriptsWebComponents.js"></script>
  <script src="js/ScriptsSplitterBar.js"></script>
  <script src="js/ScriptsPageFrame.js"></script>
  <script src="js/ScriptsPageFramePagesBitsRust.js"></script>
  <script src="js/ScriptsPageFrameKeyboard.js"></script>
  <link rel="stylesheet" href="css/prism.css" />
  <script src="js/prism.js"></script>
  <!--<script src="js/ScriptsPageFrameNewRadioButtons.js"></script>-->
  <style>
    #github .note {
      border: 1px solid var(--dark);
      padding: 0.75em 1.5em;
      margin-top: 1.25em;
      margin-bottom: 1.25em;
      background-color: var(--light);
      color: var(--dark);
      max-width: 50em;
    }

    #github h2 {
      margin-top: 0.75em;
    }

    #github #pagetitle {
      border: 2px double var(--dark);
      /* line-height:1.5em; */
    }

    #github .hide {
      display: none;
    }

    body {
      position: relative;
      line-height: 1.25em;
    }

    #github .remotebutton {
      padding: 0.25em 0.5em;
    }

    #github .rightPanelLinks {
      position: fixed;
      right: 0.0em;
      top: 15em;
      z-index: 100;
      background: var(--light);
      padding: 0.75em 0.25em;
      border: 1px solid var(--dark);
    }

    #github div.rightPanelLinks a {
      display: block;
      height: 1.5em;
      padding: 0em 0.25em;
    }

    #github hr.spread {
      margin: 0.75em 0em;
    }

    #github {
      user-select: none;
    }

    .focus {
      padding: 0.5em 1.0em 0.5em 1.0em;
      /*border:1px solid red;*/
    }

    *.focus ul {
      padding-top: -0.5em;
      /*background-color:green;*/
    }

    .cat {
      text-align: left;
      background-color: var(--menu);
    }

    #github .codeSnap {
      font-family: Consolas, Courier New, Courier, monospace, sans-serif;
      font-size: small;
      font-weight: bold;
      background-color: #eee;
      padding: 1em 1.5em;
      margin-right: 0.5em;
    }

    #github pre {
      overflow-x: auto;
      /* user-select: all; */
    }

    code-style {
      white-space: pre;
      font-family: Consolas;
      font-size: 0.95em;
      font-weight: bold;
    }

    .blockDouble {
      position: relative;
      display: grid;
      grid-template-columns: 1fr 1fr;
      border: 1px solid var(--dark);
      overflow-x: auto;
      overflow-y: hidden;
      margin-right: 0.75em;
      padding: 0.75em;
      padding-right: 0em;
    }

    .blockSingle {
      position: relative;
      border: 1px solid var(--dark);
      overflow-x: auto;
      overflow-y: hidden;
      margin-top: 1.5em;
      margin-right: 0.75em;
      padding: 0.0em;
      padding-right: 0em;
    }

    .codewrap {
      padding: 0.5em;
      padding-right: 0em;
      margin-right:0.75em;
      overflow-y: auto;
      border: 1px dashed blue;
      font-size:0.80em;
    }

    #github div.block t-b {
      max-width: 100%;
      padding-left: 0.5em;
    }

    .textwrap {
      position: relative;
      padding-right: 1em;
      padding-left: 1em;
      margin-right: 0.5em;
      overflow-y: scroll;
      border: 1px dashed red;
    }

    table {
      margin-right: 0.75em;
    }

    #github .scrollable {
      overflow: auto;
    }
  </style>
  <style>
    #github .info {
      position: relative;
      top: 0em;
      float: right;
      font-size: large;
      font-weight: bold;
      text-align: center;
      background-color: var(--dark);
      border-radius: 8px;
      color: var(--light);
      width: 1.25em;
      cursor: pointer;
      user-select: none;
    }

    #github .infoKill {
      position: relative;
      top: 0.05em;
      float: right;
      font-size: large;
      font-weight: bold;
      text-align: center;
      background-color: var(--light);
      border-radius: 8px;
      color: var(--dark);
      width: 1.25em;
      cursor: pointer;
      user-select: none;
      margin: 0.25em;
    }

    #github .txt {
      display: none;
      position: absolute;
      right: 4.5em;
      width: 20em;
      z-index: 10;
      color: var(--dark);
      font-size: small;
      background-color: var(--light);
      border: 2px solid var(--dark);
      padding: 0em 0.5em;
      overflow-y: visible;
    }

  </style>
  <script>
    function closeInfos() {
      var elems = document.querySelectorAll('.txt');
      for (let i = 0; i < elems.length; ++i) {
        if (elems[i].style.display === "block") {
          elems[i].style.display = "none";
        }
      }
    }
    function toggleInfo(dst) {
      var elem = document.getElementById(dst);
      if (elem.style.display === "none" || elem.style.display === "") {
        elem.style.display = "block";
      }
      else {
        elem.style.display = "none";
      }
    }
    function toggleInfoRel(src, dst, adj = 0) {
      var txtcont = document.getElementById(dst);
      var elemtop = src.offsetTop;
      txtcont.style.top = parseInt(elemtop - 25 - adj) + 'px';
      var top = txtcont.style.top;
      if (txtcont.style.display === "none" || txtcont.style.display === "") {
        txtcont.style.display = "block";
      }
      else {
        txtcont.style.display = "none";
      }
    }
  </script>
  <script>
    function setScroll() {
      let main = document.querySelector("#main");
      const scrollPosition = main.scrollTop;
      localStorage.setItem('scrollPositionDataRust', scrollPosition);
      let scroller = document.getElementById("scrollY")
      scroller.innerHTML = Math.trunc(scrollPosition);
    }
    function gotoLastScroll() {
      let main = document.querySelector("#main");
      const scrollPosition = localStorage.getItem('scrollPositionDataRust');
      if (scrollPosition) {
        main.scrollTo(0, scrollPosition);
      }
      main.addEventListener('scroll', setScroll);
    }
    function load() {
      //initialize();
      gotoLastScroll();
    }
  </script>

  <script>
    function remote() {
      window.open('https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=5e736a70bf0172f83cdba38b8d304ea3', '_blank');
    }
  </script>
</head>
<body id="github" onload="load()">

  <a id="Next" href="Bits_GenericRust.html">Next</a>
  <a id="Prev" href="Bits_DataRust.html">Prev</a>

  <page-frame>
    <!-- <frame-header>
      <nav id="navbar"></nav>
    </frame-header> -->
    <main id="main">
      <div id="about">about</div>
      <div id="page">Bits Objects Rust</div>
      <div id="modified">12/10/2023</div>
      <div id="hlp"></div>
      <a id="top"></a>
      <content>
        <!-- <div class="rightPanelLinks">
    <a target="_parent" href="Bits_ObjectsCpp.html">C++</a>
    <a target="_parent" class="darkItem" href="Bits_ObjectsRust.html">Rust</a>
    <a target="_parent" href="Bits_ObjectsCSharp.html">C#</a>
    <a target="_parent" href="Bits_ObjectsPython.html">Python</a>
    <a target="_parent" href="Bits_ObjectsJs.html">JvScrpt</a>
  </div> -->
        <div id="scrollY"
             style="position:fixed; bottom:0.50em; right:1.50em; width:max-content; height:1.5em;
           text-align:right; padding:0.15em 0.5em; border:1px solid red;">
          0
        </div>
        <header>
          <a target="_blank" class="repoLink" href="https://github.com/JimFawcett/Bits">Bits Repo Code</a>
          <a target="_blank" class="repoLink" href="../../BitsRepo.html" style="margin-right:7.5em;">Bits Repo Docs</a>
          <hgroup id="pagetitle">
            <h1 id="title">Bits: Rust Objects</h1>
            <h3 id="subtitle" class="indent">
              library and user-defined structs and objects
            </h3>
          </hgroup>
        </header>
        <t-b id="syn" style="border:1px solid maroon; padding:0.25em 1em 0.5em 1em;">
          <h4 style="margin:0em 0em 0.25em 0em;">Synopsis:</h4>
          This page demonstrates uses of Rust User-Defined types and their objects.
          The purpose is to quickly acquire some familiarity with user-defined types
          and their implementations.
          <hr class="spread" />
          <ul>
            <li>
              Syntactically, Rust uses the keyword &quot;struct&quot; instead of &quot;class&quot; to do
              the same things the other languages do, within the constraints of its language design.
            </li>
            <li>
              Unlike C++, Rust does not define special class methods. Rust types are either copy or move,
              and most user-defined types are move, so it has no need for them. This eliminates one source
              of implementation complexity.
            </li>
            <li>
              The compiler will, if asked with an attribute, auto-generate some operations like clone.
            </li>
            <li>
              Also, this is the first set of examples to partition code into several files.
              That supports readability, may improve translation times, and makes maintenance
              significantly easier.
            </li>
          </ul>
          <div style="height:0.5em;"></div>
        </t-b>
        <details id="notes">
          <summary class="darkItem">Demo Notes&nbsp;&nbsp;</summary>
          <t-b><hr /></t-b>
          <t-b>
            All of the languages covered in this demonstration support classes.  Each class provides
            a pattern for laying out a memory footprint and defines how data within are accessed.
          </t-b>
          <t-b>
            Unlike all the other languages, Rust uses the struct type to create patterns for object
            creation.  This is simply a syntactical change. Everything that the other languages do with
            classes Rust does with structs, within the constraints of its language design model.
          </t-b>
          <t-b>
            Three of the languages: C++, Rust, and C# provide generics.  Each generic function or class
            is a pattern for defining functions and classes of a specific type.  Thus a generic is a
            pattern for making patterns.
          </t-b>
          <t-b>
            The other two, Python and JavaScript, are dynamically typed and already support defining
            functions and classes for multiple types, e.g., no need for generics.
          </t-b>
          <t-b>
            This demonstration illustrates use of classes and objects, which for C++, Rust, and C#,
            are defined in a stackframe or in the heap or both. <strongs>All</strongs> data for Python and JavaScript are
            stored in managed heaps.
          </t-b>
          <t-b><hr /></t-b>
        </details>
        <t-b>
          The examples below show how to create user defined types with emphasis on
          illustrating syntax and basic operations.
        </t-b>
        <div style="height:0.25em;"></div>
        <h3 id="code">1.0 Source code</h3>
        <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote()" />
        <h3 id="points">1.1 Source Code - Points.rs</h3>
        <t-b>
          A Rust struct is a pattern for laying out data in memory with member functions,
          called methods, for all of its operations.  Making data members private ensures
          that class methods have valid data for their operations. A class designer may
          choose to selectively allow user data modification.
        </t-b>
        <t-b style="margin-bottom:1em;">
          This block presents code that defines a Rust type, Point4D. It defines the
          data held by instances of the type, three floating point coordinates and
          a <c-s>DateTime&lt;Local&gt;</c-s> variable, and methods to create, copy, assign, modify
          and destroy instances.
        </t-b>
        <t-b>
          You can find all the code for this demo
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master/Rust/rust_objects/src">here</a>
          and code for the entire Bits repository
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master">here</a>.
        </t-b>
        <div class="blockSingle">
          <div class="codewrap" style="float:left; width:60%;">
            <pre style="font-size:1em; margin-right:0.75em;">
<code class="language-rust">/*-------------------------------------------------------------------
  points.rs
  - defines type Point4D representing points in space-time
-------------------------------------------------------------------*/

use std::fmt::*;
use chrono::prelude::*;

/*---------------------------------------------------------
  - Declare Point4D struct, like a C++ class
  - Request compiler implement traits Debug & Clone
*/
#[derive(Debug, Clone)]
pub struct Point4D {  // public instance, private data
  x: f64,
  y: f64,
  z: f64,
  t: DateTime&lt;Local&gt;,
}
/*-- implement constructor function new --*/
impl Point4D {
  pub fn new() -&gt; Point4D {
    Point4D { x: 0.0, y: 0.0, z: 0.0, t: Local::now() }
  }
  /*------------------------------------------------
    These methods can be used to set or retrieve
    values of Point4D instance coordinates, as they
    return a mutable reference. Note similarity with
    C++ code.
  */
  pub fn coor_x(&mut self) -&gt; &mut f64 {
    &mut self.x
  }
  pub fn coor_y(&mut self) -&gt; &mut f64 {
    &mut self.y
  }
  pub fn coor_z(&mut self) -&gt; &mut f64 {
    &mut self.z
  }
  pub fn time(&self) -&gt; String {
    self.t.format(&quot;%a %b %e %Y, %T&quot;).to_string()
  }
  pub fn update_time(&mut self) {
    self.t = Utc::now().with_timezone(&Local);
  }
  /*------------------------------------------------
    An alternate design for mutating coordinates.
    This set has twice as many methods, but may
    make access and mutation more obvious when
    reading source code.
  */
  pub fn get_x(&self) -> &f64 {
    &self.x
  }
  pub fn get_y(&self) -> &f64 {
    &self.y
  }
  pub fn get_z(&self) -> &f64 {
    &self.z
  }
  pub fn set_x(&mut self, x: f64) {
    self.x = x
  }
  pub fn set_y(&mut self, y: f64) {
    self.y = y
  }
  pub fn set_z(&mut self, z: f64) {
    self.z = z
  }
  /*-- this design would continue for y and z coords --*/
  /*
    For simple types like this it would be reasonable to
    make x, y, z public and remove the getter and setter
    functions.
  */
  pub fn show(&self, nm:&str) {
    print!(&quot;{nm}: Point4D {{&#92;n  &quot;);
    print!(&quot;{0}, &quot;, self.x);
    print!(&quot;{0}, &quot;, self.y);
    println!(&quot;{0},&quot;, self.z);
    println!(&quot;  {}&quot;, Local::now().format(&quot;%a %b %e %Y, %T&quot;));
    println!(&quot;}}&quot;);
  }
}
              </code>
            </pre>
          </div>
          <div class="textwrap">
            <h4>Concept:</h4>
            <t-b>
              Point4D holds data for a point in 3 dimensional space and a time
              when something was at that point.
            </t-b>
            <t-b>
              These points could be collected into a vector to represent a trajectory
              of an aircraft or a machine tool cutting edge.
            </t-b>
            <h4>Rust struct syntax:</h4>
            <t-b>
              Rust uses structs as patterns for laying out objects in memory,
              much like C++ uses classes.
            </t-b>
            <t-b>
              Methods are not declared within the struct body.  Instead, they are
              defined in a seperate &quot;impl&quot; scope.
            </t-b>
            <t-b>
              Unlike C++, the input reference to self must be supplied explicitly, where
              C++ passes that implicitly, e.g., for C++ it doesn&apos;t appear in user code.
            </t-b>
            <t-b>
              Mutability must be explicit.  If not declared, any attempt to change
              value will fail to compile.
            </t-b>
            <t-b>
              Return types are declared explicitly, as shown here for the
              return of a string representation of Point4D&apos;s
              value of local time.
            </t-b>
            <t-b>
              <c-s>t:DateTime&lt;Local&gt;</c-s> is converted to a string
              using its format method.
            </t-b>
            <h4>Special struct methods:</h4>
            <t-b>
              Unlike C++, Rust does not provide, nor require special methods.
            </t-b>
            <t-b>
              Rust construction and assignment are always move operations, so there
              is no corresponding set of copy operations. Note that Rust structs
              do support making clones so code can move clones into the destination
              instances, ensuring that the original cloned instance remains valid.
            </t-b>
            <t-b>
              A clone operation copies resources from the cloned instance to the
              new clone.  It is not an ownership transfer of those resources.
            </t-b>
            <t-b>
              For purposes of performance, idomatic Rust code avoids copy operations
              wherever possible, and when used, makes that use explicit with a call
              to <c-s>clone()</c-s>.
            </t-b>
            <t-b>
              Note that the <c-s>#[derive(Debug, Clone)]</c-s> just above the Point4D
              declaration requires the Rust compiler
              to generate <c-s>Debug</c-s> and <c-s>Clone</c-s> traits.  A trait is very similar to a
              C# interface, declaring methods like <c-s>clone()</c-s> for the
              <c-s>Clone</c-s> trait.
            </t-b>
            <t-b>
              The
              <c-s><a target="_blank" href="https://doc.rust-lang.org/std/fmt/trait.Debug.html">Debug</a></c-s>
              trait declares the <c-s>fmt</c-s> method and is used
              to deplay a simple, debug friendly, representation of its argument.
              In this case the argument will be an instance of Point4D.
            </t-b>
          </div>
        </div>
        <h3 id="demo">1.2 main.rs</h3>
        <t-b>
          All code in this section is used to conduct demonstrations, e.g., it is
          the contents of <c-s>main()</c-s>. That is broken up into sections for
          declarations, library types, and a user-defined types in each of the
          following code blocks, respectively.
        </t-b>
        <h3 id="demodclr">1.2.1 Declarations</h3>
        <t-b>
          This first code block has only module declarations. It has no executable
          code, so there is no output.
        </t-b>
        <t-b>
          You can find all the code for this demo
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master/Rust/rust_objects/src">here</a>
          and code for the entire Bits repository
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master">here</a>.
        </t-b>
        <div class="blockSingle">
          <div class="codewrap" style="float:left; width:60%;">
            <pre>
<code class="language-rust">#![allow(dead_code)]
#![allow(clippy::approx_constant)]

/*---------------------------------------------------------
  rust_objects::main.rs
  - Demonstrates creation and use of Rust objects
  - Rust uses struct instead of class to create objects
*/
/*-----------------------------------------------
Note:
Find all Bits code, including this in
https://github.com/JimFawcett/Bits
You can clone the repo from this link.
-----------------------------------------------*/

mod analysis_objects;     // identify module source file
use analysis_objects::*;  // import public functs and types
mod points_objects;       // identify module source file
use points_objects::*;    // import public functs and types              </code>
            </pre>
          </div>
          <div class="textwrap">
            <h4>Modules:</h4>
            <t-b>
              This is the first Rust demonstration that partitions its code into
              more than one file.
            </t-b>
            <t-b>
              Rust defines modules to support partitioning.  Here we have two of
              them, &quot;analysis_objects&quot; and &quot;points_objects&quot;
            </t-b>
            <t-b>
              A Rust module is simply a file that implements program functionality
              focused in a single area, but has no main function, as only one main
              is allowed per program.
            </t-b>
            <t-b>
              Both module files, analysis_objects.rs and points_objects.rs
              are placed in the src directory along with main.rs. That makes
              it simple to import them, e.g., no path required.
            </t-b>
            <t-b>
              That also means that a module can depend on code in another module.
            </t-b>
          </div>
        </div>
        <h3 id="demolib">1.2.2 standard library objects</h3>
        <t-b>
          This Bit demonstration starts by creating and using operations of instances of
          <c-s>String</c-s> and <c-s>Vector&lt;T&gt;</c-s>, both defined as part of the
          <a target="_blank" href="https://doc.rust-lang.org/std/">standard library</a>.
          The code consists of a single function <c-s>demo_standard_objects()</c-s>.
        </t-b>
        <t-b>
          You can find all the code for this demo
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master/Rust/rust_objects/src">here</a>
          and code for the entire Bits repository
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master">here</a>.
        </t-b>
        <iframe id="pgframe"
                src="https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=47becda220c9dba7128f6322b0dd66de"
                style="width:99%; height:38em;">
        </iframe>
        <t-b>

        </t-b>
        <iframe id="pgframe2"
                src="https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAMzwBtMA7AQwFtMQByARg9KtQYEAysib0QXACx8BBAKoBnTAAUAHpwAMvAFYTStJg1DEArgoKkl9ZATwDKjdAGFUtEywYgAHKUcAZPAZMADl3ACNMYhAAJi5SAAdUBUI7Bhc3D28EpJSBAKDQlgio2MtMa1sBIQImYgJ0908fK0wbVOragnyQ8MiYuPNOhszmmrruwuL%2BgEpLVBNiZHYOAHoVgGosFlR183R1gDVW9YBadf5idYAhQgUAfQAlMwIAeTDtVoIFADoEAhZaABSDQAQWBIKoDF2CFQAHc7rYCPQIAoQIDogA2czEabrQEAdiu4PWJPW9AI6zCJCwl0BAGYACLrCAab7fSQaabfFhMeIQAlOO4CvHRaIndHRLloWgVEBoulOarEQLAenYCDTelE0Gk9bxZWCWgMMCQCUEon4hkS0gijFU4g0zV07Ug3X6wJI42m0Uk80Eq2im0KJ0ut0Gz0m/miv2W622%2B2OrXg/3gyHQuF3VB81HorEEHF4wnE0nuw1eqNik5nc3ygBi/tOVbjwaToJToLTPMCGsLodJChh8MRyIlWx2e3WADdPiQJSHiyTyesWCYKZOQIdWvSnHg6dE1XjGVPWibAQBWK5xdbRG10m039Zcc9W50LvXho2RiXr3t1lNnpwGDjSd5x1Uk3wHDMswrJdJy4Q8mUndYN22ad1jQBhsRMNoBDnVtXVJJcVzXeD6UQrUSTWZdUDQjCsJwoCwJJUsI29aI4I3Gt6XrWMAKAwMpy4UCCMojYkIYOF1kCScxDwdAbQiRhqOnfYNxMBg0BYNhBHWIhdkwTB1kiYgSGXBRVSY9YqJYz82K4ukeIDB8QPw3UIMHTM%2BW/J8Lx8pkyNOaJkPWARDNQKhl0MABPEL4kiJhKkwvDX0suDz0vZ8EMC1ySw/ctvM4wk/14wDgKE/D3KgrzRSQgK4O%2BZBaFC4LUMMpgFGSYAGG0ilwvQpqgmSvsSVqo96sa0KNRy0T%2BuatB4jwTAFEEsAOGW4glvmRYlt2HY4Kk5bzDoWgp1k9A3xs/KasKq5iqcm0XJSkT3w9WyKw439uP/UqBLg4S3MsyD4WgiUmCy3NJ3Srg2TpZ8hrfKjkA2hK2uIYgmBiqgTJYY8bFMhRaDwJY3yXJhOMxdLd33M9/KPCGoZhuGnrDV6ruiMnPoc77%2BIfJh/vAwGPJBmqgrwZbpQqc5sd2QmlltSHfMZmn4cs2CgoCiBoe%2BOkuR5Lz8R3YU0ovPBnylVxZXlJwjmQbcqbVNUpuZ3LWa/EWbru88fucyUKsFqr3qyycgpQmi2o6vAup6oaAee0bEP3Z3mLyt32I9r6Sp5h7%2BZm4P1gk2EpIYGTCfkykDKhVrzsshGNht3YiA2/ZAnWBBMF5Srgeq6IiNXVu7mnZAsquVB1BAIJYX5ACJTZb4vbw0Uc7JTAKWI/vB%2BH0e5QniBB9PXz71vG1pHWM8zeml6y1ThAB9adOuczuMb8HpfO88isIAAKmf1pNQvan/LRCJEefci8L5fx/sgP%2BVwAEimAUyROw1L6sQrJA%2B%2Bjkn63ygRfN%2BwtoiQPSrA9E8Drw2jMDtJgq4dg0kwFQFWz0CH/0ysQgKiCLopzYmgzmGCBKQNfm2WMbZQQcFmLQTgZ5eCeA4FoUgqBOBPHMLtBYct0R0h4KQAgmgRGzAANYgDPJIb4Z4uAYjpF4DEXgACcGhJBeHxBiOIYiOCSEkVo2RnBeCog0BorRsw4CwCQJgVQrQqFkAoBAWowAFDKEMOUIQg4pHqM0gtAwiUYlBFoPEuEUiZHJLoH0YgXB8QclIHk%2BgxBgisGWLwMpkQXiriybCHJvAgmtBBMQKJHjfDBOQNUfAUjeD8EECIMQ7ApAyEEIoFQ6hpE6D0AYIwIBTDmH0HgMIqJICzCzIlVEHBeBhzRnJJa8BZimEEHgNgAAVVArgNkajmMosZlgCD9PSXEhJnB1H5gMp83gsJ0bxF%2BaI8RrjZnuI4NgHpoT1jLIIEPaGxTvgaGZAoiw6xcCEFMqooSvBNGzOmLokAkgzzsi8HSBxaiNCWOMdEOklj9CcBcaQZp4LPEgG8XirQBKGUcGiKCmRci9k%2BPxbMacxBkj2EkEAA"
                style="width:99%; height:38em;">
        </iframe>
        <t-b>

        </t-b>
        <div class="blockSingle">
          <splitter-container id="container">
            <first-item id="fig1-first" style="width:55%;">
              <div class="codewrap">
                <pre>
<code class="language-rust">fn demo_standard_objects() {

  show_note(
    &quot;std::library objects: string and vector&lt;T&gt;&quot;, 46
  );
  nl();

  /*-- create instance of String ----*/
  show_op(&quot;let mut s1 = &#92;&quot;a string&#92;&quot;.to_string()&quot;);
  let mut s1 = &quot;a string&quot;.to_string();
  println!(&quot;  s1:String : {:?}&quot;, s1);
  nl();
  /*-- show type of s1 --------------*/
  show_op(&quot;show_type_scalar(&s1, &#92;&quot;&s1&#92;&quot;)&quot;);
  show_type_scalar(&s1, &quot;&s1&quot;);
  nl();
  /*-- one of many operations -------*/
  show_op(&quot;s1.push_str(&#92;&quot; and more&#92;&quot;);&quot;);
  s1.push_str(&quot; and more&quot;);
  println!(&quot;  s1:String : {:?}&quot;, s1);
  nl();
  /*-- move construction --*/
  show_op(&quot;let s2 = s1 : move construction&quot;);
  let s2 = s1;
  println!(&quot;  s2:String : {:?}&quot;, s2);
  println!(&quot;  s1 now invalid&#92;n&quot;);
  // println!(&quot;  s1:String : {:?}&#92;n&quot;, s1);
  // uncomment line above to see error message

  /*-- move assignment --*/
  show_op(&quot;s1 = s2 : move assignment&quot;);
  let s1 = s2;
  println!(&quot;  s1:String : {:?}&quot;, s1);
  println!(&quot;  s2 now invalid&#92;n&quot;);
  // println!(&quot;  s2:String : {:?}&#92;n&quot;, s2);
  // uncomment line above to see error message

  //https://jimfawcett.github.io/Resources/RustBites/RustBites_Strings.html

  /*-- create instance of Vec&lt;i32&gt; --*/
  show_op(&quot;let mut v:Vec&lt;i32&gt; = vec![1, 2, 3, 2, 1];&quot;);
  let mut v: Vec&lt;i32&gt; = vec![1, 2, 3, 2, 1];
  println!(&quot;  v:Vec&lt;i32&gt; : {:?}&quot;, v);
  nl();
  /*-- show type of v ---------------*/
  show_op(&quot;show_type_scalar(&v, &#92;&quot;&v&#92;&quot;)&quot;);
  show_type_scalar(&v, &quot;&v&quot;);
  nl();
  /*-- show one of many operations --*/
  show_op(&quot;v.push(42);&quot;);
  v.push(42);
  println!(&quot;  v:Vec&lt;i32&gt; : {:?}&quot;, v);
  //https://jimfawcett.github.io/Resources/RustBites/RustBites_DataStr.html#vec
}                </code>
              </pre>
              </div>
            </first-item>
            <splitter-bar id="fig1-seperator"></splitter-bar>
            <second-item id="fig1-second" style="width:45%;">
              <div class="codewrap">
                <pre>
                <code class="language-rust">

----------------------------------------------
  std::library objects: string and vector&lt;T&gt;
----------------------------------------------

--- let mut s1 = &quot;a string&quot;.to_string() ---
  s1:String : &quot;a string&quot;

--- show_type_scalar(&s1, &quot;&s1&quot;) ---
&quot;&s1&quot;, type: &quot;alloc::string::String&quot;
value: &quot;a string&quot;, size: 24

--- s1.push_str(&quot; and more&quot;); ---
  s1:String : &quot;a string and more&quot;

--- let s2 = s1 : move construction ---
  s2:String : &quot;a string and more&quot;
  s1 now invalid

--- s1 = s2 : move assignment ---
  s1:String : &quot;a string and more&quot;
  s2 now invalid

--- let mut v:Vec&lt;i32&gt; = vec![1, 2, 3, 2, 1]; ---
  v:Vec&lt;i32&gt; : [1, 2, 3, 2, 1]

--- show_type_scalar(&v, &quot;&v&quot;) ---
&quot;&v&quot;, type: &quot;alloc::vec::Vec&lt;i32&gt;&quot;
value: [1, 2, 3, 2, 1], size: 24

--- v.push(42); ---
  v:Vec&lt;i32&gt; : [1, 2, 3, 2, 1, 42]






















</code></pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <h3 id="demousr">1.2.3 user-defined objects</h3>
        <t-b>
          Code in this block demonstrates creation and use of instances of the
          user-defined type <c-s>Point4D</c-s>.  All the code is created as part
          of a single function: <c-s>demo_user_defined_objects()</c-s>.
        </t-b>
        <t-b>
          You can find all the code for this demo
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master/Rust/rust_objects/src">here</a>
          and code for the entire Bits repository
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master">here</a>.
        </t-b>
        <div class="blockSingle">
          <splitter-container id="container">
            <first-item id="fig2-first" style="width:55%;">
              <div class="codewrap">
                <pre>
                <code class="language-rust">
fn demo_user_defined_objects() {

  show_note(&quot;instances of user-defined type&quot;, 35);
  nl();

  /*-- create instance of Point4D ---*/
  show_op(&quot;let mut p1 = Point4D::new()&quot;);
  let mut p1 = Point4D::new();
  p1.show(&quot;p1&quot;);
  p1.set_x(42.0);
  p1.set_y(-3.0);
  p1.set_z(2.0);
  p1.show(&quot;p1&quot;);
  /*-- show p1's type ---------------*/
  show_type_scalar(&p1, &quot;p1&quot;);
  nl();

  /*-- show one of its operations ---*/
  show_op(&quot;let p1a = p1.clone()&quot;);
  let p1a = p1.clone();
  p1a.show(&quot;p1.clone()&quot;);

  println!(&quot;&#92;nusing PointN&lt;f64&gt;::coor_x function:&quot;);
  let rx = p1.coor_x();
  *rx = 84.0;
  p1.show(&quot;p1&quot;);

  println!(&quot;&#92;nusing PointN&lt;f64&gt;::coor_y function:&quot;);
  let ry = p1.coor_y();
  *ry = 84.0;
  p1.show(&quot;p1&quot;);

  println!(&quot;&#92;nusing PointN&lt;f64&gt;::coor_z function:&quot;);
  let rz = p1.coor_z();
  *rz = 84.0;
  p1.show(&quot;p1&quot;);

  println!(&quot;&#92;nupdating time value:&quot;);
  /*-- delay 5 secs for update_time demo --*/
  println!(&quot;delaying 5 seconds before time update&quot;);
  use std::time::Duration;
  let dur:Duration = Duration::from_secs(5);
  std::thread::sleep(dur);

  p1.update_time();
  p1.show(&quot;p1&quot;);

  show_op("let p2 = p1 : move construction");
  let mut p2 = p1;
  p2.show("p2");

  show_op("*p2.coor_x() = 42.0");
  *p2.coor_x() = 42.0;
  p2.show("p2");

  show_op("p1 = p2 : move assignment");
  p1 = p2;
  p1.show("p1");
}


</code>
              </pre>
              </div>
            </first-item>
            <splitter-bar id="fig2-seperator"></splitter-bar>
            <second-item id="fig2-second" style="width:45%;">
              <div class="codewrap">
                <pre>
                <code class="language-rust">

-----------------------------------
  instances of user-defined type
-----------------------------------

--- let mut p1 = Point4D::new() ---
p1 : Point4D {
  0, 0, 0,
  Sat Dec  9 2023, 18:03:02
}
p1 : Point4D {
  42, -3, 2,
  Sat Dec  9 2023, 18:03:02
}
&quot;p1&quot;, type: &quot;rust_objects::points_objects::Point4D&quot;
value: Point4D { x: 42.0, y: -3.0, z: 2.0, t: 2023-12-09T18:03:02.862125200-06:00 }, size: 40

--- let p1a = p1.clone() ---
p1.clone() : Point4D {
  42, -3, 2,
  Sat Dec  9 2023, 18:03:02
}

using PointN&lt;f64&gt;::coor_x function:
p1 : Point4D {
  84, -3, 2,
  Sat Dec  9 2023, 18:03:02
}

using PointN&lt;f64&gt;::coor_y function:
p1 : Point4D {
  84, 84, 2,
  Sat Dec  9 2023, 18:03:02
}

using PointN&lt;f64&gt;::coor_z function:
p1 : Point4D {
  84, 84, 84,
  Sat Dec  9 2023, 18:03:02
}

updating time value:
delaying 5 seconds before time update
p1 : Point4D {
  84, 84, 84,
  Sat Dec  9 2023, 18:03:07
}
--- let p2 = p1 : move construction ---
p2 : Point4D {
  84, 84, 84,
  Sun Dec 10 2023, 16:31:54
}
--- *p2.coor_x() = 42.0 ---
p2 : Point4D {
  42, 84, 84,
  Sun Dec 10 2023, 16:31:54
}
--- p1 = p2 : move assignment ---
p1 : Point4D {
  42, 84, 84,
  Sun Dec 10 2023, 16:31:54
</code>
              </pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <h3 id="heap">1.2.4 Objects in heap</h3>
        <t-b>
          Heap objects are created in Rust using the <c-s>Box&lt;T&gt;</c-s> smart pointer.
          <c-s>Box</c-s> implements Rust&apos;s <c-s>Deref</c-s> trait. That will often
          automatically dereference the pointer to use its inner object&apos;s interface.
        </t-b>
        <t-b>
          Automatic dereferencing worked for <c-s>Vec&lt;T&gt;</c-s> but did not for
          Point4D, as shown below. That inconsistency is not a major problem, as intellisence indicates
          when it will not work and the developer simply provides explicit dereferencing
          as was done in this demo.
        </t-b>
        <div class="blockSingle">
          <splitter-container id="container">
            <first-item id="fig3-first" style="width:55%;">
              <div class="codewrap">
                <pre>
                <code class="language-rust">
fn demo_heap_operations() {

  show_note(&quot;std library objects in heap&quot;, 40);
  let mut h_str = Box::new(vec![1, 2, 3, 2, 1]);
  show_type(&h_str, &quot;h_str&quot;);
  println!(&quot;h_str: {:?}&quot;, h_str);

  show_op(&quot;h_str[1] = -1&quot;);
  /*-------------------------------------------------------
    This works because Box implements Deref and DerefMut
    traits which automatically dereference smart Box pointers.
    That essentially delegates the inner interface back
    to the Box pointer.
  */
  h_str[1] = -1;
  /*
    equivalent to (*h_str)[1] = -1;
    because of DerefMut
  */
  println!(&quot;h_str: {:?}&quot;, h_str);

  show_note(&quot;user-defined objects in heap&quot;, 40);
  let mut h_point = Box::new(Point4D::new());
  show_type(&h_point, &quot;h_point&quot;);
  /*
    Point4D does not implement trait DerefMut, so code has to
    explicitly deref, as shown here.
  */
  *h_point.coor_x() = 2.0;
  *h_point.coor_y() = 1.0;
  *h_point.coor_z() = 0.0;
  (*h_point).show(&quot;h_point&quot;);
}                  </code>
                </pre>
              </div>
            </first-item>
            <splitter-bar id="fig3-seperator"></splitter-bar>
            <second-item id="fig3-second" style="width:45%;">
              <div class="codewrap">
                <pre>
                <code class="language-shell">
--------------------------------------------------
  demonstrate object creation
--------------------------------------------------

----------------------------------------
  std library objects in heap
----------------------------------------
&quot;h_str&quot;, type: &quot;alloc::boxed::Box&lt;alloc::vec::Vec&lt;i32&gt;&gt;&quot;
h_str: [1, 2, 3, 2, 1]
--- h_str[1] = -1 ---
h_str: [1, -1, -2, 2, 1]

----------------------------------------
  user-defined objects in heap
----------------------------------------
&quot;h_point&quot;, type: &quot;alloc::boxed::Box&lt;rust_objects::points_objects::Point4D&gt;&quot;
h_point : Point4D {
  2, 1, 0,
  Mon Dec 11 2023, 14:53:31
}












                  </code>
                </pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <h3 id="demomain">1.2.5 main function</h3>
        <t-b>
          You can find all the code for this demo
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master/Rust/rust_objects/src">here</a>
          and code for the entire Bits repository
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master">here</a>.
        </t-b>
        <div class="blockSingle">
          <splitter-container id="container">
            <first-item id="fig4-first" style="width:55%;">
              <div class="codewrap">
                <pre>
<code class="language-rust">/*---------------------------------------------------------
  Demo object instances in action
*/
fn main() {
    show_note(&quot;demonstrate object creation&quot;, 50);

    demo_standard_objects();
    demo_user_defined_objects();
    demo_heap_operations();
  }
  print!(&quot;&#92;n&#92;nThat's all Folks!&#92;n&#92;n&quot;);
}


                </code>
              </pre>
              </div>
            </first-item>
            <splitter-bar id="fig4-seperator"></splitter-bar>
            <second-item id="fig4-second" style="width:45%;">
              <div class="codewrap">
                <pre>
<code class="language-rust">

--------------------------------------------------
  demonstrate object creation
--------------------------------------------------
  /*----------------------------
    output of demo_standard_objects() appears here
    output of demo_user_defined_objects() appears here
    output of demo_heap_operations() appears here
  */

That's all Folks!


                </code>
              </pre>
              </div>
            </second-item>
          </splitter-container>
        </div>
        <h3 id="funcs">1.3 Source Code - Analysis.rs</h3>
        <t-b>
          Code in this block provides analysis and display functions used in the
          other code blocks.
        </t-b>
        <t-b>
          You can find all the code for this demo
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master/Rust/rust_objects/src">here</a>
          and code for the entire Bits repository
          <a target="_blank" href="https://github.com/JimFawcett/Bits/tree/master">here</a>.
        </t-b>
        <div class="blockSingle">
          <div class="codewrap" style="float:left; width:60%;">
            <pre>
            <code class="language-rust">/*-------------------------------------------------------------------
  analysis.rs
  - provides analysis and display functions for Objects demo.
  - a few of these require advanced generics code.
  - You don't need to know how these work to understand this
    demo.
  - We will come back to these functions in a later Bit.
-------------------------------------------------------------------*/

use std::fmt::*;

/*---------------------------------------------------------
  show string wrapped with long dotted lines above and below
*/
pub fn show_note(note: &str, n:usize) {
  let mut line = String::new();
  for _i in 0..n {
    line.push('-');
  }
  print!(&quot;&#92;n{line}&#92;n&quot;);
  print!(&quot;  {note}&quot;);
  print!(&quot;&#92;n{line}&#92;n&quot;);
}
/*---------------------------------------------------------
  label with default length
  - Rust does not support default argument values
*/
pub fn show_label(note:&str) {
  show_note(note, 50);
}
/*---------------------------------------------------------
  show string wrapped in short lines
*/
pub fn show_op(opt: &str) {
  println!(&quot;--- {opt} ---&quot;);
}
/*---------------------------------------------------------
  print newline
*/
pub fn nl() {
  println!();
}
/*---------------------------------------------------------
  Show input's call name and type
  - doesn't consume input
  - show_type is generic function with Debug bound.
    Using format &quot;{:?}&quot; requires Debug.
*/
pub fn show_type&lt;T:Debug&gt;(_t: &T, nm: &str) {
    let typename = std::any::type_name::&lt;T&gt;();
    println!(&quot;{nm:?}, type: {typename:?}&quot;);
}
/*---------------------------------------------------------
  Show facts about a type's elements, e.g., name, type,
  value, and size.
  - show_type is generic function with Debug bound.
    Using format &quot;{:?} requires Debug.&quot;
  - works with small enumerable collections too because
    {:?} knows how to format them, but won't fold long
    sequences of elements. Use show_value_enum for that.
*/
pub fn show_type_scalar&lt;T:Debug&gt;(t: &T, nm: &str) {
    show_type(t, nm);
    println!(
        &quot;value: {t:?}, size: {}&quot;, std::mem::size_of::&lt;T&gt;()
    );
}
/*---------------------------------------------------------
  build indent string with &quot;left&quot; spaces
*/
pub fn offset(left: usize) -&gt; String {
    let mut accum = String::new();
    for _i in 0..left {
        accum += &quot; &quot;;
    }
    accum
}
/*---------------------------------------------------------
  find index of last occurance of chr in s
  - returns option in case chr is not found
  https://stackoverflow.com/questions/50101842/how-to-find-the-last-occurrence-of-a-char-in-a-string
*/
fn find_last_utf8(s: &str, chr: char) -&gt; Option&lt;usize&gt; {
  /*-- commented lines are equivalent to below --*/
    // if let Some(rev_pos) =
    //   s.chars().rev().position(|c| c == chr) {
    //     Some(s.chars().count() - rev_pos - 1)
    // } else {
    //     None
    // }
    s.chars().rev().position(|c| c== chr)
     .map(|rev_pos| s.chars().count() - rev_pos - 1)
}
/*---------------------------------------------------------
  fold an enumerable's elements into rows of w elements
  - indent by left spaces
  - does not consume t since passed as reference
  - returns string
  https://users.rust-lang.org/t/generic-code-over-iterators/10907/3
*/
pub fn fold&lt;T, I:Debug&gt;(
  t: &T, left: usize, width: usize
) -&gt; String
    where for&lt;'a&gt; &'a T: IntoIterator&lt;Item = &'a I&gt;, T:Debug
{
  let mut accum = String::new();
  accum += &offset(left);

  for (i, item) in t.into_iter().enumerate() {
    accum += &format!(&quot;{item:?}, &quot;);
    if ((i + 1) % width) == 0 && i != 0 {
        accum += &quot;&#92;n&quot;;
        accum += &offset(left);
    }
  }
  /*-- Alternate direct implementation --*/
  //let mut i = 0usize;
  // for item in t {
  //   accum += &format!(&quot;{item:?}, &quot;);
  //   if ((i + 1) % width) == 0 && i != 0 {
  //       accum += &quot;&#92;n&quot;;
  //       accum += &offset(left);
  //   }
  //   i += 1;
  // }

  /*-- strip off trailing comma --*/
  let opt = find_last_utf8(&accum, ',');
  if let Some(index) = opt {
    accum.truncate(index);
  }
  accum
}
/*---------------------------------------------------------
  show enumerables's elements as folded rows
  - width is number of elements in each row
  - left is indent from terminal left
*/
pub fn show_fold&lt;T:Debug, I:Debug&gt;(t:&T, left:usize, width:usize)
  where for&lt;'a&gt; &'a T: IntoIterator&lt;Item = &'a I&gt;
{
  println!(&quot;{}&quot;,fold(t, left, width));
}
</code>
            </pre>
          </div>
          <div class="textwrap">
            <h4>Analysis and Display:</h4>
            <t-b>
              This code block contains definitions of ten functions:
              <ol>
                <li>four non-generic display functions</li>
                <li>three generic analysis functions</li>
                <li>one generic and two non-generic helpers</li>
              </ol>
            </t-b>
            <h4>Generic functions:</h4>
            <t-b>
              Two of the more complex generic functions <c-s>fold&lt;T,&nbsp;I:Debug&gt</c-s>
              and <c-s>show_fold&lt;T:Debug, I:Debug&gt;</c-s> were only used for testing
              large vectors and won&apos;t be discussed until the next
              <a target="_blank" href="Bits_GenericRust.html">Bit</a>.
            </t-b>
            <t-b>
              <c-s>show_type</c-s>&apos;s arguments are passed by reference.
              So, references are copied; the arguments are not moved.
            </t-b>
            <t-b>
              That means that the instance being analyzed, _t, will
              still be valid after the call.
            </t-b>
            <t-b>
              Note that using a leading underscore, as in _t, tells the compiler
              not to warn about no use of that variable.
            </t-b>
          </div>
        </div>
        <h4 id="build">2.0 Build</h4>
        <div class="blockSingle">
          <pre style="font-size:0.8em; margin:0.5em;">
<code class="language-shell">
  C:&#92;github&#92;JimFawcett&#92;Bits&#92;Rust&#92;rust_hello_objects
  &gt; cargo build
  Compiling rust_hello_objects v0.1.0 (C:&#92;github&#92;JimFawcett&#92;Bits&#92;Rust&#92;rust_hello_objects)
  Finished dev [unoptimized + debuginfo] target(s) in 0.42s
  C:&#92;github&#92;JimFawcett&#92;Bits&#92;Rust&#92;rust_hello_objects
  &gt;
</code>
          </pre>
        </div>
        <h3 id="vscode">3.0 VS Code View</h3>
        <t-b>
          The code for this demo is available in
          <a target="_blank" href="https://github.com/JimFawcett/Bits">github.com/JimFawcett/Bits</a>. If you click on
          the Code dropdown you can clone the repository of all code for these demos to your local drive.
          Then, it is easy to bring up any example, in any of the languages, in VS Code.
        </t-b>
        <t-b>
          Here, we do that for Rust\rust_hello_objects.
        </t-b>
        <photosizer-block src="pictures/VS_Code_Rust_Objects.JPG" width="800" class="photoSizerBlock left"
                          style="overflow-x:auto;">
          <span style="font-family:'Comic Sans MS';">Figure 1. VS Code IDE - Rust Objects</span>
        </photosizer-block>
        <photosizer-block src="pictures/LaunchJSON_Rust_Objects.JPG" width="700" class="photoSizerBlock left"
                          style="overflow-x:auto;">
          <span style="font-family:'Comic Sans MS';">Figure 2. Rust Launch.JSON</span>
        </photosizer-block>
        <photosizer-block src="pictures/VS_Code_Debugging_Rust_Objects.JPG" width="700" class="photoSizerBlock left"
                          style="overflow-x:auto;">
          <span style="font-family:'Comic Sans MS';">Figure 3. Debugging Rust Objects</span>
        </photosizer-block>
        <!--<photosizer-block src="pictures/VS_Code_Cpp_Plugins.jpg" width="700" class="photoSizerBlock left">
    <span style="font-family:'Comic Sans MS';">Figure 3. C++ Plugins</span>
  </photosizer-block>-->

        <div style="height:0.75em;" class="clear"></div>
        <h3 id="refs">3.0 References</h3>
        <table class="indent">
          <tr>
            <th class="darkItem">Reference</th>
            <th class="darkItem">Description</th>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="../../RustStoryRepo.html">Rust Story</a>
            </td>
            <td>
              E-book with seven chapters covering most of intermediate Rust
            </td>
          </tr>
          <tr>
            <td>
              <a target="_blank" href="../RustBites/RustBites_Intro.html">Rust Bites</a>
            </td>
            <td>
              Relatively short feature discussions
            </td>
          </tr>
        </table>
        <div style="height:10em;"></div>
      </content>
      <a id="bottom"></a>
      <page-TOC id="pages" style="display:none;">
      </page-TOC>
      <!-- <page-sections id="sections" style="display:flex;">
        <menu-elem style="width:0.0em">&nbsp;</menu-elem>
        <menu-elem class="secElem"><a href="#bottom">bottom</a></menu-elem>
        <menu-elem class="secElem"><a href="#refs">refs</a></menu-elem>
        <menu-elem class="secElem"><a href="#ide">VS Code</a></menu-elem>
        <menu-elem class="secElem"><a href="#build">bld</a></menu-elem>
        <menu-elem class="secElem"><a href="#out">out</a></menu-elem>
        <menu-elem class="secElem"><a href="#analysis">anal</a></menu-elem>
        <menu-elem class="secElem"><a href="#points">pts</a></menu-elem>
        <menu-elem class="secElem"><a href="#source">src</a></menu-elem>
        <menu-elem class="secElem"><a href="#code">codeSnaps</a></menu-elem>
        <menu-elem class="secElem"><a href="#top">top</a></menu-elem>
      </page-sections> -->
    </main>
    <!-- <frame-footer>
      <menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem id="nextLink2" onclick="bottomMenu.next()">Next</menu-elem>
      <menu-elem id="prevLink2" onclick="bottomMenu.prev()">Prev</menu-elem>
      <menu-elem id="pgbtn" onclick="bottomMenu.pages()">Pages</menu-elem>
      <menu-elem onclick="bottomMenu.sections()">Sections</menu-elem>
      <menu-elem onclick="bottomMenu.about()">About</menu-elem>
      <menu-elem id="kysbtn" onclick="actions.keys()">Keys</menu-elem>
      <menu-elem style="margin-right:5em">
        <span id="loc" style="display:inline-block; font-weight:normal"></span>
      </menu-elem>
    </frame-footer> -->
  </page-frame>
  <script>
    var scrollables = document.querySelectorAll('.scrollable');
    for (let scrollable of scrollables) {
      //alert('adding listener');
      scrollable.addEventListener('wheel', function (event) {
        var deltaY = event.deltaY;
        var contentHeight = scrollable.scrollHeight;
        var visibleHeight = scrollable.offsetHeight;
        var scrollTop = scrollable.scrollTop;

        if (scrollTop === 0 && deltaY < 0)
          event.preventDefault();
        else if (visibleHeight + scrollTop === contentHeight && deltaY > 0)
          event.preventDefault();
      });
    }
    // https://stackoverflow.com/questions/7600454/how-to-prevent-page-scrolling-when-scrolling-a-div-element
  </script>
  <script>
    onLoadSplitter("fig1");
    onLoadSplitter("fig2");
    onLoadSplitter("fig3");
    onLoadSplitter("fig4");
  </script>
</body>
</html>