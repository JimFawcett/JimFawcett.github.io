<!DOCTYPE html>
<html>
<!--
  Bits_ObjectsCSharp.html
-->
<head>
  <title>Bits_Objects C#</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/StylesPhoto.css" />
  <link rel="stylesheet" href="css/StylesSizerComp.css" />
  <!-- PageFrame infrastructure -->
  <link rel="stylesheet" href="css/StylesPageFrameDefaults.css" />
  <link rel="stylesheet" href="css/StylesPageFrameStructure.css" />
  <link rel="stylesheet" href="css/StylesPageFrameMenus.css" />
  <link rel="stylesheet" href="css/StylesPageFrameThemeDefault.css" />
  <link rel="stylesheet" href="css/StylesWebComponents.css" />
  <script src="js/ScriptsWebComponents.js"></script>
  <script src="js/ScriptsPageFrame.js"></script>
  <script src="js/ScriptsPageFramePagesBits.js"></script>
  <script src="js/ScriptsPageFrameKeyboard.js"></script>
  <!--<script src="js/ScriptsPageFrameNewRadioButtons.js"></script>-->
  <style>
    #github .note {
      border: 1px solid var(--dark);
      padding:0.75em 1.5em;
      margin-top:1.25em;
      margin-bottom:1.25em;
      background-color: var(--light);
      color: var(--dark);
      max-width:50em;
    }
    #github h2 {
      margin-top: 0.75em;
    }
    #github #pagetitle {
      border:2px double var(--dark);
    }
    #github form {
      border:none;
      padding:0.5em 1em;
    }
    #github form span {
      padding:0em 0.5em;
    }
    #github code-container {
      display: flex;
      position:relative;
      width:calc(100%);
      flex-direction: row;
      justify-content: space-between;
      /*border-top: 1px solid var(--dark);*/
    }
    #github code-banner {
      display: block;
      border: 2px solid var(--dark);
      border-top:none;
      border-bottom:none;
      padding: 0.25em 1em;
      font-family: 'Comic Sans MS', Tahoma;
      width: calc(100% + 0.5em);
      background-color: var(--atten);
    }
    #github code-display {
      display: block;
      border: 2px solid var(--dark);
      white-space: pre;
      padding: 0.75em 1em;
      font-family: Consolas, monospace;
      font-size:0.9em;
      width: calc(50% - 0.5em);
      overflow-x: auto;
      /*height:20em;*/
    }
    #github label {
      margin-right:1em;
    }
    #github fieldset {
      border:none;
    }
    #github #exeRight, #exeLeft {
      padding: 0.05em 0.5em;
      font-family: 'Comic Sans MS', Tahoma;
    }
    #github #hideLeft, #hideRight {
      padding: 0.05em 0.5em;
      font-family: 'Comic Sans MS', Tahoma;
    }
    #github .hide {
      display:none;
    }
    body {
      position:relative;
    }
    #github table.showcode {
      table-layout:fixed;
      width:calc(100% + 4em);
      margin-left:-2em;
    }
    #github th.leftblock {
      border: 2px solid var(--dark);
      /*border: 1px solid red;*/
      background-color: var(--menu);
      width: calc(50% - 0.5em);
      overflow-x: auto;
    }

    #github th.rightblock {
      border: 2px solid var(--dark);
      background-color: var(--menu);
      width: calc(50% - 0.5em);
      overflow-x: auto;
    }

    #github th.centerblock {
      border: none;
      padding: 0em;
      width:1em;
    }
    #github td.leftblock {
      border: 2px solid var(--dark);
      width: calc(50% - 0.5em);
      overflow-x: auto;
      background-color: #222233;
      color: #ffffbb;
    }

    #github td.leftblock summary {
      border:1px solid #ffffbb;
    }

    #github td.rightblock {
      border: 2px solid var(--dark);
      width: calc(50% - 0.5em) !important;
      overflow-x: auto;
      background-color: #222233;
      color: #ffffbb;
    }

    #github td.rightblock summary {
      border: 1px solid #ffffbb;
    }

    #github td.centerblock {
      border: none;
      padding: 0em;
    }
    #github pre {
      overflow-x: auto !important;
    }
    #github #left1 {
      /*height:45em;*/
      max-height: calc(100vh - 10em);
      overflow-y: auto;
    }

    #github #right1 {
      max-height: calc(100vh - 10em);
      overflow-y: auto;
    }
    #github #left2 {
      /*height:45em;*/
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }

    #github #right2 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }
    #github #left3 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }

    #github #right3 {
      max-height: calc(100vh - 7em);
      overflow-y: auto;
    }
    #github .mover {
      width:2em;
      padding: 0.05em;
      position:relative;
      right:-1.5em;
      top:0.6em;
    }
    #github #ruler {

      width:calc(50% - 1.5em);
      height:0.001em;
      margin:-0.45em 0em;
    }
    #github .btns {
      width:3em;
      border:none;
    }
    #github .codeSnap {
      font-family: Consolas, Courier New, Courier, monospace, sans-serif;
      font-size: small;
      font-weight: bold;
      background-color: #eee;
      padding: 10px;
    }
    #github .remotebutton {
      padding:0.25em 0.5em;
    }
    #github .rightPanelLinks {
      position: fixed;
      right: 0.0em;
      top: 15em;
      z-index: 100;
      background: var(--light);
      padding: 0.75em 0.25em;
      border: 1px solid var(--dark);
    }

    #github div.rightPanelLinks a {
      display: block;
      height: 1.5em;
      padding:0em 0.25em;
    }
  </style>
  <script>
    /*-- Load Cpp Code, Output, Build --*/
    function loadCode() {
    }

    function loadOut() {
    }

    function loadBld() {
    }

    function loadAll() {
      loadCode();
      loadOut();
      loadBld();
      let cp = document.getElementById("Cp1");
      cp.checked = true;
    }
  </script>

  <script>
    function remote() {
      window.open('https://godbolt.org/z/KsWeWecvj', '_blank');
    }
  </script>
</head>
<body id="github" onload="initialize()">

  <a id="Next" href="Bits_ObjectsCSharp.html">Next</a>
  <a id="Prev" href="Bits_DataCSharp.html">Prev</a>

  <page-frame>
    <frame-header>
      <nav id="navbar"></nav>
    </frame-header>
    <main>
      <div id="about">about</div>
      <div id="page">Bits Objects C#</div>
      <div id="modified">02/28/2022</div>
      <div id="hlp"></div>
      <a id="top"></a>
      <content>
        <div class="rightPanelLinks">
          <a href="Bits_ObjectsCpp.html">C++</a>
          <a href="Bits_ObjectsRust.html">Rust</a>
          <a class="darkItem" href="Bits_ObjectsCSharp.html">C#</a>
          <a href="Bits_ObjectsPython.html">Python</a>
          <a href="Bits_ObjectsJS.html">JvScrpt</a>
        </div>
        <header>
          <a class="repoLink" href="../../BitsRepo.html">Bits Repository</a>
          <hgroup id="pagetitle">
            <h1 id="title">Bits_Objects C#</h1>
            <h3 id="subtitle" class="indent">
              code, output, and build for C# on Windows, macOS, and Linux
            </h3>
          </hgroup>
        </header>
        <t-b>
          These pages support comparison of fragments of code in several different
          languages, much as you might compare a sentence of English with one in Spanish to help you learn
          Spanish.
          </t-b>
          <t-b style="border:1px solid maroon; padding:0.25em 1em 0.5em 1em;">
            <h4 style="margin:0em 0em 0.25em 0em;">Synopsis:</h4>
            This page demonstrates uses of C# User-Defined types and their objects.
            The purpose is to quickly acquire some familiarity with types and their uses.
            <div style="height:0.5em;"></div>
            Also, this is the first set of examples to partition code into several files.
            That supports readability, may improve translation times, and makes maintenance
            significantly easier.
            <div style="height:0.5em;"></div>
            Here we see significant differences between some of the languages, especially
            when comparing statically typed languages like C++, Rust, and C#, with dynamically typed
            languages like Python and JavaScript.
          </t-b>
        <details>
          <summary class="darkItem">Demo Notes&nbsp;&nbsp;</summary>
          <t-b><hr /></t-b>
          <t-b>
            All of the languages covered in this demonstration support classes.  Each class provides
            a pattern for laying out a memory footprint and defines how data within are accessed.
          </t-b>
          <t-b>
            Three of the languages: C++, Rust, and C# provide generics.  Each generic function or class
            is a pattern for defining functions and classes of a specific type.  Thus a generic is a
            pattern for making patterns.
          </t-b>
          <t-b>
            The other two, Python and JavaScript, are dynamically typed and already support defining
            functions and classes for multiple types, e.g., no need for generics.
          </t-b>
          <t-b>
            This demonstration illustrates use of classes and objects, which for C++, Rust, and C#,
            are defined in a stackframe or in the heap or both. <strongs>All</strongs> data for Python and JavaScript are
            stored in managed heaps.
          </t-b>
          <t-b><hr /></t-b>
        </details>
        <t-b>
          The examples below show how to use library and user defined types with emphasis on
          illustrating syntax and basic operations.
        </t-b>
        <div style="height:0.25em;"></div>
        <h3 id="code">1.0 CodeSnaps</h3>
        <input type="button" value="RemoteExecute" class="remotebutton" onclick="remote()" />
        <div style="display:flex; flex-direction:column;">
          <h4>Source Code - Program.cs</h4>
          <pre class="codeSnap">
/*-------------------------------------------------------------------
  Cs_Objects::Cs_Objects.cs
  - Demonstrates creation and assignment of objects as well as a few
    peeks at other operations on objects.
*/
using System;
using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;
using System.Linq;                  // IEnumerable&lt;T&gt;.ToArray
using System.Text;                  // StringBuilder
using Points;                       // defined in Points.cs
using Analysis;                     // defined in Analysis.cs

/*
  Static Data Types:
    value types =&gt; assignment copies value
    --------------------------------------
      sbyte, byte, short, int, long, ushort, uint, ulong
      float, double
      decimal, char, bool
      struct
    Reference types =&gt; assignment copies reference
    ----------------------------------------------
      object, string, array, class
    ----------------------------------------------
      strings are immutable, so any change requires copy on write.
      That simulates value behavior.
*/
namespace CSharpObjects
{
  /*
    Demonstration composite value type.
    - St is a value type because it is implemented with
      a struct and all its data members are value types.
  */
  public struct St {
    public St(int ai, double bi, char ci) {
      a=ai; b=bi; c=ci;
    }
    public void Show(string name) {
      Console.WriteLine(
        &quot;  {0} {{ a:{1}, b:{2}, c:{3} }}&quot;, name, a, b, c
      );
    }
    /*
     These data members are public instead of public properties.
     - we don't need that ceremony because St is simply a data
       aggregator. It doesn't have any significant behavior.
    */
    public int a;
    public double b;
    public char c;
  }

  /*-- Object demonstration begins here --*/
  class Program
  {
    const string nl = &quot;&#92;n&quot;;
    static void Main(string[] args)
    {
      Display.ShowLabel(&quot; Demonstrate C# objects&quot;);

      Display.ShowNote(
        &quot;Examples of creation and display of Primitive Types&quot;
      );
      short s = 123;
      Display.ShowTypeScalar(s, &quot;s&quot;, nl);
      long l = 12345;
      Display.ShowTypeScalar(l, &quot;l&quot;, nl);
      float f = 3.1415927f;
      Display.ShowTypeScalar(f, &quot;f&quot;, nl);
      double d = 3.1415927;
      Display.ShowTypeScalar(d, &quot;d&quot;, nl);
      int[] arr = new int[]{ 4, 3, 2, 1, 0, -1};
      Display.ShowTypeEnum(arr, &quot;arr&quot;, 10, nl);

      Display.ShowNote(
        &quot;Examples of creation and display of Library Types&#92;n&quot; +
        &quot;- size is the size of reference, not instance&quot;
      );
      string aString = &quot;a string&quot;;  // hides construction
      Display.ShowTypeScalar(aString, &quot;aString&quot;, nl);

      string another = new string(&quot;another string&quot;);
      Display.ShowTypeScalar(another, &quot;another&quot;, nl);

      List&lt;double&gt; aList =
        new List&lt;double&gt;{ 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0 };

      Display.ShowTypeEnum(aList, &quot;aList&quot;, 5, nl);

      var d1 = new Dictionary&lt;int, string&gt;
      {
        { 0, &quot;zero&quot;}, {1, &quot;one&quot;}, {2, &quot;two&quot;}
      };
      Display.ShowTypeEnum(d1, &quot;d1&quot;, 5, nl);

      Display.ShowNote(
        &quot;Examples of user-defined types:&#92;n&quot; +
        &quot;- Point1, a point with x,y,z coordinates&#92;n&quot; +
        &quot;- Point2, a point with N generic coordinates&quot;
      );
      Point1 p1 = new Point1();
      p1.x = 3;
      p1.y = -42;
      p1.z = 1;
      Display.ShowOp(&quot;ShowTypeShowable(p1, &#92;&quot;p1&#92;&quot;)&quot;);
      Display.ShowTypeShowable(p1, &quot;p1&quot;, nl);

      Display.ShowNote(
        &quot;Point2&lt;T&gt; is both Enumerable and Showable. That is,&#92;n&quot; +
        &quot;it implements both IEnumerable&lt;T&gt; and IShow.&#92;n&quot; +
        &quot;- so both ShowTypeEnum and ShowTypeShowable work&quot;
      );
      Point2&lt;double&gt; p2 = new Point2&lt;double&gt;(7);
      p2.coor = new List&lt;double&gt; {
        1.5, 2.0, 3.5, 4.0, 5.5, 6.0, 7.5
      };
      #region
      Display.ShowOp(&quot;ShowTypeShowable(p2, &#92;&quot;p2&#92;&quot;)&quot;);
      #endregion
      p2.Width = 6;
      Display.ShowTypeShowable(p2, &quot;p2&quot;, nl);

      #region
      Display.ShowOp(&quot;ShowTypeEnum(p2, &#92;&quot;p2&#92;&quot;)&quot;);
      #endregion
      Display.ShowTypeEnum&lt;double&gt;(p2, &quot;p2&quot;, p2.Width, nl);

      #region
      Display.ShowOp(&quot;ShowTypeShowable(p3, &#92;&quot;p3&#92;&quot;)&quot;);
      #endregion
      Point2&lt;int&gt; p3 = new Point2&lt;int&gt;(7);
      p3.left(4).width(7);

      #region
      Display.ShowOp(&quot;set left(4) and width(7)&quot;);
      #endregion
      p3.coor = new List&lt;int&gt;{1, 2, 3, 4, 5, 6, 7};
      Display.ShowTypeShowable(p3, &quot;p3&quot;, nl);

      Display.ShowLabel(
        &quot;Differences between value and reference types&quot;
      );
      Display.ShowNote(
        &quot;Assignment of reference types assigns their references,&#92;n&quot; +
        &quot;creating two references to the same instance in managed&#92;n&quot; +
        &quot;heap, so variables are coupled through single instance.&quot;
      );

      #region
      Display.ShowOp(&quot;Point1 val1 = new Point1(), then initialize&quot;);
      #endregion
      Point1 val1 = new Point1();
      val1.x = 1;
      val1.y = 2;
      val1.z = 3;
      Display.ShowLabeledObject(val1, &quot;val1&quot;);

      #region
      Display.ShowOp(&quot;Point1 val2 = val1&quot;);
      #endregion
      Point1 val2 = val1;
      Display.ShowLabeledObject(val2, &quot;val2&quot;);
      Display.IsSameObj(val2, &quot;val2&quot;, val1, &quot;val1&quot;);

      #region
      Display.ShowOp(&quot;val2.z = 42;&quot;);
      #endregion
      val2.z = 42;
      Display.IsSameObj(val2, &quot;val2&quot;, val1, &quot;val1&quot;);
      Display.ShowLabeledObject(val2, &quot;val2&quot;);
      Display.ShowLabeledObject(val1, &quot;val1&quot;);
      Display.ShowNote(
        &quot;Note! Source of assignment, val1, changed when val2 changed.&#92;n&quot; +
        &quot;Point1 is ref type, so assignment just assigns references.&quot;
      );
      Display.println();

      Display.ShowNote(
        &quot;Value types can be independently assigned and copied.&quot;
      );

      #region
      Display.ShowOp(&quot;var s1 = new St(1, -0.5, 'z');&quot;);
      #endregion
      var s1 = new St(1, -0.5, 'z');

      #region
      Display.ShowOp(&quot;var s2 = s1&quot;);
      #endregion
      var s2 = s1;
      Display.IsSameObj(s2, &quot;s2&quot;, s1, &quot;s1&quot;);
      s2.Show(&quot;s2&quot;);
      s1.Show(&quot;s1&quot;);

      #region
      Display.ShowOp(&quot;s2.c = 'q'&quot;);
      #endregion
      s2.c = 'q';
      s2.Show(&quot;s2&quot;);
      s1.Show(&quot;s1&quot;);
      Display.ShowNote(
        &quot;Change in destination, s2, did not alter source, s1.&#92;n&quot; +
        &quot;Assignment of value types creates independent objects.&quot;
      );

      Display.ShowLabel(
        &quot;Instances of string are reference types, but simulate&#92;n&quot; +
        &quot;some value behaviors.  String objects are immutable.&#92;n&quot; +
        &quot;To modify an instance, a new string is created with&#92;n&quot; +
        &quot;copies of the source string characters inclucing any&#92;n&quot; +
        &quot;modifications.  This is called copy on write.&quot;
      );
      var str1 = &quot;An immutable string&quot;;
      var str2 = str1;  // copy handle not instance
      Display.IsSameObj(str2, &quot;str2&quot;, str1, &quot;str1&quot;);
      Display.DisplayLabeledObject&lt;string&gt;(str1, &quot;str1&quot;);
      Display.DisplayLabeledObject(str2, &quot;str2&quot;);

      str2 = str2.Remove(0,3);
      Display.IsSameObj(str2, &quot;str2&quot;, str1, &quot;str1&quot;);
      Display.DisplayLabeledObject(str1, &quot;str1&quot;);
      Display.DisplayLabeledObject(str2, &quot;str2&quot;);
      Display.ShowNote(
        &quot;There is no way for change in str2 to affect str1.&quot;
      );
      Display.println();

      Display.ShowNote(
        &quot;Test formatting for Enumerable types&quot;, nl
      );

      int[] testarr = { 0,1, 2, 3, 4, 5, 6, 7, 8, 9 };
      Display.ShowTypeEnum(testarr, &quot;testarr&quot;, 5, nl);

      /*
        Commented function calls below left to let viewers
        uncomment and walk through with debugger.
      */
      #region
      // ShowLabel(&quot;Test code for functions used above&quot;);
      // print(&quot;--- double[] to folded CSV ---&quot;);
      // int[] arr2 = { 0,1,2,3,4,5,6,7,8 };
      // string tmp = FoldArray(arr2, 3, 2);
      // Console.WriteLine(&quot;&#92;n{0}&quot;,tmp);

      // ShowLabel(&quot;Alternate function for generating CSVs&quot;);
      // print(&quot;--- coor to folded CSV ---&quot;);
      // double[] arr3 = p2.coor.ToArray();
      // tmp = FoldArray(arr3, 4, 2);
      // Console.WriteLine(&quot;&#92;n{0}&quot;,tmp);

      // string tmp1 = ToCSV&lt;double&gt;(p2.coor);
      // string tmp2 = ToCSV(p2.coor);  // demo that type inference works here
      // ShowTypeScalar(tmp2, &quot;tmp2&quot;);
      #endregion

      Console.WriteLine(&quot;&#92;nThat's all Folks!&#92;n&quot;);
    }
  }
}
          </pre>
          <h4>Source Code - Points.cs</h4>
          <pre class="codeSnap">
/*-------------------------------------------------------------------
  Points.cs
  - provides definitions for user-defined classes
    Point1 and Point2&lt;T&gt;
*/

using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;
using Analysis;

namespace Points {
  /*-----------------------------------------------------------------------
    Point1 is a basic point class with three integer coordinates.
    - It is a reference type because it's instances are created
      from a class
    - That affects the way assignments work - see demo near the
      end of main.
  */
  public class Point1 : Analysis.IShow  // reference type with value type members
  {
    public Point1() {
      /*
        doesn't need to do anything because its properties have
        default values
      */
    }
    public int x { get; set; } = 0;
    public int y { get; set; } = 0;
    public int z { get; set; } = 0;
    public int Length { get; } = 3;
    public int Width { get; set; } = 3;
    public int Left { get; set; } = 2;
    /* translates IShow::show to needs of class */
    public void Show(string name) {
      PrintSelf(name);
    }
    /* Display Point1 structure and state */
    public void PrintSelf(string name) {
      string ofstr = Display.Indent(Left);
      Console.WriteLine(
        &quot;{4}{0}  {{ x:{1}, y:{2}, z:{3} }}&quot;, name, x, y, z, ofstr
      );
    }
  }
  /*----------------------------------------------------------------------
    Point2&lt;T&gt; is a generalization of Point1
     - holds any finite number of generic coordinates
     - coordinates are held in a List&lt;T&gt;
     - implements IEnumerable&lt;T&gt; so it can be indexed and iterated
     - it is a reference type because it is implemented with a class.
       its List&lt;T&gt; is also a reference type
  */
  public class Point2&lt;T&gt; : IEnumerable&lt;T&gt; , Analysis.IShow {
    /*--------------------------------------------------------------------
      Constructs a point with N coordinates each with default value
    */
    public Point2(int N) {
      coor = new List&lt;T&gt;();
      for(int i = 0; i&lt;N; ++i) {
        T? test = default(T);
        if(test != null) {
          coor.Add(test);
        }
      }
    }
    /* translates IShow::show() for needs of Point2 class */
    public void Show(string name) {
      PrintSelf(name);
    }
    /*
      Displays structure and state of N-dimensional point.
      - state is a set of rows of coordinate data
      - property Width specifies number of elements in each row
      - property Left specifies offset of row from terminal Left edge
    */
    public void PrintSelf(string name) {
      Console.Write(Display.Indent(Left));
      Console.Write(&quot;{0} {{&#92;n{1}&quot;, name, Display.Indent(Left + 2));
      for(int i=0; i&lt;coor.Count; ++i) {
        Console.Write(&quot;{0}&quot;, coor[i]);
        if(i &lt; coor.Count - 1) {
          Display.print(&quot;, &quot;);
        }
        if((i+1) % Width == 0 && i != coor.Count - 1) {
          Console.Write(&quot;&#92;n&quot;);
          Console.Write(Display.Indent(Left + 2));
        }
      }
      Console.Write(&quot;&#92;n{0}&quot;, Display.Indent(Left));
      Console.WriteLine(&quot;}&quot;);
    }
    /* The three functions below support indexing and iterating */
    public T this[int index] {
      get { return coor[index]; }
      set { coor.Insert(index, value); }
    }
    public IEnumerator&lt;T&gt; GetEnumerator() {
      return coor.GetEnumerator();
    }
    IEnumerator IEnumerable.GetEnumerator() {
      return this.GetEnumerator();
    }
    public List&lt;T&gt; coor { get; set; }
    public int Length { get { return coor.Count; } }
    public int Width { get; set; } = 5;   // default row size
    public int Left { get; set; } = 2;    // default offset
    /* initializers */
    public Point2&lt;T&gt; width(int w) {
      this.Width = w;
      return this;
    }
    public Point2&lt;T&gt; left(int l) {
      this.Left = l;
      return this;
    }
  }
}
          </pre>
          <h4>Source Code - Analysis.cs</h4>
          <pre class="codeSnap">
/*-------------------------------------------------------------------
  Analysis.cs
  - provides several type analysis and display methods in the
    class Display
*/

using System.Reflection;
using System.Reflection.Emit;
using System.Collections;
using System.Collections.Generic;   // IEnumerable&lt;T&gt;, List&lt;T&gt;
using System.Linq;                  // IEnumerable&lt;T&gt;.ToArray
using System.Text;

/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    cut here

    The functions below are used for analysis and display. They
    have varying complexities. It is not essential to understand
    them in order to follow the demonstrations in this demo.
    We will look at them in some detail in Bits_Functions.
*/

namespace Analysis {
    /*----------------------------------------------------------------------
        IShow allows analysis functions to operate on instances of any class
        that implements it. See ShowTypeShowable&lt;T&gt;(T t, ...), below.
    */
    public interface IShow {
        void Show(string name);   // show instance state as rows of elements
        int Length { get; }       // total number of elements
        int Width { get; set; }   // number of elements per row
        int Left { get; set; }    // offset from terminal Left
    }

    public class Display {
        /*-------------------------------------------------
          Show static type with some formatting adjustments
          and name at callsite.
        */
        public static void ShowType&lt;T&gt;(T t, string nm) {
            Type tt = t!.GetType();
            string tnm = tt.Name;
            if(tt.IsGenericType) {
                if(tnm.Length &gt; 1) {
                    tnm = tnm.Remove(tnm.Length - 2) + &quot;&lt;T&gt;&quot;;
                }
            }
            Console.Write(&quot;{0}: {1}, &quot;, nm, tnm);
            int size = GetManagedSize(tt);
            Console.Write(&quot;size: {0}, &quot;, size);
            if (tt.IsValueType) {
                Console.WriteLine(&quot;value type&quot;);
            }
            else {
                Console.WriteLine(&quot;reference type&quot;);
            }
        }
        /*-------------------------------------------------
        Display information about the type of any scalar type.
        - scalar types are those with a single value like:
            int, double, string, ...
        - This function directly uses only simple reflection
        */
        public static void ShowTypeScalar&lt;T&gt;(
            T t, string nm, string suffix = &quot;&quot;
        )
        {
            ShowType(t, nm);
            Console.WriteLine(&quot;value: &#92;&quot;{0}&#92;&quot;{1}&quot;, t, suffix);
        }
        /*-------------------------------------------------
        Show type information for any type that implements
        the IShow interface
        */
        public static void ShowTypeShowable&lt;T&gt;(
            T t, string nm, string suffix=&quot;&quot;
        )
        where T:IShow
        {
            ShowType(t, nm);
            Console.WriteLine(&quot;value:&quot;);
            t.Show(nm);     // guaranteed by IShow implementation
            Console.Write(suffix);
        }
        /*-------------------------------------------------
        Provides name of caller, nm, as label for IShow() information.
        - works for all Showable instances
        */
        public static void ShowLabeledObject&lt;T&gt;(
            T t, string nm
        ) where T:IShow {
            Console.Write(nm);
            t.Show(nm);
        }
        /*-------------------------------------------------
        Provides name of caller, nm, as label for value.
        - works for all T with ToString.
        */
        public static void DisplayLabeledObject&lt;T&gt;(T t, string nm) {
            Console.WriteLine(&quot;{0}: {1}&quot;, nm, t!.ToString());
        }
        /*-------------------------------------------------
        Show type information for any type that implements
        IEnumerable&lt;T&gt; interface.
        */
        public static void ShowTypeEnum&lt;T&gt; (
        IEnumerable&lt;T&gt; t, string nm, int w = 5, string suffix = &quot;&quot;
        )
        {
            ShowType(t, nm);
            Console.WriteLine(&quot;value:&#92;n{0}{1} {{&quot;, &quot;  &quot;, nm);
            /*
                beautify value list into rows of w elements
                indented by 4 spaces
            */
            string tmp = FoldArray(t.ToArray(), w, 4);
            Console.Write(tmp);
            Console.WriteLine(&quot;&#92;n  }&quot;);
            Console.Write(suffix);
        }
        /*-------------------------------------------------
        create string of count spaces, used to offset output
        */
        public static string Indent(int count) {
            StringBuilder sb = new StringBuilder();
            sb.Append(' ', count);
            return sb.ToString();
        }
        /*-------------------------------------------------
        Truncate string to length of N, but only if
        its length is greater than N
        */
        string truncate(int N, string bigStr) {
            if(bigStr.Length &lt;= N) {
                return bigStr;
            }
            StringBuilder sb =  new StringBuilder();
            sb.Append(bigStr);
            sb.Length = N;  // move back pointer to desired length
            return sb.ToString();
        }
        /*-------------------------------------------------
        fold array elements into rows of w elements
        */
        public static string FoldArray&lt;T&gt;(T[] arr, int w, int Left) {
            StringBuilder tmp = new StringBuilder();
            tmp.Append(Indent(Left));
            for(int i=0; i&lt; arr.Length; ++i) {
                tmp.Append(arr[i]!.ToString());
                tmp.Append(&quot;, &quot;);
                if((i+1) % w == 0 && i != arr.Length - 1) {
                    tmp.Append(&quot;&#92;n&quot;);
                    tmp.Append(Indent(Left));
                }
            }
            if(tmp.Length &gt; 1) {
                tmp.Length -= 2;  // don't return last comma and space
            }
            return tmp.ToString();
        }
        /*-------------------------------------------------
        do t1 and t2 share the same address?
        */
        public static void IsSameObj&lt;T&gt;(
        T t1, String n1, T t2, String n2, string suffix = &quot;&quot;
        ) {
        if(ReferenceEquals(t1, t2)) {
            Console.WriteLine(
            &quot;{0} is same object as {1}{2}&quot;, n1, n2, suffix
            );
        }
        else {
            Console.WriteLine(
            &quot;{0} is not same object as {1}{2}&quot;, n1, n2, suffix);
        }
        }
        /*-------------------------------------------------
        Beware, two distinct objects may have same hashcode.
        - Not used in this demo for that reason.
        */
        public static void showIdent&lt;T&gt;(
            T t, String n, string suffix = &quot;&quot;
        ) {
            int id = t!.GetHashCode();
            Console.WriteLine(&quot;{0}, {1}{2}&quot;, n, id, suffix);
        }
        /*-------------------------------------------------
        Display function call or operation to help turn
        output data into information
        */
        public static void ShowOp(string op, string suffix = &quot;&quot;) {
            Console.WriteLine(&quot;--- {0} ---{1}&quot;, op, suffix);
        }
        public static void print(String s = &quot;&quot;) {
            Console.Write(s);
        }
        public static void println(String s = &quot;&quot;) {
            Console.WriteLine(s);
        }
        /*-------------------------------------------------
        Emphasize text with borders
        */
        public static void ShowNote(string s, string suffix = &quot;&quot;) {
            Console.WriteLine(
                &quot;--------------------------------------------------&quot;
            );
            Console.WriteLine(&quot;{0}&quot;, s);
            Console.WriteLine(
                &quot;--------------------------------------------------{0}&quot;,
                suffix
            );
        }
        /*-------------------------------------------------
        Surround note with empty lines
        */
        public static void ShowLabel(string s) {
            Console.WriteLine();
            ShowNote(s);
            Console.WriteLine();
        }
        /*
          Show fields and methods for either reference or value types
          using reflection
        */
        // https://stackoverflow.com/questions/7613782/iterating-through-struct-members
        public static void iterate&lt;T&gt;(T t) /*where T:new()*/ {
            Console.WriteLine(&quot;fields:&quot;);
            foreach(
                var field in typeof(T).GetFields(
                BindingFlags.Instance |
                BindingFlags.NonPublic |
                BindingFlags.Public
            )
            ) {
                Console.WriteLine(
                &quot;  {0} = {1}&quot;, field.Name, field.GetValue(t)
                );
            }
            Console.WriteLine(&quot;methods:&quot;);
            foreach(
                var method in typeof(T).GetMethods(
                BindingFlags.Instance | BindingFlags.Public
                )
            ) {
                Console.WriteLine(
                &quot;  {0}&quot;, method.Name
                );
            }
        }
        /*-------------------------------------------------
        Build string of comma separated values from
        Enumerable collection
        - no longer used here, but will be useful so kept
        */
        // https://stackoverflow.com/questions/330493/join-collection-of-objects-into-comma-separated-string
        public static string ToCSV&lt;T&gt;(IEnumerable&lt;T&gt; coll) {
            StringBuilder sb = new StringBuilder();
            foreach(T elem in coll) {
                sb.Append(elem!.ToString()).Append(&quot;, &quot;);
            }
            return sb.ToString(0, sb.Length - 2);
        }
        /*-------------------------------------------------
        Returns value of T for IEnumerable&lt;T&gt; at runtime.
        Needed for some functions that operate on generic
        collections.
        - at this time, not used in this demo
        */
        // https://www.codeproject.com/Tips/5267157/How-To-Get-A-Collection-Element-Type-Using-Reflect
        public static Type? GetTypeOfCollection(Object coll) {
            Type type = (coll).GetType();
            var etype = typeof(IEnumerable&lt;&gt;);
            foreach (var bt in type.GetInterfaces()) {
                if (bt.IsGenericType && bt.GetGenericTypeDefinition() == etype) {
                    return (bt.GetGenericArguments()[0]);
                }
            }
            return null;
        }
        /*----------------------------------------------------------------
            Utils uses advanced relection
            - GetMangedSize(Type type) is function that returns the size of
            value types and handles, used to help discover how things work.
            It is placed here because it uses advanced techniques that
            will eventually be covered elsewhere in this site.  Knowing
            how it works is not essential for the things we are examining
            in this demo.
        */
        // https://stackoverflow.com/questions/8173239/c-getting-size-of-a-value-type-variable-at-runtime/8173293#8173293
        public static int GetManagedSize(Type type)
        {
            // all this just to invoke one opcode with no arguments!
            var method = new DynamicMethod(
                &quot;GetManagedSizeImpl&quot;, typeof(uint), new Type[0],
                typeof(TypeExtensions), false
            );

            ILGenerator gen = method.GetILGenerator();
            gen.Emit(OpCodes.Sizeof, type);
            gen.Emit(OpCodes.Ret);

            var func = (Func&lt;uint&gt;)method.CreateDelegate(typeof(Func&lt;uint&gt;));
            return checked((int)func());
        }
    }
}

          </pre>
          <h4>Output</h4>
          <pre class="codeSnap">
C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Objects
&gt; dotnet run

--------------------------------------------------
 Demonstrate C# objects
--------------------------------------------------

--------------------------------------------------
Examples of creation and display of Primitive Types
--------------------------------------------------
s: Int16, size: 2, value type
value: &quot;123&quot;

l: Int64, size: 8, value type
value: &quot;12345&quot;

f: Single, size: 4, value type
value: &quot;3.1415927&quot;

d: Double, size: 8, value type
value: &quot;3.1415927&quot;

arr: Int32[], size: 8, reference type
value:
  arr {
    4, 3, 2, 1, 0, -1
  }

--------------------------------------------------
Examples of creation and display of Library Types
- size is the size of reference, not instance
--------------------------------------------------
aString: String, size: 8, reference type
value: &quot;a string&quot;

another: String, size: 8, reference type
value: &quot;another string&quot;

aList: List&lt;T&gt;, size: 8, reference type
value:
  aList {
    1, 1.5, 2, 2.5, 3,
    3.5, 4
  }

d1: Dictionary&lt;T&gt;, size: 8, reference type
value:
  d1 {
    [0, zero], [1, one], [2, two]
  }

--------------------------------------------------
Examples of user-defined types:
- Point1, a point with x,y,z coordinates
- Point2, a point with N generic coordinates
--------------------------------------------------
--- ShowTypeShowable(p1, &quot;p1&quot;) ---
p1: Point1, size: 8, reference type
value:
  p1  { x:3, y:-42, z:1 }

--------------------------------------------------
Point2&lt;T&gt; is both Enumerable and Showable. That is,
it implements both IEnumerable&lt;T&gt; and IShow.
- so both ShowTypeEnum and ShowTypeShowable work
--------------------------------------------------
--- ShowTypeShowable(p2, &quot;p2&quot;) ---
p2: Point2&lt;T&gt;, size: 8, reference type
value:
  p2 {
    1.5, 2, 3.5, 4, 5.5, 6,
    7.5
  }

--- ShowTypeEnum(p2, &quot;p2&quot;) ---
p2: Point2&lt;T&gt;, size: 8, reference type
value:
  p2 {
    1.5, 2, 3.5, 4, 5.5, 6,
    7.5
  }

--- ShowTypeShowable(p3, &quot;p3&quot;) ---
--- set left(4) and width(7) ---
p3: Point2&lt;T&gt;, size: 8, reference type
value:
    p3 {
      1, 2, 3, 4, 5, 6, 7
    }


--------------------------------------------------
Differences between value and reference types
--------------------------------------------------

--------------------------------------------------
Assignment of reference types assigns their references,
creating two references to the same instance in managed
heap, so variables are coupled through single instance.
--------------------------------------------------
--- Point1 val1 = new Point1(), then initialize ---
val1  val1  { x:1, y:2, z:3 }
--- Point1 val2 = val1 ---
val2  val2  { x:1, y:2, z:3 }
val2 is same object as val1
--- val2.z = 42; ---
val2 is same object as val1
val2  val2  { x:1, y:2, z:42 }
val1  val1  { x:1, y:2, z:42 }
--------------------------------------------------
Note! Source of assignment, val1, changed when val2 changed.
Point1 is ref type, so assignment just assigns references.
--------------------------------------------------

--------------------------------------------------
Value types can be independently assigned and copied.
--------------------------------------------------
--- var s1 = new St(1, -0.5, 'z'); ---
--- var s2 = s1 ---
s2 is not same object as s1
  s2 { a:1, b:-0.5, c:z }
  s1 { a:1, b:-0.5, c:z }
--- s2.c = 'q' ---
  s2 { a:1, b:-0.5, c:q }
  s1 { a:1, b:-0.5, c:z }
--------------------------------------------------
Change in destination, s2, did not alter source, s1.
Assignment of value types creates independent objects.
--------------------------------------------------

--------------------------------------------------
Instances of string are reference types, but simulate
some value behaviors.  String objects are immutable.
To modify an instance, a new string is created with
copies of the source string characters inclucing any
modifications.  This is called copy on write.
--------------------------------------------------

str2 is same object as str1
str1: An immutable string
str2: An immutable string
str2 is not same object as str1
str1: An immutable string
str2: immutable string
--------------------------------------------------
There is no way for change in str2 to affect str1.
--------------------------------------------------

--------------------------------------------------
Test formatting for Enumerable types
--------------------------------------------------

testarr: Int32[], size: 8, reference type
value:
  testarr {
    0, 1, 2, 3, 4,
    5, 6, 7, 8, 9
  }


That's all Folks!

C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Objects
&gt;
          </pre>
          <h4>Build</h4>
          <pre class="codeSnap">
C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Objects
&gt; dotnet build
MSBuild version 17.4.1+fedecea9d for .NET
  Determining projects to restore...
  All projects are up-to-date for restore.
  Cs_Objects -&gt; C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Ob
  jects&#92;bin&#92;Debug&#92;net7.0&#92;Cs_Objects.dll

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:00.92
C:&#92;github&#92;JimFawcett&#92;Bits&#92;CSharp&#92;Cs_Objects
&gt;
          </pre>
        </div>
        <h3 id="ide">2.0 VS Code View</h3>
        <t-b>
          The code for this demo is available in 
          <a href="https://github.com/JimFawcett/Bits">github.com/JimFawcett/Bits</a>. If you click on
          the Code dropdown you can clone the repository of all code for these demos to your local drive.
          Then, it is easy to bring up any example, in any of the languages, in VS Code.
        </t-b>
        <t-b>
          Here, we do that for CSharp\CSharp_Objects.
        </t-b>
        <photosizer-block src="pictures/VS_Code_CSharp_Objects.JPG" width="800" class="photoSizerBlock left"
          style="overflow-x:auto;"
        >
          <span style="font-family:'Comic Sans MS';">Figure 1. VS Code IDE - C# Objects</span>
        </photosizer-block>
        <photosizer-block src="pictures/LaunchJSON_CSharp_Objects.JPG" width="800" class="photoSizerBlock left"
          style="overflow-x:auto;"
        >
          <span style="font-family:'Comic Sans MS';">Figure 2. C# Launch.JSON</span>
        </photosizer-block>
        <photosizer-block src="pictures/VS_Code_Debugging_CSharp_Objects.JPG" width="800" class="photoSizerBlock left"
          style="overflow-x:auto;"
        >
          <span style="font-family:'Comic Sans MS';">Figure 3. Debugging C# Objects</span>
        </photosizer-block>
        <!--<photosizer-block src="pictures/VS_Code_Cpp_Plugins.jpg" width="700" class="photoSizerBlock left">
          <span style="font-family:'Comic Sans MS';">Figure 3. C++ Plugins</span>
        </photosizer-block>-->

        <div style="height:0.75em;" class="clear"></div>
        <h3 id="refs">3.0 References</h3>
        <table class="indent">
          <tr>
            <th class="darkItem">Reference</th><th class="darkItem">Description</th>
          </tr>
          <tr>
            <td>
              <a href="https://www.w3schools.com/cs/index.php">C# Tutorial - w3schools</a>
            </td>
            <td>
              Interactive examples
            </td>
          </tr>
          <tr>
            <td>
              <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/">C# Reference - Microsoft</a>
            </td>
            <td>
              Relatively complete informal language reference
            </td>
          </tr>
        </table>
        <div style="height:10em;"></div>
      </content>
      <a id="bottom"></a>
      <page-TOC id="pages" style="display:none;">
      </page-TOC>
      <page-sections id="sections" style="display:none;">
        <menu-elem style="width:0.0em">&nbsp;</menu-elem>
        <menu-elem class="secElem"><a href="#bottom">bottom</a></menu-elem>
        <menu-elem class="secElem"><a href="#refs">refs</a></menu-elem>
        <menu-elem class="secElem"><a href="#ide">VS Code</a></menu-elem>
        <menu-elem class="secElem"><a href="#code">codeSnaps</a></menu-elem>
        <menu-elem class="secElem"><a href="#top">top</a></menu-elem>
      </page-sections>
    </main>
    <frame-footer>
      <menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem id="nextLink2" onclick="bottomMenu.next()">Next</menu-elem>
      <menu-elem id="prevLink2" onclick="bottomMenu.prev()">Prev</menu-elem>
      <menu-elem id="pgbtn" onclick="bottomMenu.pages()">Pages</menu-elem>
      <menu-elem onclick="bottomMenu.sections()">Sections</menu-elem>
      <menu-elem onclick="bottomMenu.about()">About</menu-elem>
      <menu-elem id="kysbtn" onclick="storyHlpMenu.keys()">Keys</menu-elem>
      <!--<menu-item style="width:1.0em;">&nbsp;</menu-item>-->
    </frame-footer>
  </page-frame>
  <script>
    loadAll();
    //setChecks();
    //startLeft();
    //startRight();
  </script>
</body>
</html>