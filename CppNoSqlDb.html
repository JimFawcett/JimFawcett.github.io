<!DOCTYPE html>
<html>
<!--
  CppNoSqlDb.html
-->
<head>
  <title>CppNoSqlDb Repo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/StylesPageFrameDefaults.css" />
  <link rel="stylesheet" href="css/StylesPageFrameStructure.css" />
  <link rel="stylesheet" href="css/StylesPageFrameMenus.css" />
  <link rel="stylesheet" href="css/StylesPageFrameThemeBlue.css" />
  <link rel="stylesheet" href="css/StylesWebComponents.css" />
  <script src="js/ScriptsWebComponents.js"></script>
  <script src="js/ScriptsPageFrameCppRepos.js"></script>
  <script src="js/ScriptsPageFramePagesCppRepos.js"></script>
  <script src="js/ScriptsPageFrameKeyboard.js"></script>
  <style>
    summary {
      padding: 3px 0px 5px 0px;
    }

    .container {
      display: grid;
      grid-template-columns: 0em 0.6fr 1.5fr 0.6fr 1fr 0em;
      /*link to pg, descrip, link to repo, status grid-column-gap: 0em;*/
      padding: 0.0em;
      margin: 0em 0.25em 1em 0.25em;
      border: 1px solid var(--dark);
    }

    .item1 {
      grid-column: 2;
      padding: 0.2em 1em;
      border: 2px solid var(--dark);
    }

    .item2 {
      grid-column: 3;
      padding: 0.2em 1em;
      border: 2px solid var(--dark);
    }

    .item3 {
      grid-column: 4;
      padding: 0.2em 1em;
      border: 2px solid var(--dark);
    }

    .item4 {
      grid-column: 5;
      padding: 0.2em 1em;
      border: 2px solid var(--dark);
    }

    .gray {
      background-color: #ddd;
    }

    .spread {
      margin: 1em;
    }

    .tightSpread {
      margin: 0.5em;
    }
    #github #pagetitle {
      background-color:var(--dark);
      color: var(--light);
    }

    #github #title {
      background-color: var(--dark);
      color: var(--light);
    }

    #github #subtitle {
      background-color: var(--dark);
      color: var(--light);
    }

    #github a.repoLink {
      background-color: var(--dark);
      color: var(--light);
    }
    #github h3 {
      margin-top: 1.0em;
      margin-bottom: 0.75em;
    }
    #github h4 {
      margin-top: 0.75em;
      margin-bottom: 0.75em;
    }
    #github indent-block {
      padding:0.5em 0em;
    }
  </style>
</head>
<body id="github" onload="initialize()">

  <a id="Next" href="Process.html">N</a>
  <a id="Prev" href="ThreadPool.html">P</a>

  <page-frame>
    <frame-header>
      <nav id="navbar"></nav>
    </frame-header>
    <main>
      <div id="about" onclick="this.style.display = 'none'">about</div>
      <div id="modified">12/02/2022</div>
      <div id="page">NoSqlDb Repo</div>
      <div id="hlp"></div>
      <a id="top"></a>
      <content>

        <header>
          <a target="_blank" class="repoLink" href="https://github.com/JimFawcett/CppNoSqlDb">CppNoSqlDb code</a>
          <hgroup id="pagetitle">
            <h1 id="title">CppNoSqlDb&nbsp;&nbsp;Repository</h1>
            <h3 id="subtitle" class="indent">Demonstration prototype for No SQL database</h3>
          </hgroup>

          <div onmouseleave="closeQuickStatus()" style="padding-right:25px; position:absolute; top:1.9em; right:0.25em;">
            <details>
              <summary class="darkItem quickStatus" style="border:1px solid var(--light);">Quick Status</summary>
              <status-grid style="padding:5px 10px;" class="lightItem border">
                <status-itemLeft>
                  Code functions correctly
                </status-itemLeft>
                <status-itemRight>
                  no known defects
                </status-itemRight>
                <status-itemLeft>
                  Demonstration code
                </status-itemLeft>
                <status-itemRight>
                  yes
                </status-itemRight>
                <status-itemLeft>
                  Documentation
                </status-itemLeft>
                <status-itemRight>
                  yes
                </status-itemRight>
                <status-itemLeft>
                  Test cases
                </status-itemLeft>
                <status-itemRight>
                  no
                </status-itemRight>
                <status-itemLeft>
                  Static library
                </status-itemLeft>
                <status-itemRight>
                  no
                </status-itemRight>
                <status-itemLeft>
                  Build requires
                </status-itemLeft>
                <status-itemRight>
                  C++17 option
                </status-itemRight>
                <status-itemLeft>
                  Planned design changes
                </status-itemLeft>
                <status-itemRight>
                  Add example application using NoSqlDb
                </status-itemRight>
              </status-grid>
            </details>
          </div>
        </header>
        <indent-blocks>
          <h3 id="concept">1.0 Concept</h3>
          <div class="right">
            <photosizer-block src="Pictures/NoSqlDb_PackageDiagram.jpg" width="300" class="photoSizerBlock" style="margin-top:0;">
              <span style="
        display: inline-block;
        font-weight: bold;
        font-family: 'Comic Sans MS', Tahoma;
        background-color: #ddd;
        width: 100%;
        padding: 5px 0px;
      ">
                Fig 1. NoSqlDb Packages
              </span>
            </photosizer-block>
          </div>
          <div class="right clear">
            <photosizer-block src="Pictures/DbCoreCode.JPG" width="300" class="photoSizerBlock" style="margin-top:0;">
              <span style="
        display: inline-block;
        font-weight: bold;
        font-family: 'Comic Sans MS', Tahoma;
        background-color: #ddd;
        width: 100%;
        padding: 5px 0px;
      ">
                Fig 2. DbCore Code
              </span>
            </photosizer-block>
          </div>
          <div class="right clear">
            <photosizer-block src="Pictures/DbElementCode.JPG" width="300" class="photoSizerBlock" style="margin-top:0;">
              <span style="
        display: inline-block;
        font-weight: bold;
        font-family: 'Comic Sans MS', Tahoma;
        background-color: #ddd;
        width: 100%;
        padding: 5px 0px;
      ">
                Fig 3. DbElement Code
              </span>
            </photosizer-block>
          </div>
          <t-b>
            The data models used by noSQL databases are usually based on key/value pairs, document stores,
            or networks. noSQL processing favors modeling flexibility, the ability to easily scale out
            across multiple machines, and performance with very large datasets. For that flexibility
            they give up real-time data consistency, accepting application enforced eventual consistency.
            They give up a formal query mechanism (hence the name). And, they may give up Durability
            guarantees by only occasionally writing to persistant storage in order to provide high
            throughput with large volumes of data.
            <div style="height:0.75em;"></div>
            The choice to use
            <a href="https://www.paperplanes.de/2010/7/5/relational_data_document_databases_schema_design.html">SQL or noSQL</a>
            data management is driven by the nature of its uses.
            Managing metadata in a large repository, for example, could be well suited for implementation with a NoSQL database.
          </t-b>
          <h3 id="design">2.0 Design</h3>
          <div id="fig2"></div><div id="fig3"></div>
          <t-b>
            This prototype design is factored into several distinct parts:
            <ol>
              <li>
                <strong>DbCore&lt;P&gt; package:</strong> provides an in-memory key-value database, based on the
                C++ std::unordered_map&lt;key, value&gt;.  It provides only in-memory storage, leaving other
                database operations, like querys and pesistance to other packages.
              </li>
              <li>
                <strong>DbElement&lt;P&gt; package:</strong> represents a single record in the database. It contains
                metadata items name, time-date, and children.  Children provide a way to easily establish relationships
                between records, perhaps based on dependencies.  The template parameter P (Payload) represents the data we want
                to store, and the metadata simply provides information about each of the P values.
              </li>
              <li>
                <strong>Query&lt;P&gt; package:</strong> supports extracting information from the database. Queries
                start with a key set, looking for values and or keys that satisfy some condition, and returns a new
                key set with all the keys for records that match.  Note that this design supports making compound queries
                where each subquery operates on the key set returned by its predecessor subquery, resulting in a progressive
                narrowing of the returned keys.  You might think of this Query process as returning a new,
                probably smaller database, e.g., set of keys and values.
              </li>
              <li>
                <strong>Persist&lt;P&gt; package:</strong> provides durable storage for the database or some
                shard of the database. Persist simply makes a query, usually returning the entire database,
                and saves that to a file.  In this design we use XML storage, but JSON data or some other data
                format would work as well, and it is easy to configure the database for alternate storage formats
                by using a different Persist package. Note that it is, with this design, easy to shard partial
                contents of the database to a shard file.  The only thing required to shard is to make a query
                that returns less than the entire database.
              </li>
            </ol>
            <t-b>
              Note that we can easily provide the equivalent of stored procedures by defining and saving
              lambdas, each of which execute some specific query.  These could be saved in a container for
              future use.  In fact, that container could be just another instance of NoSqlDb.
            </t-b>
          </t-b>
          <h3 id="impl">3.0 Implementation</h3>
          <t-b>
            NoSqlDb code was built with Visual Studio Community Edition - 2019 and tested on Windows 10.
          </t-b>
          <h3 id="status">4.0 Status</h3>
          <t-b>
            The code has a demonstration package, TestClass, that was used to demonstrate how a CSE687 course
            project could convincingly show that it met project requirements
            <a href="ProjStmts-687/Project1-S2018.htm">(Project #1, Spring 2018)</a>.
            <div style="height:0.75em;"></div>
            I intend to use this facility in some up-coming projects, but it has not yet been used in a
            larger application, so it is possible there are latent errors that have not yet be discovered.
          </t-b>
          <t-b>
            This demonstration needs an example application that creates and uses NoSqlDb intance(s).
          </t-b>
          <div style="height:10em;"></div>
      </content>
      <a id="bottom"></a>
      <page-TOC id="pages" style="display:none;">
      </page-TOC>
      <page-sections id="sections" style="display:none;">
        <sec-elem style="width:0.0em">&nbsp;</sec-elem>
        <menu-elem class="secElem"><a href="#bottom">bottom</a></menu-elem>
        <menu-elem class="secElem"><a href="#status">status</a></menu-elem>
        <!--<menu-elem class="secElem"><a href="#build">build</a></menu-elem>-->
        <menu-elem class="secElem"><a href="#impl">impl</a></menu-elem>
        <menu-elem class="secElem"><a href="#design">design</a></menu-elem>
        <!--<menu-elem class="secElem"><a href="#oper">oper</a></menu-elem>-->
        <menu-elem class="secElem"><a href="#concept">concept</a></menu-elem>
        <menu-elem class="secElem"><a href="#top">top</a></menu-elem>
        <div class='darkItem popupHeader' style="padding:0.25em 2.0em;" onclick="this.parentElement.style.display='none'">Sections</div>
      </page-sections>
    </main>
    <frame-footer>
      <menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem id="nextLink2" onclick="bottomMenu.next()">Next</menu-elem>
      <menu-elem id="prevLink2" onclick="bottomMenu.prev()">Prev</menu-elem>
      <menu-elem id="pgbtn" onclick="bottomMenu.pages()">Pages</menu-elem>
      <menu-elem onclick="bottomMenu.sections()">Sections</menu-elem>
      <menu-elem onclick="bottomMenu.about()">About</menu-elem>
      <menu-elem id="kysbtn" onclick="storyHlpMenu.keys()">Keys</menu-elem>
      <!--<menu-item style="width:1.0em;">&nbsp;</menu-item>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.decrZoomScreen()">Zout</menu-elem>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.normZoomScreen()">Zdef</menu-elem>
      <menu-elem style="font-size:0.75em;" onclick="storyHlpMenu.incrZoomScreen()">Zin</menu-elem>-->
    </frame-footer>
  </page-frame>
</body>
</html>