<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <title>Test File Load</title>
  <style>
    body {
      margin: 5%;
      font-family:Tahoma;
    }
  </style>
  <script>
    function testForFileApi() {
      if (window.File && window.FileReader && window.FileList)
        alert('has FileApi');
      else
        alert('no FileApi');
    }

    function readFiles(event) {
      let fileList = event.target.files;
      for (var i = 0; i < fileList.length; ++i)
        loadStory(fileList[i]);
      event.preventDefault();
    }

    function loadStory(url) {
      let reader = new FileReader();
      reader.onload = function (loadedEvent) {
        let place = document.getElementById("loadPlaceHolder");
        place.innerHTML = loadedEvent.target.result;
      }
      reader.readAsText(url);
    }

    function readTextFile(file) {
      var txt = "";
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function () {
        if (xmlhttp.status == 200 && xmlhttp.readyState == 4) {
          txt = xmlhttp.responseText;
          alert(txt);
        }
        //alert('ajax failed');
      }
      xmlhttp.open("GET", file, true);
      xmlhttp.send();
    }
  //  function readTextFile(file)
  //  {
  //    var place = document.getElementById("loadPlaceHolder")
  //    var rawFile = new XMLHttpRequest();
  //    rawFile.open("GET", file, false);
  //    rawFile.onreadystatechange = function ()
  //    {
  //      if(rawFile.readyState === 4)
  //      {
  //          if(rawFile.status === 200 || rawFile.status == 0)
  //          {
  //              var allText = rawFile.responseText;
  //              fileDisplayArea.innerText = allText 
  //          }
  //      }
  //  }
  //  rawFile.send(null);
  //}

  </script>
</head>
<body>
  <button onclick="testForFileApi()">Test for File Api</button><br />
  <button onclick="readTextFile('CppStory.html')">Read File</button><br />
  <input type="file" onchange="readFiles(event)" />
  <input type="file" name="CppStory.html" id="fileToGet" onclick="readFiles(event)" />
  <div id="loadPlaceHolder"></div>
</body>
</html>